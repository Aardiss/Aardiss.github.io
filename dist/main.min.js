"use strict";!function(Y){var Z={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0},onAutoChange:function(){return!0}};Y.fn.bxSlider=function(e){if(0===this.length)return this;if(1<this.length)return this.each(function(){Y(this).bxSlider(e)}),this;var g={},u=this,s=Y(window).width(),o=Y(window).height();if(!Y(u).data("bxSlider")){var n=function(){Y(u).data("bxSlider")||(g.settings=Y.extend({},Z,e),g.settings.slideWidth=parseInt(g.settings.slideWidth),g.children=u.children(g.settings.slideSelector),g.children.length<g.settings.minSlides&&(g.settings.minSlides=g.children.length),g.children.length<g.settings.maxSlides&&(g.settings.maxSlides=g.children.length),g.settings.randomStart&&(g.settings.startSlide=Math.floor(Math.random()*g.children.length)),g.active={index:g.settings.startSlide},g.carousel=1<g.settings.minSlides||1<g.settings.maxSlides,g.carousel&&(g.settings.preloadImages="all"),g.minThreshold=g.settings.minSlides*g.settings.slideWidth+(g.settings.minSlides-1)*g.settings.slideMargin,g.maxThreshold=g.settings.maxSlides*g.settings.slideWidth+(g.settings.maxSlides-1)*g.settings.slideMargin,g.working=!1,g.controls={},g.interval=null,g.animProp="vertical"===g.settings.mode?"top":"left",g.usingCSS=g.settings.useCSS&&"fade"!==g.settings.mode&&function(){for(var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<e.length;i++)if(void 0!==t.style[e[i]])return g.cssPrefix=e[i].replace("Perspective","").toLowerCase(),g.animProp="-"+g.cssPrefix+"-transform",!0;return!1}(),"vertical"===g.settings.mode&&(g.settings.maxSlides=g.settings.minSlides),u.data("origStyle",u.attr("style")),u.children(g.settings.slideSelector).each(function(){Y(this).data("origStyle",Y(this).attr("style"))}),t())},t=function(){var t=g.children.eq(g.settings.startSlide);u.wrap('<div class="'+g.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),g.viewport=u.parent(),g.settings.ariaLive&&!g.settings.ticker&&g.viewport.attr("aria-live","polite"),g.loader=Y('<div class="bx-loading" />'),g.viewport.prepend(g.loader),u.css({width:"horizontal"===g.settings.mode?1e3*g.children.length+215+"%":"auto",position:"relative"}),g.usingCSS&&g.settings.easing?u.css("-"+g.cssPrefix+"-transition-timing-function",g.settings.easing):g.settings.easing||(g.settings.easing="swing"),g.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),g.viewport.parent().css({maxWidth:l()}),g.children.css({float:"horizontal"===g.settings.mode?"left":"none",listStyle:"none",position:"relative"}),g.children.css("width",d()),"horizontal"===g.settings.mode&&0<g.settings.slideMargin&&g.children.css("marginRight",g.settings.slideMargin),"vertical"===g.settings.mode&&0<g.settings.slideMargin&&g.children.css("marginBottom",g.settings.slideMargin),"fade"===g.settings.mode&&(g.children.css({position:"absolute",zIndex:0,display:"none"}),g.children.eq(g.settings.startSlide).css({zIndex:g.settings.slideZIndex,display:"block"})),g.controls.el=Y('<div class="bx-controls" />'),g.settings.captions&&C(),g.active.last=g.settings.startSlide===v()-1,g.settings.video&&u.fitVids(),"none"===g.settings.preloadImages?t=null:"all"!==g.settings.preloadImages&&!g.settings.ticker||(t=g.children),g.settings.ticker?g.settings.pager=!1:(g.settings.controls&&w(),g.settings.auto&&g.settings.autoControls&&b(),g.settings.pager&&S(),(g.settings.controls||g.settings.autoControls||g.settings.pager)&&g.viewport.after(g.controls.el)),null===t?a():r(t,a)},r=function(t,e){var i=t.find('img:not([src=""]), iframe').length,n=0;0!==i?t.find('img:not([src=""]), iframe').each(function(){Y(this).one("load error",function(){++n===i&&e()}).each(function(){!this.complete&&""!=this.src||Y(this).trigger("load")})}):e()},a=function(){var t,e,i;g.settings.infiniteLoop&&"fade"!==g.settings.mode&&!g.settings.ticker&&(t="vertical"===g.settings.mode?g.settings.minSlides:g.settings.maxSlides,e=g.children.slice(0,t).clone(!0).addClass("bx-clone"),i=g.children.slice(-t).clone(!0).addClass("bx-clone"),g.settings.ariaHidden&&(e.attr("aria-hidden",!0),i.attr("aria-hidden",!0)),u.append(e).prepend(i)),g.loader.remove(),f(),"vertical"===g.settings.mode&&(g.settings.adaptiveHeight=!0),g.viewport.height(p()),u.redrawSlider(),g.settings.onSliderLoad.call(u,g.active.index),g.initialized=!0,g.settings.responsive&&Y(window).on("resize",B),g.settings.auto&&g.settings.autoStart&&(1<v()||g.settings.autoSlideForOnePage)&&q(),g.settings.ticker&&L(),g.settings.pager&&P(g.settings.startSlide),g.settings.controls&&$(),g.settings.touchEnabled&&!g.settings.ticker&&W(),g.settings.keyboardEnabled&&!g.settings.ticker&&Y(document).keydown(H)},p=function(){var e=0,t=Y();if("vertical"===g.settings.mode||g.settings.adaptiveHeight)if(g.carousel){var n=1===g.settings.moveSlides?g.active.index:g.active.index*h(),t=g.children.eq(n);for(i=1;i<=g.settings.maxSlides-1;i++)t=n+i>=g.children.length?t.add(g.children.eq(i-1)):t.add(g.children.eq(n+i))}else t=g.children.eq(g.active.index);else t=g.children;return"vertical"===g.settings.mode?(t.each(function(t){e+=Y(this).outerHeight()}),0<g.settings.slideMargin&&(e+=g.settings.slideMargin*(g.settings.minSlides-1))):e=Math.max.apply(Math,t.map(function(){return Y(this).outerHeight(!1)}).get()),"border-box"===g.viewport.css("box-sizing")?e+=parseFloat(g.viewport.css("padding-top"))+parseFloat(g.viewport.css("padding-bottom"))+parseFloat(g.viewport.css("border-top-width"))+parseFloat(g.viewport.css("border-bottom-width")):"padding-box"===g.viewport.css("box-sizing")&&(e+=parseFloat(g.viewport.css("padding-top"))+parseFloat(g.viewport.css("padding-bottom"))),e},l=function(){var t="100%";return 0<g.settings.slideWidth&&(t="horizontal"===g.settings.mode?g.settings.maxSlides*g.settings.slideWidth+(g.settings.maxSlides-1)*g.settings.slideMargin:g.settings.slideWidth),t},d=function(){var t=g.settings.slideWidth,e=g.viewport.width();if(0===g.settings.slideWidth||g.settings.slideWidth>e&&!g.carousel||"vertical"===g.settings.mode)t=e;else if(1<g.settings.maxSlides&&"horizontal"===g.settings.mode){if(e>g.maxThreshold)return t;e<g.minThreshold?t=(e-g.settings.slideMargin*(g.settings.minSlides-1))/g.settings.minSlides:g.settings.shrinkItems&&(t=Math.floor((e+g.settings.slideMargin)/Math.ceil((e+g.settings.slideMargin)/(t+g.settings.slideMargin))-g.settings.slideMargin))}return t},c=function(){var t,e=1;return"horizontal"===g.settings.mode&&0<g.settings.slideWidth?e=g.viewport.width()<g.minThreshold?g.settings.minSlides:g.viewport.width()>g.maxThreshold?g.settings.maxSlides:(t=g.children.first().width()+g.settings.slideMargin,Math.floor((g.viewport.width()+g.settings.slideMargin)/t)||1):"vertical"===g.settings.mode&&(e=g.settings.minSlides),e},v=function(){var t=0,e=0,i=0;if(0<g.settings.moveSlides){if(!g.settings.infiniteLoop){for(;e<g.children.length;)++t,e=i+c(),i+=g.settings.moveSlides<=c()?g.settings.moveSlides:c();return i}t=Math.ceil(g.children.length/h())}else t=Math.ceil(g.children.length/c());return t},h=function(){return 0<g.settings.moveSlides&&g.settings.moveSlides<=c()?g.settings.moveSlides:c()},f=function(){var t,e,i;g.children.length>g.settings.maxSlides&&g.active.last&&!g.settings.infiniteLoop?"horizontal"===g.settings.mode?(t=(e=g.children.last()).position(),m(-(t.left-(g.viewport.width()-e.outerWidth())),"reset",0)):"vertical"===g.settings.mode&&(i=g.children.length-g.settings.minSlides,t=g.children.eq(i).position(),m(-t.top,"reset",0)):(t=g.children.eq(g.active.index*h()).position(),g.active.index===v()-1&&(g.active.last=!0),void 0!==t&&("horizontal"===g.settings.mode?m(-t.left,"reset",0):"vertical"===g.settings.mode&&m(-t.top,"reset",0)))},m=function e(t,i,n,s){var o,r;g.usingCSS?(r="vertical"===g.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)",u.css("-"+g.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===i?(u.css(g.animProp,r),0!==n?u.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){Y(t.target).is(u)&&(u.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),M())}):M()):"reset"===i?u.css(g.animProp,r):"ticker"===i&&(u.css("-"+g.cssPrefix+"-transition-timing-function","linear"),u.css(g.animProp,r),0!==n?u.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){Y(t.target).is(u)&&(u.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),e(s.resetValue,"reset",0),A())}):(e(s.resetValue,"reset",0),A()))):((o={})[g.animProp]=t,"slide"===i?u.animate(o,n,g.settings.easing,function(){M()}):"reset"===i?u.css(g.animProp,t):"ticker"===i&&u.animate(o,n,"linear",function(){e(s.resetValue,"reset",0),A()}))},x=function(){for(var t="",e="",i=v(),n=0;n<i;n++)e="",g.settings.buildPager&&Y.isFunction(g.settings.buildPager)||g.settings.pagerCustom?(e=g.settings.buildPager(n),g.pagerEl.addClass("bx-custom-pager")):(e=n+1,g.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+e+"</a></div>";g.pagerEl.html(t)},S=function(){g.settings.pagerCustom?g.pagerEl=Y(g.settings.pagerCustom):(g.pagerEl=Y('<div class="bx-pager" />'),g.settings.pagerSelector?Y(g.settings.pagerSelector).html(g.pagerEl):g.controls.el.addClass("bx-has-pager").append(g.pagerEl),x()),g.pagerEl.on("click touchend","a",E)},w=function(){g.controls.next=Y('<a class="bx-next" href="">'+g.settings.nextText+"</a>"),g.controls.prev=Y('<a class="bx-prev" href="">'+g.settings.prevText+"</a>"),g.controls.next.on("click touchend",_),g.controls.prev.on("click touchend",k),g.settings.nextSelector&&Y(g.settings.nextSelector).append(g.controls.next),g.settings.prevSelector&&Y(g.settings.prevSelector).append(g.controls.prev),g.settings.nextSelector||g.settings.prevSelector||(g.controls.directionEl=Y('<div class="bx-controls-direction" />'),g.controls.directionEl.append(g.controls.prev).append(g.controls.next),g.controls.el.addClass("bx-has-controls-direction").append(g.controls.directionEl))},b=function(){g.controls.start=Y('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+g.settings.startText+"</a></div>"),g.controls.stop=Y('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+g.settings.stopText+"</a></div>"),g.controls.autoEl=Y('<div class="bx-controls-auto" />'),g.controls.autoEl.on("click",".bx-start",y),g.controls.autoEl.on("click",".bx-stop",T),g.settings.autoControlsCombine?g.controls.autoEl.append(g.controls.start):g.controls.autoEl.append(g.controls.start).append(g.controls.stop),g.settings.autoControlsSelector?Y(g.settings.autoControlsSelector).html(g.controls.autoEl):g.controls.el.addClass("bx-has-controls-auto").append(g.controls.autoEl),I(g.settings.autoStart?"stop":"start")},C=function(){g.children.each(function(t){var e=Y(this).find("img:first").attr("title");void 0!==e&&(""+e).length&&Y(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},_=function(t){t.preventDefault(),g.controls.el.hasClass("disabled")||(g.settings.auto&&g.settings.stopAutoOnClick&&u.stopAuto(),u.goToNextSlide())},k=function(t){t.preventDefault(),g.controls.el.hasClass("disabled")||(g.settings.auto&&g.settings.stopAutoOnClick&&u.stopAuto(),u.goToPrevSlide())},y=function(t){u.startAuto(),t.preventDefault()},T=function(t){u.stopAuto(),t.preventDefault()},E=function(t){var e,i;t.preventDefault(),g.controls.el.hasClass("disabled")||(g.settings.auto&&g.settings.stopAutoOnClick&&u.stopAuto(),void 0!==(e=Y(t.currentTarget)).attr("data-slide-index")&&(i=parseInt(e.attr("data-slide-index")))!==g.active.index&&u.goToSlide(i))},P=function(i){var t=g.children.length;if("short"===g.settings.pagerType)return 1<g.settings.maxSlides&&(t=Math.ceil(g.children.length/g.settings.maxSlides)),void g.pagerEl.html(i+1+g.settings.pagerShortSeparator+t);g.pagerEl.find("a").removeClass("active"),g.pagerEl.each(function(t,e){Y(e).find("a").eq(i).addClass("active")})},M=function(){var t;g.settings.infiniteLoop&&(t="",0===g.active.index?t=g.children.eq(0).position():g.active.index===v()-1&&g.carousel?t=g.children.eq((v()-1)*h()).position():g.active.index===g.children.length-1&&(t=g.children.eq(g.children.length-1).position()),t&&("horizontal"===g.settings.mode?m(-t.left,"reset",0):"vertical"===g.settings.mode&&m(-t.top,"reset",0))),g.working=!1,g.settings.onSlideAfter.call(u,g.children.eq(g.active.index),g.oldIndex,g.active.index)},I=function(t){g.settings.autoControlsCombine?g.controls.autoEl.html(g.controls[t]):(g.controls.autoEl.find("a").removeClass("active"),g.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},$=function(){1===v()?(g.controls.prev.addClass("disabled"),g.controls.next.addClass("disabled")):!g.settings.infiniteLoop&&g.settings.hideControlOnEnd&&(0===g.active.index?(g.controls.prev.addClass("disabled"),g.controls.next.removeClass("disabled")):g.active.index===v()-1?(g.controls.next.addClass("disabled"),g.controls.prev.removeClass("disabled")):(g.controls.prev.removeClass("disabled"),g.controls.next.removeClass("disabled")))},z=function(){u.startAuto()},D=function(){u.stopAuto()},q=function(){0<g.settings.autoDelay?setTimeout(u.startAuto,g.settings.autoDelay):(u.startAuto(),Y(window).focus(z).blur(D)),g.settings.autoHover&&u.hover(function(){g.interval&&(u.stopAuto(!0),g.autoPaused=!0)},function(){g.autoPaused&&(u.startAuto(!0),g.autoPaused=null)})},L=function(){var t,e,i,n,s,o,r,a,l=0;"next"===g.settings.autoDirection?u.append(g.children.clone().addClass("bx-clone")):(u.prepend(g.children.clone().addClass("bx-clone")),t=g.children.first().position(),l="horizontal"===g.settings.mode?-t.left:-t.top),m(l,"reset",0),g.settings.pager=!1,g.settings.controls=!1,g.settings.autoControls=!1,g.settings.tickerHover&&(g.usingCSS?(n="horizontal"===g.settings.mode?4:5,g.viewport.hover(function(){e=u.css("-"+g.cssPrefix+"-transform"),i=parseFloat(e.split(",")[n]),m(i,"reset",0)},function(){a=0,g.children.each(function(t){a+="horizontal"===g.settings.mode?Y(this).outerWidth(!0):Y(this).outerHeight(!0)}),s=g.settings.speed/a,o="horizontal"===g.settings.mode?"left":"top",r=s*(a-Math.abs(parseInt(i))),A(r)})):g.viewport.hover(function(){u.stop()},function(){a=0,g.children.each(function(t){a+="horizontal"===g.settings.mode?Y(this).outerWidth(!0):Y(this).outerHeight(!0)}),s=g.settings.speed/a,o="horizontal"===g.settings.mode?"left":"top",r=s*(a-Math.abs(parseInt(u.css(o)))),A(r)})),A()},A=function(t){var e,i,n=t||g.settings.speed,s={left:0,top:0},o={left:0,top:0};"next"===g.settings.autoDirection?s=u.find(".bx-clone").first().position():o=g.children.first().position(),e="horizontal"===g.settings.mode?-s.left:-s.top,i="horizontal"===g.settings.mode?-o.left:-o.top,m(e,"ticker",n,{resetValue:i})},H=function(t){var e,i,n,s,o=document.activeElement.tagName.toLowerCase();if(null==new RegExp(o,["i"]).exec("input|textarea")&&(e=u,i=Y(window),n={top:i.scrollTop(),left:i.scrollLeft()},s=e.offset(),n.right=n.left+i.width(),n.bottom=n.top+i.height(),s.right=s.left+e.outerWidth(),s.bottom=s.top+e.outerHeight(),!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom))){if(39===t.keyCode)return _(t),!1;if(37===t.keyCode)return k(t),!1}},W=function(){g.touch={start:{x:0,y:0},end:{x:0,y:0}},g.viewport.on("touchstart MSPointerDown pointerdown",O),g.viewport.on("click",".bxslider a",function(t){g.viewport.hasClass("click-disabled")&&(t.preventDefault(),g.viewport.removeClass("click-disabled"))})},O=function(t){if("touchstart"===t.type||0===t.button)if(t.preventDefault(),g.controls.el.addClass("disabled"),g.working)g.controls.el.removeClass("disabled");else{g.touch.originalPos=u.position();var e=t.originalEvent,i=void 0!==e.changedTouches?e.changedTouches:[e];if("function"==typeof PointerEvent&&void 0===e.pointerId)return;g.touch.start.x=i[0].pageX,g.touch.start.y=i[0].pageY,g.viewport.get(0).setPointerCapture&&(g.pointerId=e.pointerId,g.viewport.get(0).setPointerCapture(g.pointerId)),g.originalClickTarget=e.originalTarget||e.target,g.originalClickButton=e.button,g.originalClickButtons=e.buttons,g.originalEventType=e.type,g.hasMove=!1,g.viewport.on("touchmove MSPointerMove pointermove",F),g.viewport.on("touchend MSPointerUp pointerup",V),g.viewport.on("MSPointerCancel pointercancel",N)}},N=function t(e){e.preventDefault(),m(g.touch.originalPos.left,"reset",0),g.controls.el.removeClass("disabled"),g.viewport.off("MSPointerCancel pointercancel",t),g.viewport.off("touchmove MSPointerMove pointermove",F),g.viewport.off("touchend MSPointerUp pointerup",V),g.viewport.get(0).releasePointerCapture&&g.viewport.get(0).releasePointerCapture(g.pointerId)},F=function(t){var e=t.originalEvent,i=void 0!==e.changedTouches?e.changedTouches:[e],n=Math.abs(i[0].pageX-g.touch.start.x),s=Math.abs(i[0].pageY-g.touch.start.y),o=0,r=0;g.hasMove=!0,(s<3*n&&g.settings.preventDefaultSwipeX||n<3*s&&g.settings.preventDefaultSwipeY)&&t.preventDefault(),"touchmove"!==t.type&&t.preventDefault(),"fade"!==g.settings.mode&&g.settings.oneToOneTouch&&(o="horizontal"===g.settings.mode?(r=i[0].pageX-g.touch.start.x,g.touch.originalPos.left+r):(r=i[0].pageY-g.touch.start.y,g.touch.originalPos.top+r),m(o,"reset",0))},V=function t(e){e.preventDefault(),g.viewport.off("touchmove MSPointerMove pointermove",F),g.controls.el.removeClass("disabled");var i=e.originalEvent,n=void 0!==i.changedTouches?i.changedTouches:[i],s=0,o=0;g.touch.end.x=n[0].pageX,g.touch.end.y=n[0].pageY,"fade"===g.settings.mode?(o=Math.abs(g.touch.start.x-g.touch.end.x))>=g.settings.swipeThreshold&&(g.touch.start.x>g.touch.end.x?u.goToNextSlide():u.goToPrevSlide(),u.stopAuto()):(s="horizontal"===g.settings.mode?(o=g.touch.end.x-g.touch.start.x,g.touch.originalPos.left):(o=g.touch.end.y-g.touch.start.y,g.touch.originalPos.top),(g.settings.infiniteLoop||!(0===g.active.index&&0<o||g.active.last&&o<0))&&Math.abs(o)>=g.settings.swipeThreshold?(o<0?u.goToNextSlide():u.goToPrevSlide(),u.stopAuto()):m(s,"reset",200)),g.viewport.off("touchend MSPointerUp pointerup",t),g.viewport.get(0).releasePointerCapture&&g.viewport.get(0).releasePointerCapture(g.pointerId),!1!==g.hasMove||0!==g.originalClickButton&&"touchstart"!==g.originalEventType||Y(g.originalClickTarget).trigger({type:"click",button:g.originalClickButton,buttons:g.originalClickButtons})},B=function t(e){var i,n;g.initialized&&(g.working?window.setTimeout(t,10):(i=Y(window).width(),n=Y(window).height(),s===i&&o===n||(s=i,o=n,u.redrawSlider(),g.settings.onSliderResize.call(u,g.active.index))))},X=function(t){var e=c();g.settings.ariaHidden&&!g.settings.ticker&&(g.children.attr("aria-hidden","true"),g.children.slice(t,t+e).attr("aria-hidden","false"))};return u.goToSlide=function(t,e){var i,n,s,o,r,a=!0,l=0,d={left:0,top:0},c=null;if(g.oldIndex=g.active.index,g.active.index=(r=t)<0?g.settings.infiniteLoop?v()-1:g.active.index:r>=v()?g.settings.infiniteLoop?0:g.active.index:r,!g.working&&g.active.index!==g.oldIndex){if(g.working=!0,void 0!==(a=g.settings.onSlideBefore.call(u,g.children.eq(g.active.index),g.oldIndex,g.active.index))&&!a)return g.active.index=g.oldIndex,void(g.working=!1);"next"===e?g.settings.onSlideNext.call(u,g.children.eq(g.active.index),g.oldIndex,g.active.index)||(a=!1):"prev"===e&&(g.settings.onSlidePrev.call(u,g.children.eq(g.active.index),g.oldIndex,g.active.index)||(a=!1)),g.active.last=g.active.index>=v()-1,(g.settings.pager||g.settings.pagerCustom)&&P(g.active.index),g.settings.controls&&$(),"fade"===g.settings.mode?(g.settings.adaptiveHeight&&g.viewport.height()!==p()&&g.viewport.animate({height:p()},g.settings.adaptiveHeightSpeed),g.children.filter(":visible").fadeOut(g.settings.speed).css({zIndex:0}),g.children.eq(g.active.index).css("zIndex",g.settings.slideZIndex+1).fadeIn(g.settings.speed,function(){Y(this).css("zIndex",g.settings.slideZIndex),M()})):(g.settings.adaptiveHeight&&g.viewport.height()!==p()&&g.viewport.animate({height:p()},g.settings.adaptiveHeightSpeed),!g.settings.infiniteLoop&&g.carousel&&g.active.last?"horizontal"===g.settings.mode?(d=(c=g.children.eq(g.children.length-1)).position(),l=g.viewport.width()-c.outerWidth()):(i=g.children.length-g.settings.minSlides,d=g.children.eq(i).position()):g.carousel&&g.active.last&&"prev"===e?(n=1===g.settings.moveSlides?g.settings.maxSlides-h():(v()-1)*h()-(g.children.length-g.settings.maxSlides),d=(c=u.children(".bx-clone").eq(n)).position()):"next"===e&&0===g.active.index?(d=u.find("> .bx-clone").eq(g.settings.maxSlides).position(),g.active.last=!1):0<=t&&(o=t*parseInt(h()),d=g.children.eq(o).position()),void 0!==d&&(s="horizontal"===g.settings.mode?-(d.left-l):-d.top,m(s,"slide",g.settings.speed)),g.working=!1),g.settings.ariaHidden&&X(g.active.index*h())}},u.goToNextSlide=function(){var t;!g.settings.infiniteLoop&&g.active.last||!0!==g.working&&(t=parseInt(g.active.index)+1,u.goToSlide(t,"next"))},u.goToPrevSlide=function(){var t;!g.settings.infiniteLoop&&0===g.active.index||!0===g.working||(t=parseInt(g.active.index)-1,u.goToSlide(t,"prev"))},u.startAuto=function(t){g.interval||(g.interval=setInterval(function(){"next"===g.settings.autoDirection?u.goToNextSlide():u.goToPrevSlide()},g.settings.pause),g.settings.onAutoChange.call(u,!0),g.settings.autoControls&&!0!==t&&I("stop"))},u.stopAuto=function(t){g.autoPaused&&(g.autoPaused=!1),g.interval&&(clearInterval(g.interval),g.interval=null,g.settings.onAutoChange.call(u,!1),g.settings.autoControls&&!0!==t&&I("start"))},u.getCurrentSlide=function(){return g.active.index},u.getCurrentSlideElement=function(){return g.children.eq(g.active.index)},u.getSlideElement=function(t){return g.children.eq(t)},u.getSlideCount=function(){return g.children.length},u.isWorking=function(){return g.working},u.redrawSlider=function(){g.children.add(u.find(".bx-clone")).outerWidth(d()),g.viewport.css("height",p()),g.settings.ticker||f(),g.active.last&&(g.active.index=v()-1),g.active.index>=v()&&(g.active.last=!0),g.settings.pager&&!g.settings.pagerCustom&&(x(),P(g.active.index)),g.settings.ariaHidden&&X(g.active.index*h())},u.destroySlider=function(){g.initialized&&(g.initialized=!1,Y(".bx-clone",this).remove(),g.children.each(function(){void 0!==Y(this).data("origStyle")?Y(this).attr("style",Y(this).data("origStyle")):Y(this).removeAttr("style")}),void 0!==Y(this).data("origStyle")?this.attr("style",Y(this).data("origStyle")):Y(this).removeAttr("style"),Y(this).unwrap().unwrap(),g.controls.el&&g.controls.el.remove(),g.controls.next&&g.controls.next.remove(),g.controls.prev&&g.controls.prev.remove(),g.pagerEl&&g.settings.controls&&!g.settings.pagerCustom&&g.pagerEl.remove(),Y(".bx-caption",this).remove(),g.controls.autoEl&&g.controls.autoEl.remove(),clearInterval(g.interval),g.settings.responsive&&Y(window).off("resize",B),g.settings.keyboardEnabled&&Y(document).off("keydown",H),Y(this).removeData("bxSlider"),Y(window).off("blur",D).off("focus",z))},u.reloadSlider=function(t){void 0!==t&&(e=t),u.destroySlider(),n(),Y(u).data("bxSlider",this)},n(),Y(u).data("bxSlider",this),this}}}(jQuery),function(){function a(t){var e=t.find(".command__profile-panel");t.find(".command__profile-name").removeClass("active"),e.height(0)}$(".command__profile-name").click(function(t){var e,i,n,s,o=$(t.currentTarget),r=o.closest(".command__list");o.hasClass("active")?a(r):(a(r),i=(e=o).closest(".command__profile"),n=i.find(".command__profile-panel"),s=i.find(".command__profile-block").height(),e.addClass("active"),n.height(s))})}(),function(){function o(t){var e=t.find(".assort__item"),i=t.find(".assort__wrap");e.removeClass("assort-active"),i.width(0)}function r(t){var e,i,n,s,o,r,a,l,d=t.find(".assort__wrap"),c=(e=t,i=0,n=$(window).width(),s=e.closest(".assort__list").find(".assort__trigger"),o=s.width()*s.length,r=e.find(".assort__content"),a=parseInt(r.css("padding-left")),l=parseInt(r.css("padding-right")),{container:i=window.matchMedia("(max-width: 768px)").matches?n-o:500,textContainer:i-a-l}),g=t.find(".assort__content");t.addClass("assort-active"),d.width(c.container),g.width(c.textContainer)}$(".assort__trigger").on("click",function(t){t.preventDefault();var e=$(t.currentTarget),i=e.closest(".assort__item"),n=i.hasClass("assort-active"),s=e.closest(".assort__list");n?o(s):(o(s),r(i))}),$(".assort__close").on("click",function(t){t.preventDefault(),o($(".assort__list"))})}(),function(){var t;ymaps.ready(function(){t=new ymaps.Map("map",{center:[55.749536,37.620857],zoom:13.5,controls:[]});var e=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"../img/icons/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]});[[55.756832,37.586203],[55.757425,37.627059],[55.744799,37.581622],[55.749532,37.607942]].forEach(function(t){e.add(new ymaps.Placemark(t))}),t.geoObjects.add(e),t.behaviors.disable("scrollZoom")})}(),function(){var t=document.querySelector(".hamburger"),e=document.querySelector(".hamburger__menu");document.querySelector(".close");t.addEventListener("click",function(){e.classList.add("menu_window")}),e.addEventListener("click",function(t){t.target.classList.contains("menu__item")&&!t.target.classList.contains("close")||e.classList.remove("menu_window"),t.target.classList.contains("menu__item")&&e.classList.remove("menu_window")})}(),$(".form").submit(function(t){t.preventDefault();var e,i,n=$(t.currentTarget),s=n.find("[name='name']"),o=n.find("[name='phone']"),r=n.find("[name='comment']"),a=n.find("[name='to']"),l=$("#modal"),d=l.find(".modal__content");l.removeClass("error-modal"),(e=n,[s,o,r,a].forEach(function(t){t.removeClass("input__error"),""==t.val().trim()&&t.addClass("input__error")}),0==e.find(".input__error").length)&&((i=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:s.val(),phone:o.val(),comment:r.val(),to:a.val()}})).done(function(t){d.text(t.message)}),i.fail(function(t){var e=t.responseJSON.message;d.text(e),l.addClass("error-modal")}),i.always(function(){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-submit-btn").click(function(t){t.preventDefault(),$.fancybox.close()}),function(){var s=$("section"),o=$(".maincontent"),r=$(".fixed-menu__link"),a=r.find(".fixed-menu__link"),t=new MobileDetect(window.navigator.userAgent).mobile(),l=!1;s.first().addClass("section-active");function d(t,e,i){t.eq(e).addClass(i).siblings().removeClass(i)}function c(t){var e,i,n;0==l&&(l=!0,e=-100*t,i=t,n="fixed-black","black"==s.eq(i).attr("data-theme")?r.addClass(n):r.removeClass(n),o.css({transform:"translateY(".concat(e,"%)")}),d(s,t,"section-active"),setTimeout(function(){l=!1,d(a,t,"fixed-menu__link--active")},1300))}function i(t){var e=s.filter(".section-active"),i=e.next(),n=e.prev();"next"==t&&i.length&&c(i.index()),"prev"==t&&i.length&&c(n.index())}$(window).on("wheel",function(t){var e=t.originalEvent.deltaY;0<e&&i("next"),e<0&&i("prev")}),$(window).on("keydown",function(t){var e=t.target.tagName.toLowerCase();if("input"!=e&&"textarea"!=e)switch(t.keyCode){case 38:i("prev");break;case 40:i("next")}}),$(".wrapper").on("touchmove",function(t){return t.preventDefault()}),$("[data-to]").click(function(t){t.preventDefault();var e=$(t.currentTarget).attr("data-to"),i=$("[data-id=".concat(e,"]"));c(i.index())}),t&&$("body").swipe({swipe:function(t,e){viewportScroller()["down"==e?"prev":"up"==e?"next":""]()}})}(),function(){$(".player");var s,e=$(".player__start"),i=$(".volume__pic"),n=function(){var t,e=s.getDuration();void 0!==t&&clearInterval(t),t=setInterval(function(){var t=s.getCurrentTime()/e*100;$(".player__playback-button").css({left:"".concat(t,"%")})},1e3)};$(".player__start").click(function(t){t.preventDefault();$(t.currentTarget);e.hasClass("player--paused")?s.pauseVideo():s.playVideo(),n()}),$(".player__playback").click(function(t){var e=$(t.currentTarget),i=t.originalEvent.layerX/e.width()*100,n=s.getDuration()/100*i;$(".player__playback-button").css({left:"".concat(i,"%")}),s.seekTo(n)}),$(".player__splash").click(function(t){s.playVideo()}),$(".volume__pic").click(function(t){t.preventDefault(),i.hasClass("volume__pic--nosound")?(s.unMute(),i.removeClass("volume__pic--nosound")):(s.mute(),i.addClass("volume__pic--nosound"))}),$(".volume__playback").click(function(t){var e=$(t.currentTarget),i=t.originalEvent.layerX/e.width()*100;s.getVolume();$(".volume__playback-button").css({left:"".concat(i,"%")}),s.setVolume(i)})}(),function(){var e=$(".slider").bxSlider({pager:!1,controls:!1});$(".section-bar__arrow-back").click(function(t){t.preventDefault(),e.goToPrevSlide()}),$(".section-bar__arrow-forward").click(function(t){t.preventDefault(),e.goToNextSlide()})}(),$(".interactive-avatar__link").click(function(t){t.preventDefault();var i,e=$(t.currentTarget),n=e.attr("data-open"),s=(i=n,$(".reviews__item").filter(function(t,e){return $(e).attr("data-linked-with")==i})),o=e.closest(".reviews__switcher-item");s.addClass("item-active").siblings().removeClass("item-active"),o.addClass("item__active").siblings().removeClass("item__active")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5ieHNsaWRlci5qcyIsImFjY29yZGlvbi5qcyIsImFjY29yZGlvbl9ob3Jpem9udGFsLmpzIiwibWFwLmpzIiwibWVudS5qcyIsIm1vZGFsLmpzIiwib3BzLmpzIiwicGxheWVyLmpzIiwic2xpZGVyLmpzIiwidGFicy5qcyJdLCJuYW1lcyI6WyIkIiwiZGVmYXVsdHMiLCJtb2RlIiwic2xpZGVTZWxlY3RvciIsImluZmluaXRlTG9vcCIsImhpZGVDb250cm9sT25FbmQiLCJzcGVlZCIsImVhc2luZyIsInNsaWRlTWFyZ2luIiwic3RhcnRTbGlkZSIsInJhbmRvbVN0YXJ0IiwiY2FwdGlvbnMiLCJ0aWNrZXIiLCJ0aWNrZXJIb3ZlciIsImFkYXB0aXZlSGVpZ2h0IiwiYWRhcHRpdmVIZWlnaHRTcGVlZCIsInZpZGVvIiwidXNlQ1NTIiwicHJlbG9hZEltYWdlcyIsInJlc3BvbnNpdmUiLCJzbGlkZVpJbmRleCIsIndyYXBwZXJDbGFzcyIsInRvdWNoRW5hYmxlZCIsInN3aXBlVGhyZXNob2xkIiwib25lVG9PbmVUb3VjaCIsInByZXZlbnREZWZhdWx0U3dpcGVYIiwicHJldmVudERlZmF1bHRTd2lwZVkiLCJhcmlhTGl2ZSIsImFyaWFIaWRkZW4iLCJrZXlib2FyZEVuYWJsZWQiLCJwYWdlciIsInBhZ2VyVHlwZSIsInBhZ2VyU2hvcnRTZXBhcmF0b3IiLCJwYWdlclNlbGVjdG9yIiwiYnVpbGRQYWdlciIsInBhZ2VyQ3VzdG9tIiwiY29udHJvbHMiLCJuZXh0VGV4dCIsInByZXZUZXh0IiwibmV4dFNlbGVjdG9yIiwicHJldlNlbGVjdG9yIiwiYXV0b0NvbnRyb2xzIiwic3RhcnRUZXh0Iiwic3RvcFRleHQiLCJhdXRvQ29udHJvbHNDb21iaW5lIiwiYXV0b0NvbnRyb2xzU2VsZWN0b3IiLCJhdXRvIiwicGF1c2UiLCJhdXRvU3RhcnQiLCJhdXRvRGlyZWN0aW9uIiwic3RvcEF1dG9PbkNsaWNrIiwiYXV0b0hvdmVyIiwiYXV0b0RlbGF5IiwiYXV0b1NsaWRlRm9yT25lUGFnZSIsIm1pblNsaWRlcyIsIm1heFNsaWRlcyIsIm1vdmVTbGlkZXMiLCJzbGlkZVdpZHRoIiwic2hyaW5rSXRlbXMiLCJvblNsaWRlckxvYWQiLCJvblNsaWRlQmVmb3JlIiwib25TbGlkZUFmdGVyIiwib25TbGlkZU5leHQiLCJvblNsaWRlUHJldiIsIm9uU2xpZGVyUmVzaXplIiwib25BdXRvQ2hhbmdlIiwiZm4iLCJieFNsaWRlciIsIm9wdGlvbnMiLCJ0aGlzIiwibGVuZ3RoIiwiZWFjaCIsInNsaWRlciIsImVsIiwid2luZG93V2lkdGgiLCJ3aW5kb3ciLCJ3aWR0aCIsIndpbmRvd0hlaWdodCIsImhlaWdodCIsImRhdGEiLCJpbml0Iiwic2V0dGluZ3MiLCJleHRlbmQiLCJwYXJzZUludCIsImNoaWxkcmVuIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWN0aXZlIiwiaW5kZXgiLCJjYXJvdXNlbCIsIm1pblRocmVzaG9sZCIsIm1heFRocmVzaG9sZCIsIndvcmtpbmciLCJpbnRlcnZhbCIsImFuaW1Qcm9wIiwidXNpbmdDU1MiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsImkiLCJ1bmRlZmluZWQiLCJzdHlsZSIsImNzc1ByZWZpeCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImF0dHIiLCJzZXR1cCIsInByZWxvYWRTZWxlY3RvciIsImVxIiwid3JhcCIsInZpZXdwb3J0IiwicGFyZW50IiwibG9hZGVyIiwicHJlcGVuZCIsImNzcyIsInBvc2l0aW9uIiwib3ZlcmZsb3ciLCJtYXhXaWR0aCIsImdldFZpZXdwb3J0TWF4V2lkdGgiLCJmbG9hdCIsImxpc3RTdHlsZSIsImdldFNsaWRlV2lkdGgiLCJ6SW5kZXgiLCJkaXNwbGF5IiwiYXBwZW5kQ2FwdGlvbnMiLCJsYXN0IiwiZ2V0UGFnZXJRdHkiLCJmaXRWaWRzIiwiYXBwZW5kQ29udHJvbHMiLCJhcHBlbmRDb250cm9sc0F1dG8iLCJhcHBlbmRQYWdlciIsImFmdGVyIiwic3RhcnQiLCJsb2FkRWxlbWVudHMiLCJzZWxlY3RvciIsImNhbGxiYWNrIiwidG90YWwiLCJmaW5kIiwiY291bnQiLCJvbmUiLCJjb21wbGV0ZSIsInNyYyIsInRyaWdnZXIiLCJzbGljZSIsInNsaWNlQXBwZW5kIiwic2xpY2VQcmVwZW5kIiwiY2xvbmUiLCJhZGRDbGFzcyIsImFwcGVuZCIsInJlbW92ZSIsInNldFNsaWRlUG9zaXRpb24iLCJnZXRWaWV3cG9ydEhlaWdodCIsInJlZHJhd1NsaWRlciIsImNhbGwiLCJpbml0aWFsaXplZCIsIm9uIiwicmVzaXplV2luZG93IiwiaW5pdEF1dG8iLCJpbml0VGlja2VyIiwidXBkYXRlUGFnZXJBY3RpdmUiLCJ1cGRhdGVEaXJlY3Rpb25Db250cm9scyIsImluaXRUb3VjaCIsImtleWRvd24iLCJrZXlQcmVzcyIsImN1cnJlbnRJbmRleCIsImdldE1vdmVCeSIsImFkZCIsIm91dGVySGVpZ2h0IiwibWF4IiwiYXBwbHkiLCJtYXAiLCJnZXQiLCJwYXJzZUZsb2F0IiwibmV3RWxXaWR0aCIsIndyYXBXaWR0aCIsImNlaWwiLCJnZXROdW1iZXJTbGlkZXNTaG93aW5nIiwiY2hpbGRXaWR0aCIsInNsaWRlc1Nob3dpbmciLCJmaXJzdCIsInBhZ2VyUXR5IiwiYnJlYWtQb2ludCIsImNvdW50ZXIiLCJsYXN0Q2hpbGQiLCJsYXN0U2hvd2luZ0luZGV4Iiwic2V0UG9zaXRpb25Qcm9wZXJ0eSIsImxlZnQiLCJvdXRlcldpZHRoIiwidG9wIiwidmFsdWUiLCJ0eXBlIiwiZHVyYXRpb24iLCJwYXJhbXMiLCJhbmltYXRlT2JqIiwicHJvcFZhbHVlIiwiZSIsInRhcmdldCIsImlzIiwib2ZmIiwidXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24iLCJyZXNldFZhbHVlIiwidGlja2VyTG9vcCIsImFuaW1hdGUiLCJwb3B1bGF0ZVBhZ2VyIiwicGFnZXJIdG1sIiwibGlua0NvbnRlbnQiLCJpc0Z1bmN0aW9uIiwicGFnZXJFbCIsImh0bWwiLCJjbGlja1BhZ2VyQmluZCIsIm5leHQiLCJwcmV2IiwiY2xpY2tOZXh0QmluZCIsImNsaWNrUHJldkJpbmQiLCJkaXJlY3Rpb25FbCIsInN0b3AiLCJhdXRvRWwiLCJjbGlja1N0YXJ0QmluZCIsImNsaWNrU3RvcEJpbmQiLCJ1cGRhdGVBdXRvQ29udHJvbHMiLCJ0aXRsZSIsInByZXZlbnREZWZhdWx0IiwiaGFzQ2xhc3MiLCJzdG9wQXV0byIsImdvVG9OZXh0U2xpZGUiLCJnb1RvUHJldlNsaWRlIiwic3RhcnRBdXRvIiwicGFnZXJMaW5rIiwicGFnZXJJbmRleCIsImN1cnJlbnRUYXJnZXQiLCJnb1RvU2xpZGUiLCJzbGlkZUluZGV4IiwibGVuIiwicmVtb3ZlQ2xhc3MiLCJvbGRJbmRleCIsInN0YXRlIiwid2luZG93Rm9jdXNIYW5kbGVyIiwid2luZG93Qmx1ckhhbmRsZXIiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJibHVyIiwiaG92ZXIiLCJhdXRvUGF1c2VkIiwidHJhbnNmb3JtIiwiaWR4IiwicmF0aW8iLCJwcm9wZXJ0eSIsIm5ld1NwZWVkIiwidG90YWxEaW1lbnMiLCJzdGFydFBvc2l0aW9uIiwic3BsaXQiLCJhYnMiLCJyZXN1bWVTcGVlZCIsImFuaW1hdGVQcm9wZXJ0eSIsInJlc2V0Iiwid2luIiwiYm91bmRzIiwiYWN0aXZlRWxlbWVudFRhZyIsImFjdGl2ZUVsZW1lbnQiLCJ0YWdOYW1lIiwiUmVnRXhwIiwiZXhlYyIsInNjcm9sbFRvcCIsInNjcm9sbExlZnQiLCJvZmZzZXQiLCJyaWdodCIsImJvdHRvbSIsImtleUNvZGUiLCJ0b3VjaCIsIngiLCJ5IiwiZW5kIiwib25Ub3VjaFN0YXJ0IiwiYnV0dG9uIiwib3JpZ2luYWxQb3MiLCJvcmlnIiwib3JpZ2luYWxFdmVudCIsInRvdWNoUG9pbnRzIiwiY2hhbmdlZFRvdWNoZXMiLCJQb2ludGVyRXZlbnQiLCJwb2ludGVySWQiLCJwYWdlWCIsInBhZ2VZIiwic2V0UG9pbnRlckNhcHR1cmUiLCJvcmlnaW5hbENsaWNrVGFyZ2V0Iiwib3JpZ2luYWxUYXJnZXQiLCJvcmlnaW5hbENsaWNrQnV0dG9uIiwib3JpZ2luYWxDbGlja0J1dHRvbnMiLCJidXR0b25zIiwib3JpZ2luYWxFdmVudFR5cGUiLCJoYXNNb3ZlIiwib25Ub3VjaE1vdmUiLCJvblRvdWNoRW5kIiwib25Qb2ludGVyQ2FuY2VsIiwicmVsZWFzZVBvaW50ZXJDYXB0dXJlIiwieE1vdmVtZW50IiwieU1vdmVtZW50IiwiY2hhbmdlIiwiZGlzdGFuY2UiLCJ3aW5kb3dXaWR0aE5ldyIsIndpbmRvd0hlaWdodE5ldyIsImFwcGx5QXJpYUhpZGRlbkF0dHJpYnV0ZXMiLCJzdGFydFZpc2libGVJbmRleCIsIm51bWJlck9mU2xpZGVzU2hvd2luZyIsImRpcmVjdGlvbiIsInJlcXVlc3RFbCIsInBlcmZvcm1UcmFuc2l0aW9uIiwibW92ZUJ5IiwiZmlsdGVyIiwiZmFkZU91dCIsImZhZGVJbiIsInByZXZlbnRDb250cm9sVXBkYXRlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiZ2V0Q3VycmVudFNsaWRlIiwiZ2V0Q3VycmVudFNsaWRlRWxlbWVudCIsImdldFNsaWRlRWxlbWVudCIsImdldFNsaWRlQ291bnQiLCJpc1dvcmtpbmciLCJkZXN0cm95U2xpZGVyIiwicmVtb3ZlQXR0ciIsInVud3JhcCIsInJlbW92ZURhdGEiLCJyZWxvYWRTbGlkZXIiLCJqUXVlcnkiLCJjbG9zZU90aGVycyIsImxpc3QiLCJwYW5lbCIsImNsaWNrIiwiYmxvY2siLCJwcm9maWxlIiwic2Nyb2xsSGVpZ2h0IiwiJHRoaXMiLCJjbG9zZXN0IiwiY2xvc2VFdmVyeUl0ZW1Db250YWluZXIiLCJjb250YWluZXIiLCJpdGVtIiwiY29udGVudCIsIm9wZW5JdGVtIiwicmVxSXRlbVdpZHRoIiwic2NyZWVuV2lkdGgiLCJ0aXRsZXNCbG9ja3MiLCJ0aXRsZXNXaWR0aCIsInRleHRDb250YWluZXIiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsImhpZGRlbkNvbnRlbnQiLCJyZXFXaWR0aCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwidGV4dEJsb2NrIiwiaXRlbU9wZW5lZCIsIm15TWFwIiwieW1hcHMiLCJyZWFkeSIsIk1hcCIsImNlbnRlciIsInpvb20iLCJteUNvbGxlY3Rpb24iLCJHZW9PYmplY3RDb2xsZWN0aW9uIiwiZHJhZ2dhYmxlIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0IiwiZm9yRWFjaCIsImNvb3JkIiwiUGxhY2VtYXJrIiwiZ2VvT2JqZWN0cyIsImJlaGF2aW9ycyIsImRpc2FibGUiLCJidXJnZXIiLCJxdWVyeVNlbGVjdG9yIiwibWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInN1Ym1pdCIsImZvcm0iLCJyZXF1ZXN0IiwibmFtZSIsInBob25lIiwiY29tbWVudCIsInRvIiwibW9kYWwiLCJmaWVsZCIsInZhbCIsInRyaW0iLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZG9uZSIsInRleHQiLCJtZXNzYWdlIiwiZmFpbCIsInJlc3BvbnNlSlNPTiIsImFsd2F5cyIsImZhbmN5Ym94Iiwib3BlbiIsImNsb3NlIiwic2VjdGlvbnMiLCJzaWRlTWVudSIsIm1lbnVJdGVtcyIsImlzTW9iaWxlIiwiTW9iaWxlRGV0ZWN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibW9iaWxlIiwiaW5TY3JvbGwiLCJyZXNldEFjdGl2ZUNsYXNzRm9ySXRlbSIsIml0ZW1zIiwiaXRlbUVxIiwiYWN0aXZlQ2xhc3MiLCJzaWJsaW5ncyIsInNlY3Rpb25FcSIsImNvbmNhdCIsInNjcm9sbFZpZXdwb3J0IiwiYWN0aXZlU2VjdGlvbiIsIm5leHRTZWN0aW9uIiwicHJldlNlY3Rpb24iLCJkZWx0YVkiLCJyZXFTZWN0aW9uIiwic3dpcGUiLCJldmVudCIsInZpZXdwb3J0U2Nyb2xsZXIiLCJwbGF5ZXIiLCJwbGF5ZXJTdGFydCIsInZvbHVtZUJ0biIsIm9uUGxheWVyUmVhZHkiLCJkdXJhdGlvblNlYyIsImdldER1cmF0aW9uIiwiY29tcGxldGVkUGVyY2VudCIsImdldEN1cnJlbnRUaW1lIiwicGF1c2VWaWRlbyIsInBsYXlWaWRlbyIsImJhciIsIm5ld0J1dHRvblBvc2l0aW9uUGVyY2VudCIsImxheWVyWCIsIm5ld1BsYXliYWNrUG9zaXRpb25TZWMiLCJzZWVrVG8iLCJ1bk11dGUiLCJtdXRlIiwiYmFyVm9sdW1lIiwibmV3Vm9sdW1lQnV0dG9uUG9zaXRpb25QZXJjZW50IiwiZ2V0Vm9sdW1lIiwic2V0Vm9sdW1lIiwiYWxpYXMiLCJpdGVtVG9TaG93IiwibmR4IiwiY3VySXRlbSJdLCJtYXBwaW5ncyI6ImNBT0EsU0FBQUEsR0FFQSxJQUFBQyxFQUFBLENBR0FDLEtBQUEsYUFDQUMsY0FBQSxHQUNBQyxjQUFBLEVBQ0FDLGtCQUFBLEVBQ0FDLE1BQUEsSUFDQUMsT0FBQSxLQUNBQyxZQUFBLEVBQ0FDLFdBQUEsRUFDQUMsYUFBQSxFQUNBQyxVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsYUFBQSxFQUNBQyxnQkFBQSxFQUNBQyxvQkFBQSxJQUNBQyxPQUFBLEVBQ0FDLFFBQUEsRUFDQUMsY0FBQSxVQUNBQyxZQUFBLEVBQ0FDLFlBQUEsR0FDQUMsYUFBQSxhQUdBQyxjQUFBLEVBQ0FDLGVBQUEsR0FDQUMsZUFBQSxFQUNBQyxzQkFBQSxFQUNBQyxzQkFBQSxFQUdBQyxVQUFBLEVBQ0FDLFlBQUEsRUFHQUMsaUJBQUEsRUFHQUMsT0FBQSxFQUNBQyxVQUFBLE9BQ0FDLG9CQUFBLE1BQ0FDLGNBQUEsS0FDQUMsV0FBQSxLQUNBQyxZQUFBLEtBR0FDLFVBQUEsRUFDQUMsU0FBQSxPQUNBQyxTQUFBLE9BQ0FDLGFBQUEsS0FDQUMsYUFBQSxLQUNBQyxjQUFBLEVBQ0FDLFVBQUEsUUFDQUMsU0FBQSxPQUNBQyxxQkFBQSxFQUNBQyxxQkFBQSxLQUdBQyxNQUFBLEVBQ0FDLE1BQUEsSUFDQUMsV0FBQSxFQUNBQyxjQUFBLE9BQ0FDLGlCQUFBLEVBQ0FDLFdBQUEsRUFDQUMsVUFBQSxFQUNBQyxxQkFBQSxFQUdB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QUFyWCxFQUFBeEUsRUFBQSxXQUFBbUUsU0FBQSxDQUNBckMsT0FBQSxFQUNBTSxVQUFBLElBR0FwQyxFQUFBLDRCQUFBMFUsTUFBQSxTQUFBckksR0FDQUEsRUFBQTBCLGlCQUNBdkosRUFBQTJKLGtCQUdBbk8sRUFBQSwrQkFBQTBVLE1BQUEsU0FBQXJJLEdBQ0FBLEVBQUEwQixpQkFDQXZKLEVBQUEwSixrQkFiQSxHQ01BbE8sRUFBQSw2QkFBQTBVLE1BQUEsU0FBQXJJLEdBQ0FBLEVBQUEwQixpQkFFQSxJQVJBaU8sRUFRQWxILEVBQUE5VSxFQUFBcU0sRUFBQWtDLGVBQ0FqQyxFQUFBd0ksRUFBQW5PLEtBQUEsYUFDQXNWLEdBVkFELEVBVUExUCxFQVRBdE0sRUFBQSxrQkFBQXNULE9BQUEsU0FBQTRJLEVBQUFoSCxHQUNBLE9BQUFsVixFQUFBa1YsR0FBQXZPLEtBQUEscUJBQUFxVixLQVNBRyxFQUFBckgsRUFBQUMsUUFBQSwyQkFFQWtILEVBQUE1UyxTQUFBLGVBQUEwUSxXQUFBcEwsWUFBQSxlQUNBd04sRUFBQTlTLFNBQUEsZ0JBQUEwUSxXQUFBcEwsWUFBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogYnhTbGlkZXIgdjQuMi4xZFxuICogQ29weXJpZ2h0IDIwMTMtMjAxNyBTdGV2ZW4gV2FuZGVyc2tpXG4gKiBXcml0dGVuIHdoaWxlIGRyaW5raW5nIEJlbGdpYW4gYWxlcyBhbmQgbGlzdGVuaW5nIHRvIGphenpcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVClcbiAqL1xuXG47KGZ1bmN0aW9uKCQpIHtcblxuICB2YXIgZGVmYXVsdHMgPSB7XG5cbiAgICAvLyBHRU5FUkFMXG4gICAgbW9kZTogJ2hvcml6b250YWwnLFxuICAgIHNsaWRlU2VsZWN0b3I6ICcnLFxuICAgIGluZmluaXRlTG9vcDogdHJ1ZSxcbiAgICBoaWRlQ29udHJvbE9uRW5kOiBmYWxzZSxcbiAgICBzcGVlZDogNTAwLFxuICAgIGVhc2luZzogbnVsbCxcbiAgICBzbGlkZU1hcmdpbjogMCxcbiAgICBzdGFydFNsaWRlOiAwLFxuICAgIHJhbmRvbVN0YXJ0OiBmYWxzZSxcbiAgICBjYXB0aW9uczogZmFsc2UsXG4gICAgdGlja2VyOiBmYWxzZSxcbiAgICB0aWNrZXJIb3ZlcjogZmFsc2UsXG4gICAgYWRhcHRpdmVIZWlnaHQ6IGZhbHNlLFxuICAgIGFkYXB0aXZlSGVpZ2h0U3BlZWQ6IDUwMCxcbiAgICB2aWRlbzogZmFsc2UsXG4gICAgdXNlQ1NTOiB0cnVlLFxuICAgIHByZWxvYWRJbWFnZXM6ICd2aXNpYmxlJyxcbiAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgIHNsaWRlWkluZGV4OiA1MCxcbiAgICB3cmFwcGVyQ2xhc3M6ICdieC13cmFwcGVyJyxcblxuICAgIC8vIFRPVUNIXG4gICAgdG91Y2hFbmFibGVkOiB0cnVlLFxuICAgIHN3aXBlVGhyZXNob2xkOiA1MCxcbiAgICBvbmVUb09uZVRvdWNoOiB0cnVlLFxuICAgIHByZXZlbnREZWZhdWx0U3dpcGVYOiB0cnVlLFxuICAgIHByZXZlbnREZWZhdWx0U3dpcGVZOiBmYWxzZSxcblxuICAgIC8vIEFDQ0VTU0lCSUxJVFlcbiAgICBhcmlhTGl2ZTogdHJ1ZSxcbiAgICBhcmlhSGlkZGVuOiB0cnVlLFxuXG4gICAgLy8gS0VZQk9BUkRcbiAgICBrZXlib2FyZEVuYWJsZWQ6IGZhbHNlLFxuXG4gICAgLy8gUEFHRVJcbiAgICBwYWdlcjogdHJ1ZSxcbiAgICBwYWdlclR5cGU6ICdmdWxsJyxcbiAgICBwYWdlclNob3J0U2VwYXJhdG9yOiAnIC8gJyxcbiAgICBwYWdlclNlbGVjdG9yOiBudWxsLFxuICAgIGJ1aWxkUGFnZXI6IG51bGwsXG4gICAgcGFnZXJDdXN0b206IG51bGwsXG5cbiAgICAvLyBDT05UUk9MU1xuICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgIG5leHRUZXh0OiAnTmV4dCcsXG4gICAgcHJldlRleHQ6ICdQcmV2JyxcbiAgICBuZXh0U2VsZWN0b3I6IG51bGwsXG4gICAgcHJldlNlbGVjdG9yOiBudWxsLFxuICAgIGF1dG9Db250cm9sczogZmFsc2UsXG4gICAgc3RhcnRUZXh0OiAnU3RhcnQnLFxuICAgIHN0b3BUZXh0OiAnU3RvcCcsXG4gICAgYXV0b0NvbnRyb2xzQ29tYmluZTogZmFsc2UsXG4gICAgYXV0b0NvbnRyb2xzU2VsZWN0b3I6IG51bGwsXG5cbiAgICAvLyBBVVRPXG4gICAgYXV0bzogZmFsc2UsXG4gICAgcGF1c2U6IDQwMDAsXG4gICAgYXV0b1N0YXJ0OiB0cnVlLFxuICAgIGF1dG9EaXJlY3Rpb246ICduZXh0JyxcbiAgICBzdG9wQXV0b09uQ2xpY2s6IGZhbHNlLFxuICAgIGF1dG9Ib3ZlcjogZmFsc2UsXG4gICAgYXV0b0RlbGF5OiAwLFxuICAgIGF1dG9TbGlkZUZvck9uZVBhZ2U6IGZhbHNlLFxuXG4gICAgLy8gQ0FST1VTRUxcbiAgICBtaW5TbGlkZXM6IDEsXG4gICAgbWF4U2xpZGVzOiAxLFxuICAgIG1vdmVTbGlkZXM6IDAsXG4gICAgc2xpZGVXaWR0aDogMCxcbiAgICBzaHJpbmtJdGVtczogZmFsc2UsXG5cbiAgICAvLyBDQUxMQkFDS1NcbiAgICBvblNsaWRlckxvYWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICBvblNsaWRlQmVmb3JlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgb25TbGlkZUFmdGVyOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgb25TbGlkZU5leHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICBvblNsaWRlUHJldjogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxuICAgIG9uU2xpZGVyUmVzaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG5cdG9uQXV0b0NoYW5nZTogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9IC8vY2FsbHMgd2hlbiBhdXRvIHNsaWRlcyBzdGFydHMgYW5kIHN0b3BzXG4gIH07XG5cbiAgJC5mbi5ieFNsaWRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gc3VwcG9ydCBtdWx0aXBsZSBlbGVtZW50c1xuICAgIGlmICh0aGlzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5ieFNsaWRlcihvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIGEgbmFtZXNwYWNlIHRvIGJlIHVzZWQgdGhyb3VnaG91dCB0aGUgcGx1Z2luXG4gICAgdmFyIHNsaWRlciA9IHt9LFxuICAgIC8vIHNldCBhIHJlZmVyZW5jZSB0byBvdXIgc2xpZGVyIGVsZW1lbnRcbiAgICBlbCA9IHRoaXMsXG4gICAgLy8gZ2V0IHRoZSBvcmlnaW5hbCB3aW5kb3cgZGltZW5zICh0aGFua3MgYSBsb3QgSUUpXG4gICAgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKSxcbiAgICB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cbiAgICAvLyBSZXR1cm4gaWYgc2xpZGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAoJChlbCkuZGF0YSgnYnhTbGlkZXInKSkgeyByZXR1cm47IH1cblxuICAgIC8qKlxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICogPSBQUklWQVRFIEZVTkNUSU9OU1xuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBuYW1lc3BhY2Ugc2V0dGluZ3MgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHBsdWdpblxuICAgICAqL1xuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZXR1cm4gaWYgc2xpZGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICAgIGlmICgkKGVsKS5kYXRhKCdieFNsaWRlcicpKSB7IHJldHVybjsgfVxuICAgICAgLy8gbWVyZ2UgdXNlci1zdXBwbGllZCBvcHRpb25zIHdpdGggdGhlIGRlZmF1bHRzXG4gICAgICBzbGlkZXIuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgLy8gcGFyc2Ugc2xpZGVXaWR0aCBzZXR0aW5nXG4gICAgICBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA9IHBhcnNlSW50KHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKTtcbiAgICAgIC8vIHN0b3JlIHRoZSBvcmlnaW5hbCBjaGlsZHJlblxuICAgICAgc2xpZGVyLmNoaWxkcmVuID0gZWwuY2hpbGRyZW4oc2xpZGVyLnNldHRpbmdzLnNsaWRlU2VsZWN0b3IpO1xuICAgICAgLy8gY2hlY2sgaWYgYWN0dWFsIG51bWJlciBvZiBzbGlkZXMgaXMgbGVzcyB0aGFuIG1pblNsaWRlcyAvIG1heFNsaWRlc1xuICAgICAgaWYgKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggPCBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzKSB7IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyB9XG4gICAgICBpZiAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCA8IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMpIHsgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IH1cbiAgICAgIC8vIGlmIHJhbmRvbSBzdGFydCwgc2V0IHRoZSBzdGFydFNsaWRlIHNldHRpbmcgdG8gcmFuZG9tIG51bWJlclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5yYW5kb21TdGFydCkgeyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpOyB9XG4gICAgICAvLyBzdG9yZSBhY3RpdmUgc2xpZGUgaW5mb3JtYXRpb25cbiAgICAgIHNsaWRlci5hY3RpdmUgPSB7IGluZGV4OiBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSB9O1xuICAgICAgLy8gc3RvcmUgaWYgdGhlIHNsaWRlciBpcyBpbiBjYXJvdXNlbCBtb2RlIChkaXNwbGF5aW5nIC8gbW92aW5nIG11bHRpcGxlIHNsaWRlcylcbiAgICAgIHNsaWRlci5jYXJvdXNlbCA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgPiAxIHx8IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPiAxO1xuICAgICAgLy8gaWYgY2Fyb3VzZWwsIGZvcmNlIHByZWxvYWRJbWFnZXMgPSAnYWxsJ1xuICAgICAgaWYgKHNsaWRlci5jYXJvdXNlbCkgeyBzbGlkZXIuc2V0dGluZ3MucHJlbG9hZEltYWdlcyA9ICdhbGwnOyB9XG4gICAgICAvLyBjYWxjdWxhdGUgdGhlIG1pbiAvIG1heCB3aWR0aCB0aHJlc2hvbGRzIGJhc2VkIG9uIG1pbiAvIG1heCBudW1iZXIgb2Ygc2xpZGVzXG4gICAgICAvLyB1c2VkIHRvIHNldHVwIGFuZCB1cGRhdGUgY2Fyb3VzZWwgc2xpZGVzIGRpbWVuc2lvbnNcbiAgICAgIHNsaWRlci5taW5UaHJlc2hvbGQgPSAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKSArICgoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpICogc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcbiAgICAgIHNsaWRlci5tYXhUaHJlc2hvbGQgPSAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKSArICgoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDEpICogc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcbiAgICAgIC8vIHN0b3JlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBzbGlkZXIgKGlmIGN1cnJlbnRseSBhbmltYXRpbmcsIHdvcmtpbmcgaXMgdHJ1ZSlcbiAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XG4gICAgICAvLyBpbml0aWFsaXplIHRoZSBjb250cm9scyBvYmplY3RcbiAgICAgIHNsaWRlci5jb250cm9scyA9IHt9O1xuICAgICAgLy8gaW5pdGlhbGl6ZSBhbiBhdXRvIGludGVydmFsXG4gICAgICBzbGlkZXIuaW50ZXJ2YWwgPSBudWxsO1xuICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZSBmb3IgdHJhbnNpdGlvbnNcbiAgICAgIHNsaWRlci5hbmltUHJvcCA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnID8gJ3RvcCcgOiAnbGVmdCc7XG4gICAgICAvLyBkZXRlcm1pbmUgaWYgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIGNhbiBiZSB1c2VkXG4gICAgICBzbGlkZXIudXNpbmdDU1MgPSBzbGlkZXIuc2V0dGluZ3MudXNlQ1NTICYmIHNsaWRlci5zZXR0aW5ncy5tb2RlICE9PSAnZmFkZScgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjcmVhdGUgb3VyIHRlc3QgZGl2IGVsZW1lbnRcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAvLyBjc3MgdHJhbnNpdGlvbiBwcm9wZXJ0aWVzXG4gICAgICAgIHByb3BzID0gWydXZWJraXRQZXJzcGVjdGl2ZScsICdNb3pQZXJzcGVjdGl2ZScsICdPUGVyc3BlY3RpdmUnLCAnbXNQZXJzcGVjdGl2ZSddO1xuICAgICAgICAvLyB0ZXN0IGZvciBlYWNoIHByb3BlcnR5XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZGl2LnN0eWxlW3Byb3BzW2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzbGlkZXIuY3NzUHJlZml4ID0gcHJvcHNbaV0ucmVwbGFjZSgnUGVyc3BlY3RpdmUnLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHNsaWRlci5hbmltUHJvcCA9ICctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zZm9ybSc7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSgpKTtcbiAgICAgIC8vIGlmIHZlcnRpY2FsIG1vZGUgYWx3YXlzIG1ha2UgbWF4U2xpZGVzIGFuZCBtaW5TbGlkZXMgZXF1YWxcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsgfVxuICAgICAgLy8gc2F2ZSBvcmlnaW5hbCBzdHlsZSBkYXRhXG4gICAgICBlbC5kYXRhKCdvcmlnU3R5bGUnLCBlbC5hdHRyKCdzdHlsZScpKTtcbiAgICAgIGVsLmNoaWxkcmVuKHNsaWRlci5zZXR0aW5ncy5zbGlkZVNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScsICQodGhpcykuYXR0cignc3R5bGUnKSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gcGVyZm9ybSBhbGwgRE9NIC8gQ1NTIG1vZGlmaWNhdGlvbnNcbiAgICAgIHNldHVwKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFsbCBET00gYW5kIENTUyBtb2RpZmljYXRpb25zXG4gICAgICovXG4gICAgdmFyIHNldHVwID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcHJlbG9hZFNlbGVjdG9yID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlKTsgLy8gc2V0IHRoZSBkZWZhdWx0IHByZWxvYWQgc2VsZWN0b3IgKHZpc2libGUpXG5cbiAgICAgIC8vIHdyYXAgZWwgaW4gYSB3cmFwcGVyXG4gICAgICBlbC53cmFwKCc8ZGl2IGNsYXNzPVwiJyArIHNsaWRlci5zZXR0aW5ncy53cmFwcGVyQ2xhc3MgKyAnXCI+PGRpdiBjbGFzcz1cImJ4LXZpZXdwb3J0XCI+PC9kaXY+PC9kaXY+Jyk7XG4gICAgICAvLyBzdG9yZSBhIG5hbWVzcGFjZSByZWZlcmVuY2UgdG8gLmJ4LXZpZXdwb3J0XG4gICAgICBzbGlkZXIudmlld3BvcnQgPSBlbC5wYXJlbnQoKTtcblxuICAgICAgLy8gYWRkIGFyaWEtbGl2ZSBpZiB0aGUgc2V0dGluZyBpcyBlbmFibGVkIGFuZCB0aWNrZXIgbW9kZSBpcyBkaXNhYmxlZFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hcmlhTGl2ZSAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xuICAgICAgICBzbGlkZXIudmlld3BvcnQuYXR0cignYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgICAgfVxuICAgICAgLy8gYWRkIGEgbG9hZGluZyBkaXYgdG8gZGlzcGxheSB3aGlsZSBpbWFnZXMgYXJlIGxvYWRpbmdcbiAgICAgIHNsaWRlci5sb2FkZXIgPSAkKCc8ZGl2IGNsYXNzPVwiYngtbG9hZGluZ1wiIC8+Jyk7XG4gICAgICBzbGlkZXIudmlld3BvcnQucHJlcGVuZChzbGlkZXIubG9hZGVyKTtcbiAgICAgIC8vIHNldCBlbCB0byBhIG1hc3NpdmUgd2lkdGgsIHRvIGhvbGQgYW55IG5lZWRlZCBzbGlkZXNcbiAgICAgIC8vIGFsc28gc3RyaXAgYW55IG1hcmdpbiBhbmQgcGFkZGluZyBmcm9tIGVsXG4gICAgICBlbC5jc3Moe1xuICAgICAgICB3aWR0aDogc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoICogMTAwMCArIDIxNSkgKyAnJScgOiAnYXV0bycsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICB9KTtcbiAgICAgIC8vIGlmIHVzaW5nIENTUywgYWRkIHRoZSBlYXNpbmcgcHJvcGVydHlcbiAgICAgIGlmIChzbGlkZXIudXNpbmdDU1MgJiYgc2xpZGVyLnNldHRpbmdzLmVhc2luZykge1xuICAgICAgICBlbC5jc3MoJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nLCBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nKTtcbiAgICAgIC8vIGlmIG5vdCB1c2luZyBDU1MgYW5kIG5vIGVhc2luZyB2YWx1ZSB3YXMgc3VwcGxpZWQsIHVzZSB0aGUgZGVmYXVsdCBKUyBhbmltYXRpb24gZWFzaW5nIChzd2luZylcbiAgICAgIH0gZWxzZSBpZiAoIXNsaWRlci5zZXR0aW5ncy5lYXNpbmcpIHtcbiAgICAgICAgc2xpZGVyLnNldHRpbmdzLmVhc2luZyA9ICdzd2luZyc7XG4gICAgICB9XG4gICAgICAvLyBtYWtlIG1vZGlmaWNhdGlvbnMgdG8gdGhlIHZpZXdwb3J0ICguYngtdmlld3BvcnQpXG4gICAgICBzbGlkZXIudmlld3BvcnQuY3NzKHtcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgICAgfSk7XG4gICAgICBzbGlkZXIudmlld3BvcnQucGFyZW50KCkuY3NzKHtcbiAgICAgICAgbWF4V2lkdGg6IGdldFZpZXdwb3J0TWF4V2lkdGgoKVxuICAgICAgfSk7XG4gICAgICAvLyBhcHBseSBjc3MgdG8gYWxsIHNsaWRlciBjaGlsZHJlblxuICAgICAgc2xpZGVyLmNoaWxkcmVuLmNzcyh7XG4gICAgICAgIC8vIHRoZSBmbG9hdCBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCB3b3JkIGluIGNvbXByZXNzb3JzIGxpa2UgWVVJIGNvbXByZXNzb3IgYW5kIG5lZWQgdG8gYmUgcXVvdGVkICM0OFxuICAgICAgICAnZmxvYXQnOiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJ2xlZnQnIDogJ25vbmUnLFxuICAgICAgICBsaXN0U3R5bGU6ICdub25lJyxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgIH0pO1xuICAgICAgLy8gYXBwbHkgdGhlIGNhbGN1bGF0ZWQgd2lkdGggYWZ0ZXIgdGhlIGZsb2F0IGlzIGFwcGxpZWQgdG8gcHJldmVudCBzY3JvbGxiYXIgaW50ZXJmZXJlbmNlXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uY3NzKCd3aWR0aCcsIGdldFNsaWRlV2lkdGgoKSk7XG4gICAgICAvLyBpZiBzbGlkZU1hcmdpbiBpcyBzdXBwbGllZCwgYWRkIHRoZSBjc3NcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHsgc2xpZGVyLmNoaWxkcmVuLmNzcygnbWFyZ2luUmlnaHQnLCBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pOyB9XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcgJiYgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkgeyBzbGlkZXIuY2hpbGRyZW4uY3NzKCdtYXJnaW5Cb3R0b20nLCBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pOyB9XG4gICAgICAvLyBpZiBcImZhZGVcIiBtb2RlLCBhZGQgcG9zaXRpb25pbmcgYW5kIHotaW5kZXggQ1NTXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdmYWRlJykge1xuICAgICAgICBzbGlkZXIuY2hpbGRyZW4uY3NzKHtcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICB6SW5kZXg6IDAsXG4gICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBwcmVwYXJlIHRoZSB6LWluZGV4IG9uIHRoZSBzaG93aW5nIGVsZW1lbnRcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlKS5jc3Moe3pJbmRleDogc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4LCBkaXNwbGF5OiAnYmxvY2snfSk7XG4gICAgICB9XG4gICAgICAvLyBjcmVhdGUgYW4gZWxlbWVudCB0byBjb250YWluIGFsbCBzbGlkZXIgY29udHJvbHMgKHBhZ2VyLCBzdGFydCAvIHN0b3AsIGV0YylcbiAgICAgIHNsaWRlci5jb250cm9scy5lbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9sc1wiIC8+Jyk7XG4gICAgICAvLyBpZiBjYXB0aW9ucyBhcmUgcmVxdWVzdGVkLCBhZGQgdGhlbVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jYXB0aW9ucykgeyBhcHBlbmRDYXB0aW9ucygpOyB9XG4gICAgICAvLyBjaGVjayBpZiBzdGFydFNsaWRlIGlzIGxhc3Qgc2xpZGVcbiAgICAgIHNsaWRlci5hY3RpdmUubGFzdCA9IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlID09PSBnZXRQYWdlclF0eSgpIC0gMTtcbiAgICAgIC8vIGlmIHZpZGVvIGlzIHRydWUsIHNldCB1cCB0aGUgZml0VmlkcyBwbHVnaW5cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MudmlkZW8pIHsgZWwuZml0VmlkcygpOyB9XG5cdCAgLy9wcmVsb2FkSW1hZ2VzXG5cdCAgaWYgKHNsaWRlci5zZXR0aW5ncy5wcmVsb2FkSW1hZ2VzID09PSAnbm9uZScpIHsgXG5cdFx0ICBwcmVsb2FkU2VsZWN0b3IgPSBudWxsOyBcblx0ICB9XG4gICAgICBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MucHJlbG9hZEltYWdlcyA9PT0gJ2FsbCcgfHwgc2xpZGVyLnNldHRpbmdzLnRpY2tlcikgeyBcblx0XHQgIHByZWxvYWRTZWxlY3RvciA9IHNsaWRlci5jaGlsZHJlbjsgXG5cdCAgfVxuICAgICAgLy8gb25seSBjaGVjayBmb3IgY29udHJvbCBhZGRpdGlvbiBpZiBub3QgaW4gXCJ0aWNrZXJcIiBtb2RlXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHtcbiAgICAgICAgLy8gaWYgY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgeyBhcHBlbmRDb250cm9scygpOyB9XG4gICAgICAgIC8vIGlmIGF1dG8gaXMgdHJ1ZSwgYW5kIGF1dG8gY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMpIHsgYXBwZW5kQ29udHJvbHNBdXRvKCk7IH1cbiAgICAgICAgLy8gaWYgcGFnZXIgaXMgcmVxdWVzdGVkLCBhZGQgaXRcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyBhcHBlbmRQYWdlcigpOyB9XG4gICAgICAgIC8vIGlmIGFueSBjb250cm9sIG9wdGlvbiBpcyByZXF1ZXN0ZWQsIGFkZCB0aGUgY29udHJvbHMgd3JhcHBlclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzIHx8IHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMgfHwgc2xpZGVyLnNldHRpbmdzLnBhZ2VyKSB7IHNsaWRlci52aWV3cG9ydC5hZnRlcihzbGlkZXIuY29udHJvbHMuZWwpOyB9XG4gICAgICAvLyBpZiB0aWNrZXIgbW9kZSwgZG8gbm90IGFsbG93IGEgcGFnZXJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlci5zZXR0aW5ncy5wYWdlciA9IGZhbHNlO1xuICAgICAgfVxuXHQgIGlmIChwcmVsb2FkU2VsZWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgc3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWRFbGVtZW50cyhwcmVsb2FkU2VsZWN0b3IsIHN0YXJ0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGxvYWRFbGVtZW50cyA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRvdGFsID0gc2VsZWN0b3IuZmluZCgnaW1nOm5vdChbc3JjPVwiXCJdKSwgaWZyYW1lJykubGVuZ3RoLFxuICAgICAgY291bnQgPSAwO1xuICAgICAgaWYgKHRvdGFsID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlbGVjdG9yLmZpbmQoJ2ltZzpub3QoW3NyYz1cIlwiXSksIGlmcmFtZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykub25lKCdsb2FkIGVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrY291bnQgPT09IHRvdGFsKSB7IGNhbGxiYWNrKCk7IH1cbiAgICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb21wbGV0ZSB8fCB0aGlzLnNyYyA9PSAnJykgeyAkKHRoaXMpLnRyaWdnZXIoJ2xvYWQnKTsgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdGFydCB0aGUgc2xpZGVyXG4gICAgICovXG4gICAgdmFyIHN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBpZiBpbmZpbml0ZSBsb29wLCBwcmVwYXJlIGFkZGl0aW9uYWwgc2xpZGVzXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ2ZhZGUnICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7XG4gICAgICAgIHZhciBzbGljZSAgICA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnID8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA6IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMsXG4gICAgICAgIHNsaWNlQXBwZW5kICA9IHNsaWRlci5jaGlsZHJlbi5zbGljZSgwLCBzbGljZSkuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ2J4LWNsb25lJyksXG4gICAgICAgIHNsaWNlUHJlcGVuZCA9IHNsaWRlci5jaGlsZHJlbi5zbGljZSgtc2xpY2UpLmNsb25lKHRydWUpLmFkZENsYXNzKCdieC1jbG9uZScpO1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4pIHtcbiAgICAgICAgICBzbGljZUFwcGVuZC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICAgICAgICAgIHNsaWNlUHJlcGVuZC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsLmFwcGVuZChzbGljZUFwcGVuZCkucHJlcGVuZChzbGljZVByZXBlbmQpO1xuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIHRoZSBsb2FkaW5nIERPTSBlbGVtZW50XG4gICAgICBzbGlkZXIubG9hZGVyLnJlbW92ZSgpO1xuICAgICAgLy8gc2V0IHRoZSBsZWZ0IC8gdG9wIHBvc2l0aW9uIG9mIFwiZWxcIlxuICAgICAgc2V0U2xpZGVQb3NpdGlvbigpO1xuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGFsd2F5cyB1c2UgYWRhcHRpdmVIZWlnaHQgdG8gcHJldmVudCBvZGQgYmVoYXZpb3JcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgPSB0cnVlOyB9XG4gICAgICAvLyBzZXQgdGhlIHZpZXdwb3J0IGhlaWdodFxuICAgICAgc2xpZGVyLnZpZXdwb3J0LmhlaWdodChnZXRWaWV3cG9ydEhlaWdodCgpKTtcbiAgICAgIC8vIG1ha2Ugc3VyZSBldmVyeXRoaW5nIGlzIHBvc2l0aW9uZWQganVzdCByaWdodCAoc2FtZSBhcyBhIHdpbmRvdyByZXNpemUpXG4gICAgICBlbC5yZWRyYXdTbGlkZXIoKTtcbiAgICAgIC8vIG9uU2xpZGVyTG9hZCBjYWxsYmFja1xuICAgICAgc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVyTG9hZC5jYWxsKGVsLCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgIC8vIHNsaWRlciBoYXMgYmVlbiBmdWxseSBpbml0aWFsaXplZFxuICAgICAgc2xpZGVyLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIC8vIGFkZCB0aGUgcmVzaXplIGNhbGwgdG8gdGhlIHdpbmRvd1xuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5yZXNwb25zaXZlKSB7ICQod2luZG93KS5vbigncmVzaXplJywgcmVzaXplV2luZG93KTsgfVxuICAgICAgLy8gaWYgYXV0byBpcyB0cnVlIGFuZCBoYXMgbW9yZSB0aGFuIDEgcGFnZSwgc3RhcnQgdGhlIHNob3dcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3MuYXV0b1N0YXJ0ICYmIChnZXRQYWdlclF0eSgpID4gMSB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b1NsaWRlRm9yT25lUGFnZSkpIHsgaW5pdEF1dG8oKTsgfVxuICAgICAgLy8gaWYgdGlja2VyIGlzIHRydWUsIHN0YXJ0IHRoZSB0aWNrZXJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7IGluaXRUaWNrZXIoKTsgfVxuICAgICAgLy8gaWYgcGFnZXIgaXMgcmVxdWVzdGVkLCBtYWtlIHRoZSBhcHByb3ByaWF0ZSBwYWdlciBsaW5rIGFjdGl2ZVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSk7IH1cbiAgICAgIC8vIGNoZWNrIGZvciBhbnkgdXBkYXRlcyB0byB0aGUgY29udHJvbHMgKGxpa2UgaGlkZUNvbnRyb2xPbkVuZCB1cGRhdGVzKVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgeyB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpOyB9XG4gICAgICAvLyBpZiB0b3VjaEVuYWJsZWQgaXMgdHJ1ZSwgc2V0dXAgdGhlIHRvdWNoIGV2ZW50c1xuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50b3VjaEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgaW5pdFRvdWNoKCk7IH1cbiAgICAgIC8vIGlmIGtleWJvYXJkRW5hYmxlZCBpcyB0cnVlLCBzZXR1cCB0aGUga2V5Ym9hcmQgZXZlbnRzXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmtleWJvYXJkRW5hYmxlZCAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xuICAgICAgICAkKGRvY3VtZW50KS5rZXlkb3duKGtleVByZXNzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCBoZWlnaHQgb2YgdGhlIHZpZXdwb3J0LCB1c2VkIHRvIGRldGVybWluZSBlaXRoZXIgYWRhcHRpdmVIZWlnaHQgb3IgdGhlIG1heEhlaWdodCB2YWx1ZVxuICAgICAqL1xuICAgIHZhciBnZXRWaWV3cG9ydEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGhlaWdodCA9IDA7XG4gICAgICAvLyBmaXJzdCBkZXRlcm1pbmUgd2hpY2ggY2hpbGRyZW4gKHNsaWRlcykgc2hvdWxkIGJlIHVzZWQgaW4gb3VyIGhlaWdodCBjYWxjdWxhdGlvblxuICAgICAgdmFyIGNoaWxkcmVuID0gJCgpO1xuICAgICAgLy8gaWYgbW9kZSBpcyBub3QgXCJ2ZXJ0aWNhbFwiIGFuZCBhZGFwdGl2ZUhlaWdodCBpcyBmYWxzZSwgaW5jbHVkZSBhbGwgY2hpbGRyZW5cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ3ZlcnRpY2FsJyAmJiAhc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0KSB7XG4gICAgICAgIGNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgbm90IGNhcm91c2VsLCByZXR1cm4gdGhlIHNpbmdsZSBhY3RpdmUgY2hpbGRcbiAgICAgICAgaWYgKCFzbGlkZXIuY2Fyb3VzZWwpIHtcbiAgICAgICAgICBjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgICAgLy8gaWYgY2Fyb3VzZWwsIHJldHVybiBhIHNsaWNlIG9mIGNoaWxkcmVuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZ2V0IHRoZSBpbmRpdmlkdWFsIHNsaWRlIGluZGV4XG4gICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID09PSAxID8gc2xpZGVyLmFjdGl2ZS5pbmRleCA6IHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKTtcbiAgICAgICAgICAvLyBhZGQgdGhlIGN1cnJlbnQgc2xpZGUgdG8gdGhlIGNoaWxkcmVuXG4gICAgICAgICAgY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4KTtcbiAgICAgICAgICAvLyBjeWNsZSB0aHJvdWdoIHRoZSByZW1haW5pbmcgXCJzaG93aW5nXCIgc2xpZGVzXG4gICAgICAgICAgZm9yIChpID0gMTsgaSA8PSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAvLyBpZiBsb29wZWQgYmFjayB0byB0aGUgc3RhcnRcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggKyBpID49IHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5hZGQoc2xpZGVyLmNoaWxkcmVuLmVxKGkgLSAxKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4ICsgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgc3VtIG9mIHRoZSBoZWlnaHRzIG9mIHRoZSBjaGlsZHJlblxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgIGNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWRkIHVzZXItc3VwcGxpZWQgbWFyZ2luc1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkge1xuICAgICAgICAgIGhlaWdodCArPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpO1xuICAgICAgICB9XG4gICAgICAvLyBpZiBub3QgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgbWF4IGhlaWdodCBvZiB0aGUgY2hpbGRyZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlaWdodCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGNoaWxkcmVuLm1hcChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJCh0aGlzKS5vdXRlckhlaWdodChmYWxzZSk7XG4gICAgICAgIH0pLmdldCgpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5jc3MoJ2JveC1zaXppbmcnKSA9PT0gJ2JvcmRlci1ib3gnKSB7XG4gICAgICAgIGhlaWdodCArPSBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLWJvdHRvbScpKSArXG4gICAgICAgICAgICAgIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm9yZGVyLXRvcC13aWR0aCcpKSArIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm9yZGVyLWJvdHRvbS13aWR0aCcpKTtcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm94LXNpemluZycpID09PSAncGFkZGluZy1ib3gnKSB7XG4gICAgICAgIGhlaWdodCArPSBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLWJvdHRvbScpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSB1c2VkIGZvciB0aGUgb3V0ZXIgd3JhcHBlciAvIHZpZXdwb3J0XG4gICAgICovXG4gICAgdmFyIGdldFZpZXdwb3J0TWF4V2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB3aWR0aCA9ICcxMDAlJztcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApIHtcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICB3aWR0aCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpZHRoID0gc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB3aWR0aDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSBhcHBsaWVkIHRvIGVhY2ggc2xpZGVcbiAgICAgKi9cbiAgICB2YXIgZ2V0U2xpZGVXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5ld0VsV2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCwgLy8gc3RhcnQgd2l0aCBhbnkgdXNlci1zdXBwbGllZCBzbGlkZSB3aWR0aFxuICAgICAgd3JhcFdpZHRoICAgICAgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKTsgICAgLy8gZ2V0IHRoZSBjdXJyZW50IHZpZXdwb3J0IHdpZHRoXG4gICAgICAvLyBpZiBzbGlkZSB3aWR0aCB3YXMgbm90IHN1cHBsaWVkLCBvciBpcyBsYXJnZXIgdGhhbiB0aGUgdmlld3BvcnQgdXNlIHRoZSB2aWV3cG9ydCB3aWR0aFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID09PSAwIHx8XG4gICAgICAgIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IHdyYXBXaWR0aCAmJiAhc2xpZGVyLmNhcm91c2VsKSB8fFxuICAgICAgICBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICBuZXdFbFdpZHRoID0gd3JhcFdpZHRoO1xuICAgICAgLy8gaWYgY2Fyb3VzZWwsIHVzZSB0aGUgdGhyZXNob2xkcyB0byBkZXRlcm1pbmUgdGhlIHdpZHRoXG4gICAgICB9IGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPiAxICYmIHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgaWYgKHdyYXBXaWR0aCA+IHNsaWRlci5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3RWxXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmICh3cmFwV2lkdGggPCBzbGlkZXIubWluVGhyZXNob2xkKSB7XG4gICAgICAgICAgbmV3RWxXaWR0aCA9ICh3cmFwV2lkdGggLSAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luICogKHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgLSAxKSkpIC8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3Muc2hyaW5rSXRlbXMpIHtcbiAgICAgICAgICBuZXdFbFdpZHRoID0gTWF0aC5mbG9vcigod3JhcFdpZHRoICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKSAvIChNYXRoLmNlaWwoKHdyYXBXaWR0aCArIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikgLyAobmV3RWxXaWR0aCArIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikpKSAtIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdFbFdpZHRoO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2xpZGVzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydCAoaW5jbHVkZXMgcGFydGlhbGx5IHZpc2libGUgc2xpZGVzKVxuICAgICAqL1xuICAgIHZhciBnZXROdW1iZXJTbGlkZXNTaG93aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2xpZGVzU2hvd2luZyA9IDEsXG4gICAgICBjaGlsZFdpZHRoID0gbnVsbDtcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID4gMCkge1xuICAgICAgICAvLyBpZiB2aWV3cG9ydCBpcyBzbWFsbGVyIHRoYW4gbWluVGhyZXNob2xkLCByZXR1cm4gbWluU2xpZGVzXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQud2lkdGgoKSA8IHNsaWRlci5taW5UaHJlc2hvbGQpIHtcbiAgICAgICAgICBzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgLy8gaWYgdmlld3BvcnQgaXMgbGFyZ2VyIHRoYW4gbWF4VGhyZXNob2xkLCByZXR1cm4gbWF4U2xpZGVzXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgPiBzbGlkZXIubWF4VGhyZXNob2xkKSB7XG4gICAgICAgICAgc2xpZGVzU2hvd2luZyA9IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXM7XG4gICAgICAgIC8vIGlmIHZpZXdwb3J0IGlzIGJldHdlZW4gbWluIC8gbWF4IHRocmVzaG9sZHMsIGRpdmlkZSB2aWV3cG9ydCB3aWR0aCBieSBmaXJzdCBjaGlsZCB3aWR0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkV2lkdGggPSBzbGlkZXIuY2hpbGRyZW4uZmlyc3QoKS53aWR0aCgpICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luO1xuICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBNYXRoLmZsb29yKChzbGlkZXIudmlld3BvcnQud2lkdGgoKSArXG4gICAgICAgICAgICBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pIC8gY2hpbGRXaWR0aCkgfHwgMTtcbiAgICAgICAgfVxuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIHNsaWRlcyBzaG93aW5nIHdpbGwgYWx3YXlzIGJlIG1pblNsaWRlc1xuICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICBzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGlkZXNTaG93aW5nO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgcGFnZXMgKG9uZSBmdWxsIHZpZXdwb3J0IG9mIHNsaWRlcyBpcyBvbmUgXCJwYWdlXCIpXG4gICAgICovXG4gICAgdmFyIGdldFBhZ2VyUXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFnZXJRdHkgPSAwLFxuICAgICAgYnJlYWtQb2ludCA9IDAsXG4gICAgICBjb3VudGVyID0gMDtcbiAgICAgIC8vIGlmIG1vdmVTbGlkZXMgaXMgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPiAwKSB7XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XG4gICAgICAgICAgcGFnZXJRdHkgPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAvIGdldE1vdmVCeSgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB3aGVuIGJyZWFrcG9pbnQgZ29lcyBhYm92ZSBjaGlsZHJlbiBsZW5ndGgsIGNvdW50ZXIgaXMgdGhlIG51bWJlciBvZiBwYWdlc1xuICAgICAgICAgIHdoaWxlIChicmVha1BvaW50IDwgc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgKytwYWdlclF0eTtcbiAgICAgICAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xuICAgICAgICAgICAgY291bnRlciArPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA8PSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCkgPyBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA6IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcbiAgICAgICAgICB9XG5cdFx0ICByZXR1cm4gY291bnRlcjtcbiAgICAgICAgfVxuICAgICAgLy8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKSBkaXZpZGUgY2hpbGRyZW4gbGVuZ3RoIGJ5IHNpZGVzIHNob3dpbmcsIHRoZW4gcm91bmQgdXBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhZ2VyUXR5ID0gTWF0aC5jZWlsKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLyBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhZ2VyUXR5O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgaW5kaXZpZHVhbCBzbGlkZXMgYnkgd2hpY2ggdG8gc2hpZnQgdGhlIHNsaWRlclxuICAgICAqL1xuICAgIHZhciBnZXRNb3ZlQnkgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGlmIG1vdmVTbGlkZXMgd2FzIHNldCBieSB0aGUgdXNlciBhbmQgbW92ZVNsaWRlcyBpcyBsZXNzIHRoYW4gbnVtYmVyIG9mIHNsaWRlcyBzaG93aW5nXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPiAwICYmIHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSkge1xuICAgICAgICByZXR1cm4gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXM7XG4gICAgICB9XG4gICAgICAvLyBpZiBtb3ZlU2xpZGVzIGlzIDAgKGF1dG8pXG4gICAgICByZXR1cm4gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzbGlkZXIncyAoZWwpIGxlZnQgb3IgdG9wIHBvc2l0aW9uXG4gICAgICovXG4gICAgdmFyIHNldFNsaWRlUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwb3NpdGlvbiwgbGFzdENoaWxkLCBsYXN0U2hvd2luZ0luZGV4O1xuICAgICAgLy8gaWYgbGFzdCBzbGlkZSwgbm90IGluZmluaXRlIGxvb3AsIGFuZCBudW1iZXIgb2YgY2hpbGRyZW4gaXMgbGFyZ2VyIHRoYW4gc3BlY2lmaWVkIG1heFNsaWRlc1xuICAgICAgaWYgKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggPiBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICYmIHNsaWRlci5hY3RpdmUubGFzdCAmJiAhc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjaGlsZCdzIHBvc2l0aW9uXG4gICAgICAgICAgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmxhc3QoKTtcbiAgICAgICAgICBwb3NpdGlvbiA9IGxhc3RDaGlsZC5wb3NpdGlvbigpO1xuICAgICAgICAgIC8vIHNldCB0aGUgbGVmdCBwb3NpdGlvblxuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoLShwb3NpdGlvbi5sZWZ0IC0gKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIC0gbGFzdENoaWxkLm91dGVyV2lkdGgoKSkpLCAncmVzZXQnLCAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBzaG93aW5nIGluZGV4J3MgcG9zaXRpb25cbiAgICAgICAgICBsYXN0U2hvd2luZ0luZGV4ID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEobGFzdFNob3dpbmdJbmRleCkucG9zaXRpb24oKTtcbiAgICAgICAgICAvLyBzZXQgdGhlIHRvcCBwb3NpdGlvblxuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7XG4gICAgICAgIH1cbiAgICAgIC8vIGlmIG5vdCBsYXN0IHNsaWRlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBnZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBzaG93aW5nIHNsaWRlXG4gICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKSkucG9zaXRpb24oKTtcbiAgICAgICAgLy8gY2hlY2sgZm9yIGxhc3Qgc2xpZGVcbiAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IGdldFBhZ2VyUXR5KCkgLSAxKSB7IHNsaWRlci5hY3RpdmUubGFzdCA9IHRydWU7IH1cbiAgICAgICAgLy8gc2V0IHRoZSByZXNwZWN0aXZlIHBvc2l0aW9uXG4gICAgICAgIGlmIChwb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHsgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24ubGVmdCwgJ3Jlc2V0JywgMCk7IH1cbiAgICAgICAgICBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi50b3AsICdyZXNldCcsIDApOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZWwncyBhbmltYXRpbmcgcHJvcGVydHkgcG9zaXRpb24gKHdoaWNoIGluIHR1cm4gd2lsbCBzb21ldGltZXMgYW5pbWF0ZSBlbCkuXG4gICAgICogSWYgdXNpbmcgQ1NTLCBzZXRzIHRoZSB0cmFuc2Zvcm0gcHJvcGVydHkuIElmIG5vdCB1c2luZyBDU1MsIHNldHMgdGhlIHRvcCAvIGxlZnQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgKGludClcbiAgICAgKiAgLSB0aGUgYW5pbWF0aW5nIHByb3BlcnR5J3MgdmFsdWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlIChzdHJpbmcpICdzbGlkZScsICdyZXNldCcsICd0aWNrZXInXG4gICAgICogIC0gdGhlIHR5cGUgb2YgaW5zdGFuY2UgZm9yIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyBiZWluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIGR1cmF0aW9uIChpbnQpXG4gICAgICogIC0gdGhlIGFtb3VudCBvZiB0aW1lIChpbiBtcykgdGhlIHRyYW5zaXRpb24gc2hvdWxkIG9jY3VweVxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyAoYXJyYXkpIG9wdGlvbmFsXG4gICAgICogIC0gYW4gb3B0aW9uYWwgcGFyYW1ldGVyIGNvbnRhaW5pbmcgYW55IHZhcmlhYmxlcyB0aGF0IG5lZWQgdG8gYmUgcGFzc2VkIGluXG4gICAgICovXG4gICAgdmFyIHNldFBvc2l0aW9uUHJvcGVydHkgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZHVyYXRpb24sIHBhcmFtcykge1xuICAgICAgdmFyIGFuaW1hdGVPYmosIHByb3BWYWx1ZTtcbiAgICAgIC8vIHVzZSBDU1MgdHJhbnNmb3JtXG4gICAgICBpZiAoc2xpZGVyLnVzaW5nQ1NTKSB7XG4gICAgICAgIC8vIGRldGVybWluZSB0aGUgdHJhbnNsYXRlM2QgdmFsdWVcbiAgICAgICAgcHJvcFZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcgPyAndHJhbnNsYXRlM2QoMCwgJyArIHZhbHVlICsgJ3B4LCAwKScgOiAndHJhbnNsYXRlM2QoJyArIHZhbHVlICsgJ3B4LCAwLCAwKSc7XG4gICAgICAgIC8vIGFkZCB0aGUgQ1NTIHRyYW5zaXRpb24tZHVyYXRpb25cbiAgICAgICAgZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tZHVyYXRpb24nLCBkdXJhdGlvbiAvIDEwMDAgKyAncycpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3NsaWRlJykge1xuICAgICAgICAgIC8vIHNldCB0aGUgcHJvcGVydHkgdmFsdWVcbiAgICAgICAgICBlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCBwcm9wVmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgLy8gYWRkIGEgY2FsbGJhY2sgbWV0aG9kIC0gZXhlY3V0ZXMgd2hlbiBDU1MgdHJhbnNpdGlvbiBjb21wbGV0ZXNcbiAgICAgICAgICAgIGVsLm9uKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAvL21ha2Ugc3VyZSBpdCdzIHRoZSBjb3JyZWN0IG9uZVxuICAgICAgICAgICAgICBpZiAoISQoZS50YXJnZXQpLmlzKGVsKSkgeyByZXR1cm47IH1cbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICBlbC5vZmYoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnKTtcbiAgICAgICAgICAgICAgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7IC8vZHVyYXRpb24gPSAwXG4gICAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVzZXQnKSB7XG4gICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgcHJvcFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndGlja2VyJykge1xuICAgICAgICAgIC8vIG1ha2UgdGhlIHRyYW5zaXRpb24gdXNlICdsaW5lYXInXG4gICAgICAgICAgZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2xpbmVhcicpO1xuICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICBlbC5vbigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgLy9tYWtlIHN1cmUgaXQncyB0aGUgY29ycmVjdCBvbmVcbiAgICAgICAgICAgICAgaWYgKCEkKGUudGFyZ2V0KS5pcyhlbCkpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgZWwub2ZmKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJyk7XG4gICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBwb3NpdGlvblxuICAgICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHBhcmFtcy5yZXNldFZhbHVlLCAncmVzZXQnLCAwKTtcbiAgICAgICAgICAgICAgLy8gc3RhcnQgdGhlIGxvb3AgYWdhaW5cbiAgICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHsgLy9kdXJhdGlvbiA9IDBcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkocGFyYW1zLnJlc2V0VmFsdWUsICdyZXNldCcsIDApO1xuICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgLy8gdXNlIEpTIGFuaW1hdGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuaW1hdGVPYmogPSB7fTtcbiAgICAgICAgYW5pbWF0ZU9ialtzbGlkZXIuYW5pbVByb3BdID0gdmFsdWU7XG4gICAgICAgIGlmICh0eXBlID09PSAnc2xpZGUnKSB7XG4gICAgICAgICAgZWwuYW5pbWF0ZShhbmltYXRlT2JqLCBkdXJhdGlvbiwgc2xpZGVyLnNldHRpbmdzLmVhc2luZywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZXNldCcpIHtcbiAgICAgICAgICBlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3RpY2tlcicpIHtcbiAgICAgICAgICBlbC5hbmltYXRlKGFuaW1hdGVPYmosIGR1cmF0aW9uLCAnbGluZWFyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHBhcmFtcy5yZXNldFZhbHVlLCAncmVzZXQnLCAwKTtcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgcmVjdXJzaXZlIGxvb3AgYWZ0ZXIgYW5pbWF0aW9uXG4gICAgICAgICAgICB0aWNrZXJMb29wKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUG9wdWxhdGVzIHRoZSBwYWdlciB3aXRoIHByb3BlciBhbW91bnQgb2YgcGFnZXNcbiAgICAgKi9cbiAgICB2YXIgcG9wdWxhdGVQYWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhZ2VySHRtbCA9ICcnLFxuICAgICAgbGlua0NvbnRlbnQgPSAnJyxcbiAgICAgIHBhZ2VyUXR5ID0gZ2V0UGFnZXJRdHkoKTtcbiAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIHBhZ2VyIGl0ZW1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXJRdHk7IGkrKykge1xuICAgICAgICBsaW5rQ29udGVudCA9ICcnO1xuICAgICAgICAvLyBpZiBhIGJ1aWxkUGFnZXIgZnVuY3Rpb24gaXMgc3VwcGxpZWQsIHVzZSBpdCB0byBnZXQgcGFnZXIgbGluayB2YWx1ZSwgZWxzZSB1c2UgaW5kZXggKyAxXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlciAmJiAkLmlzRnVuY3Rpb24oc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIpIHx8IHNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkge1xuICAgICAgICAgIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSk7XG4gICAgICAgICAgc2xpZGVyLnBhZ2VyRWwuYWRkQ2xhc3MoJ2J4LWN1c3RvbS1wYWdlcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmtDb250ZW50ID0gaSArIDE7XG4gICAgICAgICAgc2xpZGVyLnBhZ2VyRWwuYWRkQ2xhc3MoJ2J4LWRlZmF1bHQtcGFnZXInKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2YXIgbGlua0NvbnRlbnQgPSBzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlciAmJiAkLmlzRnVuY3Rpb24oc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIpID8gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSkgOiBpICsgMTtcbiAgICAgICAgLy8gYWRkIHRoZSBtYXJrdXAgdG8gdGhlIHN0cmluZ1xuICAgICAgICBwYWdlckh0bWwgKz0gJzxkaXYgY2xhc3M9XCJieC1wYWdlci1pdGVtXCI+PGEgaHJlZj1cIlwiIGRhdGEtc2xpZGUtaW5kZXg9XCInICsgaSArICdcIiBjbGFzcz1cImJ4LXBhZ2VyLWxpbmtcIj4nICsgbGlua0NvbnRlbnQgKyAnPC9hPjwvZGl2Pic7XG4gICAgICB9XG4gICAgICAvLyBwb3B1bGF0ZSB0aGUgcGFnZXIgZWxlbWVudCB3aXRoIHBhZ2VyIGxpbmtzXG4gICAgICBzbGlkZXIucGFnZXJFbC5odG1sKHBhZ2VySHRtbCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhlIHBhZ2VyIHRvIHRoZSBjb250cm9scyBlbGVtZW50XG4gICAgICovXG4gICAgdmFyIGFwcGVuZFBhZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkge1xuICAgICAgICAvLyBjcmVhdGUgdGhlIHBhZ2VyIERPTSBlbGVtZW50XG4gICAgICAgIHNsaWRlci5wYWdlckVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LXBhZ2VyXCIgLz4nKTtcbiAgICAgICAgLy8gaWYgYSBwYWdlciBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0IHdpdGggdGhlIHBhZ2VyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXJTZWxlY3Rvcikge1xuICAgICAgICAgICQoc2xpZGVyLnNldHRpbmdzLnBhZ2VyU2VsZWN0b3IpLmh0bWwoc2xpZGVyLnBhZ2VyRWwpO1xuICAgICAgICAvLyBpZiBubyBwYWdlciBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIGFkZCBpdCBhZnRlciB0aGUgd3JhcHBlclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnYngtaGFzLXBhZ2VyJykuYXBwZW5kKHNsaWRlci5wYWdlckVsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwb3B1bGF0ZSB0aGUgcGFnZXJcbiAgICAgICAgcG9wdWxhdGVQYWdlcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVyLnBhZ2VyRWwgPSAkKHNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSk7XG4gICAgICB9XG4gICAgICAvLyBhc3NpZ24gdGhlIHBhZ2VyIGNsaWNrIGJpbmRpbmdcbiAgICAgIHNsaWRlci5wYWdlckVsLm9uKCdjbGljayB0b3VjaGVuZCcsICdhJywgY2xpY2tQYWdlckJpbmQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHByZXYgLyBuZXh0IGNvbnRyb2xzIHRvIHRoZSBjb250cm9scyBlbGVtZW50XG4gICAgICovXG4gICAgdmFyIGFwcGVuZENvbnRyb2xzID0gZnVuY3Rpb24oKSB7XG4gICAgICBzbGlkZXIuY29udHJvbHMubmV4dCA9ICQoJzxhIGNsYXNzPVwiYngtbmV4dFwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLm5leHRUZXh0ICsgJzwvYT4nKTtcbiAgICAgIHNsaWRlci5jb250cm9scy5wcmV2ID0gJCgnPGEgY2xhc3M9XCJieC1wcmV2XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3MucHJldlRleHQgKyAnPC9hPicpO1xuICAgICAgLy8gYWRkIGNsaWNrIGFjdGlvbnMgdG8gdGhlIGNvbnRyb2xzXG4gICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5vbignY2xpY2sgdG91Y2hlbmQnLCBjbGlja05leHRCaW5kKTtcbiAgICAgIHNsaWRlci5jb250cm9scy5wcmV2Lm9uKCdjbGljayB0b3VjaGVuZCcsIGNsaWNrUHJldkJpbmQpO1xuICAgICAgLy8gaWYgbmV4dFNlbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yKSB7XG4gICAgICAgICQoc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3RvcikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHByZXZTZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcikge1xuICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5wcmV2U2VsZWN0b3IpLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldik7XG4gICAgICB9XG4gICAgICAvLyBpZiBubyBjdXN0b20gc2VsZWN0b3JzIHdlcmUgc3VwcGxpZWRcbiAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3RvciAmJiAhc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcikge1xuICAgICAgICAvLyBhZGQgdGhlIGNvbnRyb2xzIHRvIHRoZSBET01cbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWRpcmVjdGlvblwiIC8+Jyk7XG4gICAgICAgIC8vIGFkZCB0aGUgY29udHJvbCBlbGVtZW50cyB0byB0aGUgZGlyZWN0aW9uRWxcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcbiAgICAgICAgLy8gc2xpZGVyLnZpZXdwb3J0LmFwcGVuZChzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwpO1xuICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1jb250cm9scy1kaXJlY3Rpb24nKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBzdGFydCAvIHN0b3AgYXV0byBjb250cm9scyB0byB0aGUgY29udHJvbHMgZWxlbWVudFxuICAgICAqL1xuICAgIHZhciBhcHBlbmRDb250cm9sc0F1dG8gPSBmdW5jdGlvbigpIHtcbiAgICAgIHNsaWRlci5jb250cm9scy5zdGFydCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvLWl0ZW1cIj48YSBjbGFzcz1cImJ4LXN0YXJ0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRUZXh0ICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgIHNsaWRlci5jb250cm9scy5zdG9wID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG8taXRlbVwiPjxhIGNsYXNzPVwiYngtc3RvcFwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLnN0b3BUZXh0ICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgIC8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTVxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvXCIgLz4nKTtcbiAgICAgIC8vIG9uIGNsaWNrIGFjdGlvbnMgdG8gdGhlIGNvbnRyb2xzXG4gICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLm9uKCdjbGljaycsICcuYngtc3RhcnQnLCBjbGlja1N0YXJ0QmluZCk7XG4gICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLm9uKCdjbGljaycsICcuYngtc3RvcCcsIGNsaWNrU3RvcEJpbmQpO1xuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSwgaW5zZXJ0IG9ubHkgdGhlIFwic3RhcnRcIiBjb250cm9sXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc0NvbWJpbmUpIHtcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0YXJ0KTtcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgZmFsc2UsIGluc2VydCBib3RoIGNvbnRyb2xzXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmFwcGVuZChzbGlkZXIuY29udHJvbHMuc3RhcnQpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuc3RvcCk7XG4gICAgICB9XG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIHNlbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXQgd2l0aCB0aGUgY29udHJvbHNcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3IpIHtcbiAgICAgICAgJChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3IpLmh0bWwoc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCk7XG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIHNlbGVjdG9yIHdhcyBub3Qgc3VwcGxpZWQsIGFkZCBpdCBhZnRlciB0aGUgd3JhcHBlclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtY29udHJvbHMtYXV0bycpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTtcbiAgICAgIH1cbiAgICAgIC8vIHVwZGF0ZSB0aGUgYXV0byBjb250cm9sc1xuICAgICAgdXBkYXRlQXV0b0NvbnRyb2xzKHNsaWRlci5zZXR0aW5ncy5hdXRvU3RhcnQgPyAnc3RvcCcgOiAnc3RhcnQnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBpbWFnZSBjYXB0aW9ucyB0byB0aGUgRE9NXG4gICAgICovXG4gICAgdmFyIGFwcGVuZENhcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBjeWNsZSB0aHJvdWdoIGVhY2ggY2hpbGRcbiAgICAgIHNsaWRlci5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgIC8vIGdldCB0aGUgaW1hZ2UgdGl0bGUgYXR0cmlidXRlXG4gICAgICAgIHZhciB0aXRsZSA9ICQodGhpcykuZmluZCgnaW1nOmZpcnN0JykuYXR0cigndGl0bGUnKTtcbiAgICAgICAgLy8gYXBwZW5kIHRoZSBjYXB0aW9uXG4gICAgICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkICYmICgnJyArIHRpdGxlKS5sZW5ndGgpIHtcbiAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJ4LWNhcHRpb25cIj48c3Bhbj4nICsgdGl0bGUgKyAnPC9zcGFuPjwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2xpY2sgbmV4dCBiaW5kaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxuICAgICAqL1xuICAgIHZhciBjbGlja05leHRCaW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5lbC5oYXNDbGFzcygnZGlzYWJsZWQnKSkgeyByZXR1cm47IH1cbiAgICAgIC8vIGlmIGF1dG8gc2hvdyBpcyBydW5uaW5nLCBzdG9wIGl0XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLnN0b3BBdXRvT25DbGljaykgeyBlbC5zdG9wQXV0bygpOyB9XG4gICAgICBlbC5nb1RvTmV4dFNsaWRlKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsaWNrIHByZXYgYmluZGluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgKi9cbiAgICB2YXIgY2xpY2tQcmV2QmluZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5zdG9wQXV0b09uQ2xpY2spIHsgZWwuc3RvcEF1dG8oKTsgfVxuICAgICAgZWwuZ29Ub1ByZXZTbGlkZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDbGljayBzdGFydCBiaW5kaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxuICAgICAqL1xuICAgIHZhciBjbGlja1N0YXJ0QmluZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGVsLnN0YXJ0QXV0bygpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDbGljayBzdG9wIGJpbmRpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIGNsaWNrU3RvcEJpbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlbC5zdG9wQXV0bygpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDbGljayBwYWdlciBiaW5kaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxuICAgICAqL1xuICAgIHZhciBjbGlja1BhZ2VyQmluZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYWdlckxpbmssIHBhZ2VySW5kZXg7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLmVsLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGlmIGF1dG8gc2hvdyBpcyBydW5uaW5nLCBzdG9wIGl0XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gICYmIHNsaWRlci5zZXR0aW5ncy5zdG9wQXV0b09uQ2xpY2spIHsgZWwuc3RvcEF1dG8oKTsgfVxuICAgICAgcGFnZXJMaW5rID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgaWYgKHBhZ2VyTGluay5hdHRyKCdkYXRhLXNsaWRlLWluZGV4JykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYWdlckluZGV4ID0gcGFyc2VJbnQocGFnZXJMaW5rLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKSk7XG4gICAgICAgIC8vIGlmIGNsaWNrZWQgcGFnZXIgbGluayBpcyBub3QgYWN0aXZlLCBjb250aW51ZSB3aXRoIHRoZSBnb1RvU2xpZGUgY2FsbFxuICAgICAgICBpZiAocGFnZXJJbmRleCAhPT0gc2xpZGVyLmFjdGl2ZS5pbmRleCkgeyBlbC5nb1RvU2xpZGUocGFnZXJJbmRleCk7IH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcGFnZXIgbGlua3Mgd2l0aCBhbiBhY3RpdmUgY2xhc3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzbGlkZUluZGV4IChpbnQpXG4gICAgICogIC0gaW5kZXggb2Ygc2xpZGUgdG8gbWFrZSBhY3RpdmVcbiAgICAgKi9cbiAgICB2YXIgdXBkYXRlUGFnZXJBY3RpdmUgPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XG4gICAgICAvLyBpZiBcInNob3J0XCIgcGFnZXIgdHlwZVxuICAgICAgdmFyIGxlbiA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IC8vIG5iIG9mIGNoaWxkcmVuXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnBhZ2VyVHlwZSA9PT0gJ3Nob3J0Jykge1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEpIHtcbiAgICAgICAgICBsZW4gPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAvIHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMpO1xuICAgICAgICB9XG4gICAgICAgIHNsaWRlci5wYWdlckVsLmh0bWwoKHNsaWRlSW5kZXggKyAxKSArIHNsaWRlci5zZXR0aW5ncy5wYWdlclNob3J0U2VwYXJhdG9yICsgbGVuKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIGFsbCBwYWdlciBhY3RpdmUgY2xhc3Nlc1xuICAgICAgc2xpZGVyLnBhZ2VyRWwuZmluZCgnYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIC8vIGFwcGx5IHRoZSBhY3RpdmUgY2xhc3MgZm9yIGFsbCBwYWdlcnNcbiAgICAgIHNsaWRlci5wYWdlckVsLmVhY2goZnVuY3Rpb24oaSwgZWwpIHsgJChlbCkuZmluZCgnYScpLmVxKHNsaWRlSW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIG5lZWRlZCBhY3Rpb25zIGFmdGVyIGEgc2xpZGUgdHJhbnNpdGlvblxuICAgICAqL1xuICAgIHZhciB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaWYgaW5maW5pdGUgbG9vcCBpcyB0cnVlXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSAnJztcbiAgICAgICAgLy8gZmlyc3Qgc2xpZGVcbiAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDApIHtcbiAgICAgICAgICAvLyBzZXQgdGhlIG5ldyBwb3NpdGlvblxuICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKDApLnBvc2l0aW9uKCk7XG4gICAgICAgIC8vIGNhcm91c2VsLCBsYXN0IHNsaWRlXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gZ2V0UGFnZXJRdHkoKSAtIDEgJiYgc2xpZGVyLmNhcm91c2VsKSB7XG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoKGdldFBhZ2VyUXR5KCkgLSAxKSAqIGdldE1vdmVCeSgpKS5wb3NpdGlvbigpO1xuICAgICAgICAvLyBsYXN0IHNsaWRlXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkucG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi5sZWZ0LCAncmVzZXQnLCAwKTsgfVxuICAgICAgICAgIGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZGVjbGFyZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlXG4gICAgICBzbGlkZXIud29ya2luZyA9IGZhbHNlO1xuICAgICAgLy8gb25TbGlkZUFmdGVyIGNhbGxiYWNrXG4gICAgICBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZUFmdGVyLmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgYXV0byBjb250cm9scyBzdGF0ZSAoZWl0aGVyIGFjdGl2ZSwgb3IgY29tYmluZWQgc3dpdGNoKVxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlIChzdHJpbmcpIFwic3RhcnRcIiwgXCJzdG9wXCJcbiAgICAgKiAgLSB0aGUgbmV3IHN0YXRlIG9mIHRoZSBhdXRvIHNob3dcbiAgICAgKi9cbiAgICB2YXIgdXBkYXRlQXV0b0NvbnRyb2xzID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgdHJ1ZSwgcmVwbGFjZSB0aGUgY3VycmVudCBjb250cm9sIHdpdGggdGhlIG5ldyBzdGF0ZVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNDb21iaW5lKSB7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuaHRtbChzbGlkZXIuY29udHJvbHNbc3RhdGVdKTtcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgZmFsc2UsIGFwcGx5IHRoZSBcImFjdGl2ZVwiIGNsYXNzIHRvIHRoZSBhcHByb3ByaWF0ZSBjb250cm9sXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuZmluZCgnYTpub3QoLmJ4LScgKyBzdGF0ZSArICcpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gY29udHJvbHMgKGNoZWNrcyBpZiBlaXRoZXIgc2hvdWxkIGJlIGhpZGRlbilcbiAgICAgKi9cbiAgICB2YXIgdXBkYXRlRGlyZWN0aW9uQ29udHJvbHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChnZXRQYWdlclF0eSgpID09PSAxKSB7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH0gZWxzZSBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLmhpZGVDb250cm9sT25FbmQpIHtcbiAgICAgICAgLy8gaWYgZmlyc3Qgc2xpZGVcbiAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDApIHtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgLy8gaWYgbGFzdCBzbGlkZVxuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IGdldFBhZ2VyUXR5KCkgLSAxKSB7XG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLnByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIC8vIGlmIGFueSBzbGlkZSBpbiB0aGUgbWlkZGxlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLnByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXHQvKiBhdXRvIHN0YXJ0IGFuZCBzdG9wIGZ1bmN0aW9ucyAqL1xuXHR2YXIgd2luZG93Rm9jdXNIYW5kbGVyID0gZnVuY3Rpb24oKSB7IGVsLnN0YXJ0QXV0bygpOyB9O1xuXHR2YXIgd2luZG93Qmx1ckhhbmRsZXIgPSBmdW5jdGlvbigpIHsgZWwuc3RvcEF1dG8oKTsgfTtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgYXV0byBwcm9jZXNzXG4gICAgICovXG4gICAgdmFyIGluaXRBdXRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBpZiBhdXRvRGVsYXkgd2FzIHN1cHBsaWVkLCBsYXVuY2ggdGhlIGF1dG8gc2hvdyB1c2luZyBhIHNldFRpbWVvdXQoKSBjYWxsXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EZWxheSA+IDApIHtcbiAgICAgICAgc2V0VGltZW91dChlbC5zdGFydEF1dG8sIHNsaWRlci5zZXR0aW5ncy5hdXRvRGVsYXkpO1xuICAgICAgLy8gaWYgYXV0b0RlbGF5IHdhcyBub3Qgc3VwcGxpZWQsIHN0YXJ0IHRoZSBhdXRvIHNob3cgbm9ybWFsbHlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnN0YXJ0QXV0bygpO1xuXG4gICAgICAgIC8vYWRkIGZvY3VzIGFuZCBibHVyIGV2ZW50cyB0byBlbnN1cmUgaXRzIHJ1bm5pbmcgaWYgdGltZW91dCBnZXRzIHBhdXNlZFxuICAgICAgICAkKHdpbmRvdykuZm9jdXMod2luZG93Rm9jdXNIYW5kbGVyKS5ibHVyKHdpbmRvd0JsdXJIYW5kbGVyKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0hvdmVyKSB7XG4gICAgICAgIC8vIG9uIGVsIGhvdmVyXG4gICAgICAgIGVsLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGlmIHRoZSBhdXRvIHNob3cgaXMgY3VycmVudGx5IHBsYXlpbmcgKGhhcyBhbiBhY3RpdmUgaW50ZXJ2YWwpXG4gICAgICAgICAgaWYgKHNsaWRlci5pbnRlcnZhbCkge1xuICAgICAgICAgICAgLy8gc3RvcCB0aGUgYXV0byBzaG93IGFuZCBwYXNzIHRydWUgYXJndW1lbnQgd2hpY2ggd2lsbCBwcmV2ZW50IGNvbnRyb2wgdXBkYXRlXG4gICAgICAgICAgICBlbC5zdG9wQXV0byh0cnVlKTtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBhdXRvUGF1c2VkIHZhbHVlIHdoaWNoIHdpbGwgYmUgdXNlZCBieSB0aGUgcmVsYXRpdmUgXCJtb3VzZW91dFwiIGV2ZW50XG4gICAgICAgICAgICBzbGlkZXIuYXV0b1BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBpZiB0aGUgYXV0b1BhdXNlZCB2YWx1ZSB3YXMgY3JlYXRlZCBiZSB0aGUgcHJpb3IgXCJtb3VzZW92ZXJcIiBldmVudFxuICAgICAgICAgIGlmIChzbGlkZXIuYXV0b1BhdXNlZCkge1xuICAgICAgICAgICAgLy8gc3RhcnQgdGhlIGF1dG8gc2hvdyBhbmQgcGFzcyB0cnVlIGFyZ3VtZW50IHdoaWNoIHdpbGwgcHJldmVudCBjb250cm9sIHVwZGF0ZVxuICAgICAgICAgICAgZWwuc3RhcnRBdXRvKHRydWUpO1xuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGF1dG9QYXVzZWQgdmFsdWVcbiAgICAgICAgICAgIHNsaWRlci5hdXRvUGF1c2VkID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgdGlja2VyIHByb2Nlc3NcbiAgICAgKi9cbiAgICB2YXIgaW5pdFRpY2tlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHN0YXJ0UG9zaXRpb24gPSAwLFxuICAgICAgcG9zaXRpb24sIHRyYW5zZm9ybSwgdmFsdWUsIGlkeCwgcmF0aW8sIHByb3BlcnR5LCBuZXdTcGVlZCwgdG90YWxEaW1lbnM7XG4gICAgICAvLyBpZiBhdXRvRGlyZWN0aW9uIGlzIFwibmV4dFwiLCBhcHBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvRGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgZWwuYXBwZW5kKHNsaWRlci5jaGlsZHJlbi5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpKTtcbiAgICAgIC8vIGlmIGF1dG9EaXJlY3Rpb24gaXMgXCJwcmV2XCIsIHByZXBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlciwgYW5kIHNldCB0aGUgbGVmdCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwucHJlcGVuZChzbGlkZXIuY2hpbGRyZW4uY2xvbmUoKS5hZGRDbGFzcygnYngtY2xvbmUnKSk7XG4gICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmZpcnN0KCkucG9zaXRpb24oKTtcbiAgICAgICAgc3RhcnRQb3NpdGlvbiA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtcG9zaXRpb24ubGVmdCA6IC1wb3NpdGlvbi50b3A7XG4gICAgICB9XG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHN0YXJ0UG9zaXRpb24sICdyZXNldCcsIDApO1xuICAgICAgLy8gZG8gbm90IGFsbG93IGNvbnRyb2xzIGluIHRpY2tlciBtb2RlXG4gICAgICBzbGlkZXIuc2V0dGluZ3MucGFnZXIgPSBmYWxzZTtcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5jb250cm9scyA9IGZhbHNlO1xuICAgICAgc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyA9IGZhbHNlO1xuICAgICAgLy8gaWYgYXV0b0hvdmVyIGlzIHJlcXVlc3RlZFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50aWNrZXJIb3Zlcikge1xuICAgICAgICBpZiAoc2xpZGVyLnVzaW5nQ1NTKSB7XG4gICAgICAgICAgaWR4ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IDQgOiA1O1xuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2Zvcm0nKTtcbiAgICAgICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh0cmFuc2Zvcm0uc3BsaXQoJywnKVtpZHhdKTtcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdG90YWxEaW1lbnMgPSAwO1xuICAgICAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgdG90YWxEaW1lbnMgKz0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICQodGhpcykub3V0ZXJXaWR0aCh0cnVlKSA6ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8gKHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBuZXcgc3BlZWQgdG8gZmluaXNoIHRoZSBwYXVzZWQgYW5pbWF0aW9uKVxuICAgICAgICAgICAgcmF0aW8gPSBzbGlkZXIuc2V0dGluZ3Muc3BlZWQgLyB0b3RhbERpbWVucztcbiAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm9wZXJ0eSB0byB1c2VcbiAgICAgICAgICAgIHByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICd0b3AnO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBuZXcgc3BlZWRcbiAgICAgICAgICAgIG5ld1NwZWVkID0gcmF0aW8gKiAodG90YWxEaW1lbnMgLSAoTWF0aC5hYnMocGFyc2VJbnQodmFsdWUpKSkpO1xuICAgICAgICAgICAgdGlja2VyTG9vcChuZXdTcGVlZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb24gZWwgaG92ZXJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlbC5zdG9wKCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHRvdGFsIHdpZHRoIG9mIGNoaWxkcmVuICh1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8pXG4gICAgICAgICAgICB0b3RhbERpbWVucyA9IDA7XG4gICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICB0b3RhbERpbWVucyArPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJCh0aGlzKS5vdXRlcldpZHRoKHRydWUpIDogJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbyAodXNlZCB0byBkZXRlcm1pbmUgdGhlIG5ldyBzcGVlZCB0byBmaW5pc2ggdGhlIHBhdXNlZCBhbmltYXRpb24pXG4gICAgICAgICAgICByYXRpbyA9IHNsaWRlci5zZXR0aW5ncy5zcGVlZCAvIHRvdGFsRGltZW5zO1xuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZVxuICAgICAgICAgICAgcHJvcGVydHkgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJ2xlZnQnIDogJ3RvcCc7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBzcGVlZFxuICAgICAgICAgICAgbmV3U3BlZWQgPSByYXRpbyAqICh0b3RhbERpbWVucyAtIChNYXRoLmFicyhwYXJzZUludChlbC5jc3MocHJvcGVydHkpKSkpKTtcbiAgICAgICAgICAgIHRpY2tlckxvb3AobmV3U3BlZWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBzdGFydCB0aGUgdGlja2VyIGxvb3BcbiAgICAgIHRpY2tlckxvb3AoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUnVucyBhIGNvbnRpbnVvdXMgbG9vcCwgbmV3cyB0aWNrZXItc3R5bGVcbiAgICAgKi9cbiAgICB2YXIgdGlja2VyTG9vcCA9IGZ1bmN0aW9uKHJlc3VtZVNwZWVkKSB7XG4gICAgICB2YXIgc3BlZWQgPSByZXN1bWVTcGVlZCA/IHJlc3VtZVNwZWVkIDogc2xpZGVyLnNldHRpbmdzLnNwZWVkLFxuICAgICAgcG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfSxcbiAgICAgIHJlc2V0ID0ge2xlZnQ6IDAsIHRvcDogMH0sXG4gICAgICBhbmltYXRlUHJvcGVydHksIHJlc2V0VmFsdWUsIHBhcmFtcztcblxuICAgICAgLy8gaWYgXCJuZXh0XCIgYW5pbWF0ZSBsZWZ0IHBvc2l0aW9uIHRvIGxhc3QgY2hpbGQsIHRoZW4gcmVzZXQgbGVmdCB0byAwXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgICBwb3NpdGlvbiA9IGVsLmZpbmQoJy5ieC1jbG9uZScpLmZpcnN0KCkucG9zaXRpb24oKTtcbiAgICAgIC8vIGlmIFwicHJldlwiIGFuaW1hdGUgbGVmdCBwb3NpdGlvbiB0byAwLCB0aGVuIHJlc2V0IGxlZnQgdG8gZmlyc3Qgbm9uLWNsb25lIGNoaWxkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgICBhbmltYXRlUHJvcGVydHkgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gLXBvc2l0aW9uLmxlZnQgOiAtcG9zaXRpb24udG9wO1xuICAgICAgcmVzZXRWYWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtcmVzZXQubGVmdCA6IC1yZXNldC50b3A7XG4gICAgICBwYXJhbXMgPSB7cmVzZXRWYWx1ZTogcmVzZXRWYWx1ZX07XG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KGFuaW1hdGVQcm9wZXJ0eSwgJ3RpY2tlcicsIHNwZWVkLCBwYXJhbXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBlbCBpcyBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICB2YXIgaXNPblNjcmVlbiA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICB2YXIgd2luID0gJCh3aW5kb3cpLFxuICAgICAgdmlld3BvcnQgPSB7XG4gICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxuICAgICAgICBsZWZ0OiB3aW4uc2Nyb2xsTGVmdCgpXG4gICAgICB9LFxuICAgICAgYm91bmRzID0gZWwub2Zmc2V0KCk7XG5cbiAgICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xuICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xuICAgICAgYm91bmRzLnJpZ2h0ID0gYm91bmRzLmxlZnQgKyBlbC5vdXRlcldpZHRoKCk7XG4gICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIGVsLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgIHJldHVybiAoISh2aWV3cG9ydC5yaWdodCA8IGJvdW5kcy5sZWZ0IHx8IHZpZXdwb3J0LmxlZnQgPiBib3VuZHMucmlnaHQgfHwgdmlld3BvcnQuYm90dG9tIDwgYm91bmRzLnRvcCB8fCB2aWV3cG9ydC50b3AgPiBib3VuZHMuYm90dG9tKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGtleWJvYXJkIGV2ZW50c1xuICAgICAqL1xuICAgIHZhciBrZXlQcmVzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBhY3RpdmVFbGVtZW50VGFnID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICB0YWdGaWx0ZXJzID0gJ2lucHV0fHRleHRhcmVhJyxcbiAgICAgIHAgPSBuZXcgUmVnRXhwKGFjdGl2ZUVsZW1lbnRUYWcsWydpJ10pLFxuICAgICAgcmVzdWx0ID0gcC5leGVjKHRhZ0ZpbHRlcnMpO1xuXG4gICAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgaXNPblNjcmVlbihlbCkpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcbiAgICAgICAgICBjbGlja05leHRCaW5kKGUpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3KSB7XG4gICAgICAgICAgY2xpY2tQcmV2QmluZChlKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdG91Y2ggZXZlbnRzXG4gICAgICovXG4gICAgdmFyIGluaXRUb3VjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaW5pdGlhbGl6ZSBvYmplY3QgdG8gY29udGFpbiBhbGwgdG91Y2ggdmFsdWVzXG4gICAgICBzbGlkZXIudG91Y2ggPSB7XG4gICAgICAgIHN0YXJ0OiB7eDogMCwgeTogMH0sXG4gICAgICAgIGVuZDoge3g6IDAsIHk6IDB9XG4gICAgICB9O1xuICAgICAgc2xpZGVyLnZpZXdwb3J0Lm9uKCd0b3VjaHN0YXJ0IE1TUG9pbnRlckRvd24gcG9pbnRlcmRvd24nLCBvblRvdWNoU3RhcnQpO1xuXG4gICAgICAvL2ZvciBicm93c2VycyB0aGF0IGhhdmUgaW1wbGVtZW50ZWQgcG9pbnRlciBldmVudHMgYW5kIGZpcmUgYSBjbGljayBhZnRlclxuICAgICAgLy9ldmVyeSBwb2ludGVydXAgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHBvaW50ZXJ1cCBpcyBvbiBzYW1lIHNjcmVlbiBsb2NhdGlvbiBhcyBwb2ludGVyZG93biBvciBub3RcbiAgICAgIHNsaWRlci52aWV3cG9ydC5vbignY2xpY2snLCAnLmJ4c2xpZGVyIGEnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuaGFzQ2xhc3MoJ2NsaWNrLWRpc2FibGVkJykpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LnJlbW92ZUNsYXNzKCdjbGljay1kaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgXCJ0b3VjaHN0YXJ0XCJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIG9uVG91Y2hTdGFydCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIHdhdGNoIG9ubHkgZm9yIGxlZnQgbW91c2UsIHRvdWNoIGNvbnRhY3QgYW5kIHBlbiBjb250YWN0XG4gICAgICAvLyB0b3VjaHN0YXJ0IGV2ZW50IG9iamVjdCBkb2VzbmB0IGhhdmUgYnV0dG9uIHByb3BlcnR5XG4gICAgICBpZiAoZS50eXBlICE9PSAndG91Y2hzdGFydCcgJiYgZS5idXR0b24gIT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy9kaXNhYmxlIHNsaWRlciBjb250cm9scyB3aGlsZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggc2xpZGVzIHRvIGF2b2lkIHNsaWRlciBmcmVlemUgdGhhdCBoYXBwZW5zIG9uIHRvdWNoIGRldmljZXMgd2hlbiBhIHNsaWRlIHN3aXBlIGhhcHBlbnMgaW1tZWRpYXRlbHkgYWZ0ZXIgaW50ZXJhY3Rpbmcgd2l0aCBzbGlkZXIgY29udHJvbHNcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgaWYgKHNsaWRlci53b3JraW5nKSB7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlY29yZCB0aGUgb3JpZ2luYWwgcG9zaXRpb24gd2hlbiB0b3VjaCBzdGFydHNcbiAgICAgICAgc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zID0gZWwucG9zaXRpb24oKTtcbiAgICAgICAgdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQsXG4gICAgICAgIHRvdWNoUG9pbnRzID0gKHR5cGVvZiBvcmlnLmNoYW5nZWRUb3VjaGVzICE9PSAndW5kZWZpbmVkJykgPyBvcmlnLmNoYW5nZWRUb3VjaGVzIDogW29yaWddO1xuXHRcdHZhciBjaHJvbWVQb2ludGVyRXZlbnRzID0gdHlwZW9mIFBvaW50ZXJFdmVudCA9PT0gJ2Z1bmN0aW9uJzsgXG5cdFx0aWYgKGNocm9tZVBvaW50ZXJFdmVudHMpIHsgXG5cdFx0XHRpZiAob3JpZy5wb2ludGVySWQgPT09IHVuZGVmaW5lZCkgeyBcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fSBcblx0XHR9XG4gICAgICAgIC8vIHJlY29yZCB0aGUgc3RhcnRpbmcgdG91Y2ggeCwgeSBjb29yZGluYXRlc1xuICAgICAgICBzbGlkZXIudG91Y2guc3RhcnQueCA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VYO1xuICAgICAgICBzbGlkZXIudG91Y2guc3RhcnQueSA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VZO1xuXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuZ2V0KDApLnNldFBvaW50ZXJDYXB0dXJlKSB7XG4gICAgICAgICAgc2xpZGVyLnBvaW50ZXJJZCA9IG9yaWcucG9pbnRlcklkO1xuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5nZXQoMCkuc2V0UG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcmUgb3JpZ2luYWwgZXZlbnQgZGF0YSBmb3IgY2xpY2sgZml4YXRpb25cbiAgICAgICAgc2xpZGVyLm9yaWdpbmFsQ2xpY2tUYXJnZXQgPSBvcmlnLm9yaWdpbmFsVGFyZ2V0IHx8IG9yaWcudGFyZ2V0O1xuICAgICAgICBzbGlkZXIub3JpZ2luYWxDbGlja0J1dHRvbiA9IG9yaWcuYnV0dG9uO1xuICAgICAgICBzbGlkZXIub3JpZ2luYWxDbGlja0J1dHRvbnMgPSBvcmlnLmJ1dHRvbnM7XG4gICAgICAgIHNsaWRlci5vcmlnaW5hbEV2ZW50VHlwZSA9IG9yaWcudHlwZTtcbiAgICAgICAgLy8gYXQgdGhpcyBtb21lbnQgd2UgZG9uYHQga25vdyB3aGF0IGl0IGlzIGNsaWNrIG9yIHN3aXBlXG4gICAgICAgIHNsaWRlci5oYXNNb3ZlID0gZmFsc2U7XG4gICAgICAgIC8vIG9uIGEgXCJ0b3VjaG1vdmVcIiBldmVudCB0byB0aGUgdmlld3BvcnRcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0Lm9uKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlKTtcbiAgICAgICAgLy8gb24gYSBcInRvdWNoZW5kXCIgZXZlbnQgdG8gdGhlIHZpZXdwb3J0XG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5vbigndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5vbignTVNQb2ludGVyQ2FuY2VsIHBvaW50ZXJjYW5jZWwnLCBvblBvaW50ZXJDYW5jZWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWwgUG9pbnRlciBmb3IgV2luZG93cyBQaG9uZVxuICAgICAqXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgKi9cbiAgICB2YXIgb25Qb2ludGVyQ2FuY2VsID0gZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLyogb25Qb2ludGVyQ2FuY2VsIGhhbmRsZXIgaXMgbmVlZGVkIHRvIGRlYWwgd2l0aCBzaXR1YXRpb25zIHdoZW4gYSB0b3VjaGVuZFxuICAgICAgZG9lc24ndCBmaXJlIGFmdGVyIGEgdG91Y2hzdGFydCAodGhpcyBoYXBwZW5zIG9uIHdpbmRvd3MgcGhvbmVzIG9ubHkpICovXG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0LCAncmVzZXQnLCAwKTtcblxuICAgICAgLy9yZW1vdmUgaGFuZGxlcnNcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIHNsaWRlci52aWV3cG9ydC5vZmYoJ01TUG9pbnRlckNhbmNlbCBwb2ludGVyY2FuY2VsJywgb25Qb2ludGVyQ2FuY2VsKTtcbiAgICAgIHNsaWRlci52aWV3cG9ydC5vZmYoJ3RvdWNobW92ZSBNU1BvaW50ZXJNb3ZlIHBvaW50ZXJtb3ZlJywgb25Ub3VjaE1vdmUpO1xuICAgICAgc2xpZGVyLnZpZXdwb3J0Lm9mZigndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XG4gICAgICBpZiAoc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUpIHtcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2htb3ZlXCJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIG9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQsXG4gICAgICB0b3VjaFBvaW50cyA9ICh0eXBlb2Ygb3JpZy5jaGFuZ2VkVG91Y2hlcyAhPT0gJ3VuZGVmaW5lZCcpID8gb3JpZy5jaGFuZ2VkVG91Y2hlcyA6IFtvcmlnXSxcbiAgICAgIC8vIGlmIHNjcm9sbGluZyBvbiB5IGF4aXMsIGRvIG5vdCBwcmV2ZW50IGRlZmF1bHRcbiAgICAgIHhNb3ZlbWVudCA9IE1hdGguYWJzKHRvdWNoUG9pbnRzWzBdLnBhZ2VYIC0gc2xpZGVyLnRvdWNoLnN0YXJ0LngpLFxuICAgICAgeU1vdmVtZW50ID0gTWF0aC5hYnModG91Y2hQb2ludHNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueSksXG4gICAgICB2YWx1ZSA9IDAsXG4gICAgICBjaGFuZ2UgPSAwO1xuICAgICAgLy8gdGhpcyBpcyBzd2lwZVxuICAgICAgc2xpZGVyLmhhc01vdmUgPSB0cnVlO1xuXG4gICAgICAvLyB4IGF4aXMgc3dpcGVcbiAgICAgIGlmICgoeE1vdmVtZW50ICogMykgPiB5TW92ZW1lbnQgJiYgc2xpZGVyLnNldHRpbmdzLnByZXZlbnREZWZhdWx0U3dpcGVYKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIHkgYXhpcyBzd2lwZVxuICAgICAgfSBlbHNlIGlmICgoeU1vdmVtZW50ICogMykgPiB4TW92ZW1lbnQgJiYgc2xpZGVyLnNldHRpbmdzLnByZXZlbnREZWZhdWx0U3dpcGVZKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLnR5cGUgIT09ICd0b3VjaG1vdmUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlICE9PSAnZmFkZScgJiYgc2xpZGVyLnNldHRpbmdzLm9uZVRvT25lVG91Y2gpIHtcbiAgICAgICAgLy8gaWYgaG9yaXpvbnRhbCwgZHJhZyBhbG9uZyB4IGF4aXNcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICBjaGFuZ2UgPSB0b3VjaFBvaW50c1swXS5wYWdlWCAtIHNsaWRlci50b3VjaC5zdGFydC54O1xuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLmxlZnQgKyBjaGFuZ2U7XG4gICAgICAgIC8vIGlmIHZlcnRpY2FsLCBkcmFnIGFsb25nIHkgYXhpc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZSA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VZIC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lnk7XG4gICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wICsgY2hhbmdlO1xuICAgICAgICB9XG4gICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNoZW5kXCJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIG9uVG91Y2hFbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzbGlkZXIudmlld3BvcnQub2ZmKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlKTtcbiAgICAgIC8vZW5hYmxlIHNsaWRlciBjb250cm9scyBhcyBzb29uIGFzIHVzZXIgc3RvcHMgaW50ZXJhY2luZyB3aXRoIHNsaWRlc1xuICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgdmFyIG9yaWcgICAgPSBlLm9yaWdpbmFsRXZlbnQsXG4gICAgICB0b3VjaFBvaW50cyA9ICh0eXBlb2Ygb3JpZy5jaGFuZ2VkVG91Y2hlcyAhPT0gJ3VuZGVmaW5lZCcpID8gb3JpZy5jaGFuZ2VkVG91Y2hlcyA6IFtvcmlnXSxcbiAgICAgIHZhbHVlICAgICAgID0gMCxcbiAgICAgIGRpc3RhbmNlICAgID0gMDtcbiAgICAgIC8vIHJlY29yZCBlbmQgeCwgeSBwb3NpdGlvbnNcbiAgICAgIHNsaWRlci50b3VjaC5lbmQueCA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VYO1xuICAgICAgc2xpZGVyLnRvdWNoLmVuZC55ID0gdG91Y2hQb2ludHNbMF0ucGFnZVk7XG4gICAgICAvLyBpZiBmYWRlIG1vZGUsIGNoZWNrIGlmIGFic29sdXRlIHggZGlzdGFuY2UgY2xlYXJzIHRoZSB0aHJlc2hvbGRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2ZhZGUnKSB7XG4gICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoc2xpZGVyLnRvdWNoLnN0YXJ0LnggLSBzbGlkZXIudG91Y2guZW5kLngpO1xuICAgICAgICBpZiAoZGlzdGFuY2UgPj0gc2xpZGVyLnNldHRpbmdzLnN3aXBlVGhyZXNob2xkKSB7XG4gICAgICAgICAgaWYgKHNsaWRlci50b3VjaC5zdGFydC54ID4gc2xpZGVyLnRvdWNoLmVuZC54KSB7XG4gICAgICAgICAgICBlbC5nb1RvTmV4dFNsaWRlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsLmdvVG9QcmV2U2xpZGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWwuc3RvcEF1dG8oKTtcbiAgICAgICAgfVxuICAgICAgLy8gbm90IGZhZGUgbW9kZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIGRpc3RhbmNlIGFuZCBlbCdzIGFuaW1hdGUgcHJvcGVydHlcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICBkaXN0YW5jZSA9IHNsaWRlci50b3VjaC5lbmQueCAtIHNsaWRlci50b3VjaC5zdGFydC54O1xuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLmxlZnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzdGFuY2UgPSBzbGlkZXIudG91Y2guZW5kLnkgLSBzbGlkZXIudG91Y2guc3RhcnQueTtcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy50b3A7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgbm90IGluZmluaXRlIGxvb3AgYW5kIGZpcnN0IC8gbGFzdCBzbGlkZSwgZG8gbm90IGF0dGVtcHQgYSBzbGlkZSB0cmFuc2l0aW9uXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiAoKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDAgJiYgZGlzdGFuY2UgPiAwKSB8fCAoc2xpZGVyLmFjdGl2ZS5sYXN0ICYmIGRpc3RhbmNlIDwgMCkpKSB7XG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3Jlc2V0JywgMjAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjaGVjayBpZiBkaXN0YW5jZSBjbGVhcnMgdGhyZXNob2xkXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA+PSBzbGlkZXIuc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IDApIHtcbiAgICAgICAgICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWwuZ29Ub1ByZXZTbGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWwuc3RvcEF1dG8oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZWwuYW5pbWF0ZShwcm9wZXJ0eSwgMjAwKTtcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDIwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzbGlkZXIudmlld3BvcnQub2ZmKCd0b3VjaGVuZCBNU1BvaW50ZXJVcCBwb2ludGVydXAnLCBvblRvdWNoRW5kKTtcblxuICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5nZXQoMCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKSB7XG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5nZXQoMCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHNsaWRlci5wb2ludGVySWQpO1xuICAgICAgfVxuICAgICAgLy8gaWYgc2xpZGVyIGhhZCBzd2lwZSB3aXRoIGxlZnQgbW91c2UsIHRvdWNoIGNvbnRhY3QgYW5kIHBlbiBjb250YWN0XG4gICAgICBpZiAoc2xpZGVyLmhhc01vdmUgPT09IGZhbHNlICYmIChzbGlkZXIub3JpZ2luYWxDbGlja0J1dHRvbiA9PT0gMCB8fCBzbGlkZXIub3JpZ2luYWxFdmVudFR5cGUgPT09ICd0b3VjaHN0YXJ0JykpIHtcbiAgICAgICAgLy8gdHJpZ2dlciBjbGljayBldmVudCAoZml4IGZvciBGaXJlZm94NTkgYW5kIFBvaW50ZXJFdmVudCBzdGFuZGFyZCBjb21wYXRpYmlsaXR5KVxuICAgICAgICAkKHNsaWRlci5vcmlnaW5hbENsaWNrVGFyZ2V0KS50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAnY2xpY2snLFxuICAgICAgICAgIGJ1dHRvbjogc2xpZGVyLm9yaWdpbmFsQ2xpY2tCdXR0b24sXG4gICAgICAgICAgYnV0dG9uczogc2xpZGVyLm9yaWdpbmFsQ2xpY2tCdXR0b25zXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBXaW5kb3cgcmVzaXplIGV2ZW50IGNhbGxiYWNrXG4gICAgICovXG4gICAgdmFyIHJlc2l6ZVdpbmRvdyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHNsaWRlciBpc24ndCBpbml0aWFsaXplZC5cbiAgICAgIGlmICghc2xpZGVyLmluaXRpYWxpemVkKSB7IHJldHVybjsgfVxuICAgICAgLy8gRGVsYXkgaWYgc2xpZGVyIHdvcmtpbmcuXG4gICAgICBpZiAoc2xpZGVyLndvcmtpbmcpIHtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQocmVzaXplV2luZG93LCAxMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBnZXQgdGhlIG5ldyB3aW5kb3cgZGltZW5zIChhZ2FpbiwgdGhhbmsgeW91IElFKVxuICAgICAgICB2YXIgd2luZG93V2lkdGhOZXcgPSAkKHdpbmRvdykud2lkdGgoKSxcbiAgICAgICAgd2luZG93SGVpZ2h0TmV3ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCBpdCBpcyBhIHRydWUgd2luZG93IHJlc2l6ZVxuICAgICAgICAvLyAqd2UgbXVzdCBjaGVjayB0aGlzIGJlY2F1c2Ugb3VyIGRpbm9zYXVyIGZyaWVuZCBJRSBmaXJlcyBhIHdpbmRvdyByZXNpemUgZXZlbnQgd2hlbiBjZXJ0YWluIERPTSBlbGVtZW50c1xuICAgICAgICAvLyBhcmUgcmVzaXplZC4gQ2FuIHlvdSBqdXN0IGRpZSBhbHJlYWR5PypcbiAgICAgICAgaWYgKHdpbmRvd1dpZHRoICE9PSB3aW5kb3dXaWR0aE5ldyB8fCB3aW5kb3dIZWlnaHQgIT09IHdpbmRvd0hlaWdodE5ldykge1xuICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnNcbiAgICAgICAgICB3aW5kb3dXaWR0aCA9IHdpbmRvd1dpZHRoTmV3O1xuICAgICAgICAgIHdpbmRvd0hlaWdodCA9IHdpbmRvd0hlaWdodE5ldztcbiAgICAgICAgICAvLyB1cGRhdGUgYWxsIGR5bmFtaWMgZWxlbWVudHNcbiAgICAgICAgICBlbC5yZWRyYXdTbGlkZXIoKTtcbiAgICAgICAgICAvLyBDYWxsIHVzZXIgcmVzaXplIGhhbmRsZXJcbiAgICAgICAgICBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZXJSZXNpemUuY2FsbChlbCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBhcmlhLWhpZGRlbj10cnVlIGF0dHJpYnV0ZSB0byBlYWNoIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGFydFZpc2libGVJbmRleCAoaW50KVxuICAgICAqICAtIHRoZSBmaXJzdCB2aXNpYmxlIGVsZW1lbnQncyBpbmRleFxuICAgICAqL1xuICAgIHZhciBhcHBseUFyaWFIaWRkZW5BdHRyaWJ1dGVzID0gZnVuY3Rpb24oc3RhcnRWaXNpYmxlSW5kZXgpIHtcbiAgICAgIHZhciBudW1iZXJPZlNsaWRlc1Nob3dpbmcgPSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7XG4gICAgICAvLyBvbmx5IGFwcGx5IGF0dHJpYnV0ZXMgaWYgdGhlIHNldHRpbmcgaXMgZW5hYmxlZCBhbmQgbm90IGluIHRpY2tlciBtb2RlXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4gJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHtcbiAgICAgICAgLy8gYWRkIGFyaWEtaGlkZGVuPXRydWUgdG8gYWxsIGVsZW1lbnRzXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgIC8vIGdldCB0aGUgdmlzaWJsZSBlbGVtZW50cyBhbmQgY2hhbmdlIHRvIGFyaWEtaGlkZGVuPWZhbHNlXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5zbGljZShzdGFydFZpc2libGVJbmRleCwgc3RhcnRWaXNpYmxlSW5kZXggKyBudW1iZXJPZlNsaWRlc1Nob3dpbmcpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgaW5kZXggYWNjb3JkaW5nIHRvIHByZXNlbnQgcGFnZSByYW5nZVxuICAgICAqXG4gICAgICogQHBhcmFtIHNsaWRlT25kZXggKGludClcbiAgICAgKiAgLSB0aGUgZGVzaXJlZCBzbGlkZSBpbmRleFxuICAgICAqL1xuICAgIHZhciBzZXRTbGlkZUluZGV4ID0gZnVuY3Rpb24oc2xpZGVJbmRleCkge1xuICAgICAgaWYgKHNsaWRlSW5kZXggPCAwKSB7XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFBhZ2VyUXR5KCkgLSAxO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgLy93ZSBkb24ndCBnbyB0byB1bmRlZmluZWQgc2xpZGVzXG4gICAgICAgICAgcmV0dXJuIHNsaWRlci5hY3RpdmUuaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIC8vIGlmIHNsaWRlSW5kZXggaXMgZ3JlYXRlciB0aGFuIGNoaWxkcmVuIGxlbmd0aCwgc2V0IGFjdGl2ZSBpbmRleCB0byAwICh0aGlzIGhhcHBlbnMgZHVyaW5nIGluZmluaXRlIGxvb3ApXG4gICAgICB9IGVsc2UgaWYgKHNsaWRlSW5kZXggPj0gZ2V0UGFnZXJRdHkoKSkge1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vd2UgZG9uJ3QgbW92ZSB0byB1bmRlZmluZWQgcGFnZXNcbiAgICAgICAgICByZXR1cm4gc2xpZGVyLmFjdGl2ZS5pbmRleDtcbiAgICAgICAgfVxuICAgICAgLy8gc2V0IGFjdGl2ZSBpbmRleCB0byByZXF1ZXN0ZWQgc2xpZGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzbGlkZUluZGV4O1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAqID0gUFVCTElDIEZVTkNUSU9OU1xuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBzbGlkZSB0cmFuc2l0aW9uIHRvIHRoZSBzcGVjaWZpZWQgc2xpZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzbGlkZUluZGV4IChpbnQpXG4gICAgICogIC0gdGhlIGRlc3RpbmF0aW9uIHNsaWRlJ3MgaW5kZXggKHplcm8tYmFzZWQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIChzdHJpbmcpXG4gICAgICogIC0gSU5URVJOQUwgVVNFIE9OTFkgLSB0aGUgZGlyZWN0aW9uIG9mIHRyYXZlbCAoXCJwcmV2XCIgLyBcIm5leHRcIilcbiAgICAgKi9cbiAgICBlbC5nb1RvU2xpZGUgPSBmdW5jdGlvbihzbGlkZUluZGV4LCBkaXJlY3Rpb24pIHtcbiAgICAgIC8vIG9uU2xpZGVCZWZvcmUsIG9uU2xpZGVOZXh0LCBvblNsaWRlUHJldiBjYWxsYmFja3NcbiAgICAgIC8vIEFsbG93IHRyYW5zaXRpb24gY2FuY2VsaW5nIGJhc2VkIG9uIHJldHVybmVkIHZhbHVlXG4gICAgICB2YXIgcGVyZm9ybVRyYW5zaXRpb24gPSB0cnVlLFxuICAgICAgbW92ZUJ5ID0gMCxcbiAgICAgIHBvc2l0aW9uID0ge2xlZnQ6IDAsIHRvcDogMH0sXG4gICAgICBsYXN0Q2hpbGQgPSBudWxsLFxuICAgICAgbGFzdFNob3dpbmdJbmRleCwgZXEsIHZhbHVlLCByZXF1ZXN0RWw7XG4gICAgICAvLyBzdG9yZSB0aGUgb2xkIGluZGV4XG4gICAgICBzbGlkZXIub2xkSW5kZXggPSBzbGlkZXIuYWN0aXZlLmluZGV4O1xuICAgICAgLy9zZXQgbmV3IGluZGV4XG4gICAgICBzbGlkZXIuYWN0aXZlLmluZGV4ID0gc2V0U2xpZGVJbmRleChzbGlkZUluZGV4KTtcblxuICAgICAgLy8gaWYgcGx1Z2luIGlzIGN1cnJlbnRseSBpbiBtb3Rpb24sIGlnbm9yZSByZXF1ZXN0XG4gICAgICBpZiAoc2xpZGVyLndvcmtpbmcgfHwgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gc2xpZGVyLm9sZEluZGV4KSB7IHJldHVybjsgfVxuICAgICAgLy8gZGVjbGFyZSB0aGF0IHBsdWdpbiBpcyBpbiBtb3Rpb25cbiAgICAgIHNsaWRlci53b3JraW5nID0gdHJ1ZTtcblxuICAgICAgcGVyZm9ybVRyYW5zaXRpb24gPSBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZUJlZm9yZS5jYWxsKGVsLCBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG5cbiAgICAgIC8vIElmIHRyYW5zaXRpb25zIGNhbmNlbGVkLCByZXNldCBhbmQgcmV0dXJuXG4gICAgICBpZiAodHlwZW9mIChwZXJmb3JtVHJhbnNpdGlvbikgIT09ICd1bmRlZmluZWQnICYmICFwZXJmb3JtVHJhbnNpdGlvbikge1xuICAgICAgICBzbGlkZXIuYWN0aXZlLmluZGV4ID0gc2xpZGVyLm9sZEluZGV4OyAvLyByZXN0b3JlIG9sZCBpbmRleFxuICAgICAgICBzbGlkZXIud29ya2luZyA9IGZhbHNlOyAvLyBpcyBub3QgaW4gbW90aW9uXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICAgIC8vIFByZXZlbnQgY2FuY2VsaW5nIGluIGZ1dHVyZSBmdW5jdGlvbnMgb3IgbGFjayB0aGVyZS1vZiBmcm9tIG5lZ2F0aW5nIHByZXZpb3VzIGNvbW1hbmRzIHRvIGNhbmNlbFxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5vblNsaWRlTmV4dC5jYWxsKGVsLCBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCkpIHtcbiAgICAgICAgICBwZXJmb3JtVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3ByZXYnKSB7XG4gICAgICAgIC8vIFByZXZlbnQgY2FuY2VsaW5nIGluIGZ1dHVyZSBmdW5jdGlvbnMgb3IgbGFjayB0aGVyZS1vZiBmcm9tIG5lZ2F0aW5nIHByZXZpb3VzIGNvbW1hbmRzIHRvIGNhbmNlbFxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5vblNsaWRlUHJldi5jYWxsKGVsLCBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCkpIHtcbiAgICAgICAgICBwZXJmb3JtVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGlmIGxhc3Qgc2xpZGVcbiAgICAgIHNsaWRlci5hY3RpdmUubGFzdCA9IHNsaWRlci5hY3RpdmUuaW5kZXggPj0gZ2V0UGFnZXJRdHkoKSAtIDE7XG4gICAgICAvLyB1cGRhdGUgdGhlIHBhZ2VyIHdpdGggYWN0aXZlIGNsYXNzXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnBhZ2VyIHx8IHNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkgeyB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuYWN0aXZlLmluZGV4KTsgfVxuICAgICAgLy8gLy8gY2hlY2sgZm9yIGRpcmVjdGlvbiBjb250cm9sIHVwZGF0ZVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgeyB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpOyB9XG4gICAgICAvLyBpZiBzbGlkZXIgaXMgc2V0IHRvIG1vZGU6IFwiZmFkZVwiXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdmYWRlJykge1xuICAgICAgICAvLyBpZiBhZGFwdGl2ZUhlaWdodCBpcyB0cnVlIGFuZCBuZXh0IGhlaWdodCBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGhlaWdodCwgYW5pbWF0ZSB0byB0aGUgbmV3IGhlaWdodFxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0ICYmIHNsaWRlci52aWV3cG9ydC5oZWlnaHQoKSAhPT0gZ2V0Vmlld3BvcnRIZWlnaHQoKSkge1xuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6IGdldFZpZXdwb3J0SGVpZ2h0KCl9LCBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHRTcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFkZSBvdXQgdGhlIHZpc2libGUgY2hpbGQgYW5kIHJlc2V0IGl0cyB6LWluZGV4IHZhbHVlXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5maWx0ZXIoJzp2aXNpYmxlJykuZmFkZU91dChzbGlkZXIuc2V0dGluZ3Muc3BlZWQpLmNzcyh7ekluZGV4OiAwfSk7XG4gICAgICAgIC8vIGZhZGUgaW4gdGhlIG5ld2x5IHJlcXVlc3RlZCBzbGlkZVxuICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCkuY3NzKCd6SW5kZXgnLCBzbGlkZXIuc2V0dGluZ3Muc2xpZGVaSW5kZXggKyAxKS5mYWRlSW4oc2xpZGVyLnNldHRpbmdzLnNwZWVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKHRoaXMpLmNzcygnekluZGV4Jywgc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4KTtcbiAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgIC8vIHNsaWRlciBtb2RlIGlzIG5vdCBcImZhZGVcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgYWRhcHRpdmVIZWlnaHQgaXMgdHJ1ZSBhbmQgbmV4dCBoZWlnaHQgaXMgZGlmZmVyZW50IGZyb20gY3VycmVudCBoZWlnaHQsIGFuaW1hdGUgdG8gdGhlIG5ldyBoZWlnaHRcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCAmJiBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KCkgIT09IGdldFZpZXdwb3J0SGVpZ2h0KCkpIHtcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuYW5pbWF0ZSh7aGVpZ2h0OiBnZXRWaWV3cG9ydEhlaWdodCgpfSwgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0U3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGNhcm91c2VsIGFuZCBub3QgaW5maW5pdGUgbG9vcFxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmNhcm91c2VsICYmIHNsaWRlci5hY3RpdmUubGFzdCkge1xuICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGxhc3QgY2hpbGQgcG9zaXRpb25cbiAgICAgICAgICAgIGxhc3RDaGlsZCA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGxhc3RDaGlsZC5wb3NpdGlvbigpO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBzbGlkZVxuICAgICAgICAgICAgbW92ZUJ5ID0gc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgLSBsYXN0Q2hpbGQub3V0ZXJXaWR0aCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBnZXQgbGFzdCBzaG93aW5nIGluZGV4IHBvc2l0aW9uXG4gICAgICAgICAgICBsYXN0U2hvd2luZ0luZGV4ID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShsYXN0U2hvd2luZ0luZGV4KS5wb3NpdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBob3Jpem9udGFsIGNhcm91c2VsLCBnb2luZyBwcmV2aW91cyB3aGlsZSBvbiBmaXJzdCBzbGlkZSAoaW5maW5pdGVMb29wIG1vZGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmNhcm91c2VsICYmIHNsaWRlci5hY3RpdmUubGFzdCAmJiBkaXJlY3Rpb24gPT09ICdwcmV2Jykge1xuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjaGlsZCBwb3NpdGlvblxuICAgICAgICAgIGVxID0gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPT09IDEgPyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gZ2V0TW92ZUJ5KCkgOiAoKGdldFBhZ2VyUXR5KCkgLSAxKSAqIGdldE1vdmVCeSgpKSAtIChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyk7XG4gICAgICAgICAgbGFzdENoaWxkID0gZWwuY2hpbGRyZW4oJy5ieC1jbG9uZScpLmVxKGVxKTtcbiAgICAgICAgICBwb3NpdGlvbiA9IGxhc3RDaGlsZC5wb3NpdGlvbigpO1xuICAgICAgICAvLyBpZiBpbmZpbml0ZSBsb29wIGFuZCBcIk5leHRcIiBpcyBjbGlja2VkIG9uIHRoZSBsYXN0IHNsaWRlXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcgJiYgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gMCkge1xuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjbG9uZSBwb3NpdGlvblxuICAgICAgICAgIHBvc2l0aW9uID0gZWwuZmluZCgnPiAuYngtY2xvbmUnKS5lcShzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKS5wb3NpdGlvbigpO1xuICAgICAgICAgIHNsaWRlci5hY3RpdmUubGFzdCA9IGZhbHNlO1xuICAgICAgICAvLyBub3JtYWwgbm9uLXplcm8gcmVxdWVzdHNcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZUluZGV4ID49IDApIHtcbiAgICAgICAgICAvL3BhcnNlSW50IGlzIGFwcGxpZWQgdG8gYWxsb3cgZmxvYXRzIGZvciBzbGlkZXMvcGFnZVxuICAgICAgICAgIHJlcXVlc3RFbCA9IHNsaWRlSW5kZXggKiBwYXJzZUludChnZXRNb3ZlQnkoKSk7XG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEocmVxdWVzdEVsKS5wb3NpdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogSWYgdGhlIHBvc2l0aW9uIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICogKGUuZy4gaWYgeW91IGRlc3Ryb3kgdGhlIHNsaWRlciBvbiBhIG5leHQgY2xpY2spLFxuICAgICAgICAgKiBpdCBkb2Vzbid0IHRocm93IGFuIGVycm9yLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHR5cGVvZiAocG9zaXRpb24pICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IC0ocG9zaXRpb24ubGVmdCAtIG1vdmVCeSkgOiAtcG9zaXRpb24udG9wO1xuICAgICAgICAgIC8vIHBsdWdpbiB2YWx1ZXMgdG8gYmUgYW5pbWF0ZWRcbiAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAnc2xpZGUnLCBzbGlkZXIuc2V0dGluZ3Muc3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4pIHsgYXBwbHlBcmlhSGlkZGVuQXR0cmlidXRlcyhzbGlkZXIuYWN0aXZlLmluZGV4ICogZ2V0TW92ZUJ5KCkpOyB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb25zIHRvIHRoZSBuZXh0IHNsaWRlIGluIHRoZSBzaG93XG4gICAgICovXG4gICAgZWwuZ29Ub05leHRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaWYgaW5maW5pdGVMb29wIGlzIGZhbHNlIGFuZCBsYXN0IHBhZ2UgaXMgc2hvd2luZywgZGlzcmVnYXJkIGNhbGxcbiAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuYWN0aXZlLmxhc3QpIHsgcmV0dXJuOyB9XG5cdCAgaWYgKHNsaWRlci53b3JraW5nID09PSB0cnVlKXsgcmV0dXJuIDt9XG4gICAgICB2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHNsaWRlci5hY3RpdmUuaW5kZXgpICsgMTtcbiAgICAgIGVsLmdvVG9TbGlkZShwYWdlckluZGV4LCAnbmV4dCcpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2l0aW9ucyB0byB0aGUgcHJldiBzbGlkZSBpbiB0aGUgc2hvd1xuICAgICAqL1xuICAgIGVsLmdvVG9QcmV2U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGlmIGluZmluaXRlTG9vcCBpcyBmYWxzZSBhbmQgbGFzdCBwYWdlIGlzIHNob3dpbmcsIGRpc3JlZ2FyZCBjYWxsXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gMCkgeyByZXR1cm47IH1cblx0ICBpZiAoc2xpZGVyLndvcmtpbmcgPT09IHRydWUpeyByZXR1cm4gO31cbiAgICAgIHZhciBwYWdlckluZGV4ID0gcGFyc2VJbnQoc2xpZGVyLmFjdGl2ZS5pbmRleCkgLSAxO1xuICAgICAgZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgsICdwcmV2Jyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgYXV0byBzaG93XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldmVudENvbnRyb2xVcGRhdGUgKGJvb2xlYW4pXG4gICAgICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkXG4gICAgICovXG4gICAgZWwuc3RhcnRBdXRvID0gZnVuY3Rpb24ocHJldmVudENvbnRyb2xVcGRhdGUpIHtcbiAgICAgIC8vIGlmIGFuIGludGVydmFsIGFscmVhZHkgZXhpc3RzLCBkaXNyZWdhcmQgY2FsbFxuICAgICAgaWYgKHNsaWRlci5pbnRlcnZhbCkgeyByZXR1cm47IH1cbiAgICAgIC8vIGNyZWF0ZSBhbiBpbnRlcnZhbFxuICAgICAgc2xpZGVyLmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0RpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLmdvVG9QcmV2U2xpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgc2xpZGVyLnNldHRpbmdzLnBhdXNlKTtcblx0ICAvL2FsbGJhY2sgZm9yIHdoZW4gdGhlIGF1dG8gcm90YXRlIHN0YXR1cyBjaGFuZ2VzXG5cdCAgc2xpZGVyLnNldHRpbmdzLm9uQXV0b0NoYW5nZS5jYWxsKGVsLCB0cnVlKTtcbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgYXJlIGRpc3BsYXllZCBhbmQgcHJldmVudENvbnRyb2xVcGRhdGUgaXMgbm90IHRydWVcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzICYmIHByZXZlbnRDb250cm9sVXBkYXRlICE9PSB0cnVlKSB7IHVwZGF0ZUF1dG9Db250cm9scygnc3RvcCcpOyB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBhdXRvIHNob3dcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmV2ZW50Q29udHJvbFVwZGF0ZSAoYm9vbGVhbilcbiAgICAgKiAgLSBpZiB0cnVlLCBhdXRvIGNvbnRyb2xzIHN0YXRlIHdpbGwgbm90IGJlIHVwZGF0ZWRcbiAgICAgKi9cbiAgICBlbC5zdG9wQXV0byA9IGZ1bmN0aW9uKHByZXZlbnRDb250cm9sVXBkYXRlKSB7XG4gICAgICAvLyBpZiBzbGlkZXIgaXMgYXV0byBwYXVzZWQsIGp1c3QgY2xlYXIgdGhhdCBzdGF0ZVxuICAgICAgaWYgKHNsaWRlci5hdXRvUGF1c2VkKSBzbGlkZXIuYXV0b1BhdXNlZCA9IGZhbHNlO1xuICAgICAgLy8gaWYgbm8gaW50ZXJ2YWwgZXhpc3RzLCBkaXNyZWdhcmQgY2FsbFxuICAgICAgaWYgKCFzbGlkZXIuaW50ZXJ2YWwpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBjbGVhciB0aGUgaW50ZXJ2YWxcbiAgICAgIGNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTtcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IG51bGw7XG5cdCAgLy9hbGxiYWNrIGZvciB3aGVuIHRoZSBhdXRvIHJvdGF0ZSBzdGF0dXMgY2hhbmdlc1xuXHQgIHNsaWRlci5zZXR0aW5ncy5vbkF1dG9DaGFuZ2UuY2FsbChlbCwgZmFsc2UpO1xuICAgICAgLy8gaWYgYXV0byBjb250cm9scyBhcmUgZGlzcGxheWVkIGFuZCBwcmV2ZW50Q29udHJvbFVwZGF0ZSBpcyBub3QgdHJ1ZVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMgJiYgcHJldmVudENvbnRyb2xVcGRhdGUgIT09IHRydWUpIHsgdXBkYXRlQXV0b0NvbnRyb2xzKCdzdGFydCcpOyB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY3VycmVudCBzbGlkZSBpbmRleCAoemVyby1iYXNlZClcbiAgICAgKi9cbiAgICBlbC5nZXRDdXJyZW50U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzbGlkZXIuYWN0aXZlLmluZGV4O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGN1cnJlbnQgc2xpZGUgZWxlbWVudFxuICAgICAqL1xuICAgIGVsLmdldEN1cnJlbnRTbGlkZUVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzbGlkZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGluZGV4IChpbnQpXG4gICAgICogIC0gVGhlIGluZGV4ICh6ZXJvLWJhc2VkKSBvZiB0aGUgZWxlbWVudCB5b3Ugd2FudCByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBlbC5nZXRTbGlkZUVsZW1lbnQgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHNsaWRlci5jaGlsZHJlbi5lcShpbmRleCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgbnVtYmVyIG9mIHNsaWRlcyBpbiBzaG93XG4gICAgICovXG4gICAgZWwuZ2V0U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBzbGlkZXIud29ya2luZyB2YXJpYWJsZVxuICAgICAqL1xuICAgIGVsLmlzV29ya2luZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWRlci53b3JraW5nO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYWxsIGR5bmFtaWMgc2xpZGVyIGVsZW1lbnRzXG4gICAgICovXG4gICAgZWwucmVkcmF3U2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyByZXNpemUgYWxsIGNoaWxkcmVuIGluIHJhdGlvIHRvIG5ldyBzY3JlZW4gc2l6ZVxuICAgICAgc2xpZGVyLmNoaWxkcmVuLmFkZChlbC5maW5kKCcuYngtY2xvbmUnKSkub3V0ZXJXaWR0aChnZXRTbGlkZVdpZHRoKCkpO1xuICAgICAgLy8gYWRqdXN0IHRoZSBoZWlnaHRcbiAgICAgIHNsaWRlci52aWV3cG9ydC5jc3MoJ2hlaWdodCcsIGdldFZpZXdwb3J0SGVpZ2h0KCkpO1xuICAgICAgLy8gdXBkYXRlIHRoZSBzbGlkZSBwb3NpdGlvblxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7IHNldFNsaWRlUG9zaXRpb24oKTsgfVxuICAgICAgLy8gaWYgYWN0aXZlLmxhc3Qgd2FzIHRydWUgYmVmb3JlIHRoZSBzY3JlZW4gcmVzaXplLCB3ZSB3YW50XG4gICAgICAvLyB0byBrZWVwIGl0IGxhc3Qgbm8gbWF0dGVyIHdoYXQgc2NyZWVuIHNpemUgd2UgZW5kIG9uXG4gICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5sYXN0KSB7IHNsaWRlci5hY3RpdmUuaW5kZXggPSBnZXRQYWdlclF0eSgpIC0gMTsgfVxuICAgICAgLy8gaWYgdGhlIGFjdGl2ZSBpbmRleCAocGFnZSkgbm8gbG9uZ2VyIGV4aXN0cyBkdWUgdG8gdGhlIHJlc2l6ZSwgc2ltcGx5IHNldCB0aGUgaW5kZXggYXMgbGFzdFxuICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPj0gZ2V0UGFnZXJRdHkoKSkgeyBzbGlkZXIuYWN0aXZlLmxhc3QgPSB0cnVlOyB9XG4gICAgICAvLyBpZiBhIHBhZ2VyIGlzIGJlaW5nIGRpc3BsYXllZCBhbmQgYSBjdXN0b20gcGFnZXIgaXMgbm90IGJlaW5nIHVzZWQsIHVwZGF0ZSBpdFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlciAmJiAhc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7XG4gICAgICAgIHBvcHVsYXRlUGFnZXIoKTtcbiAgICAgICAgdXBkYXRlUGFnZXJBY3RpdmUoc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG4gICAgICB9XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4pIHsgYXBwbHlBcmlhSGlkZGVuQXR0cmlidXRlcyhzbGlkZXIuYWN0aXZlLmluZGV4ICogZ2V0TW92ZUJ5KCkpOyB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgdGhlIHNsaWRlciAocmV2ZXJ0IGV2ZXJ5dGhpbmcgYmFjayB0byBvcmlnaW5hbCBzdGF0ZSlcbiAgICAgKi9cbiAgICBlbC5kZXN0cm95U2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBkb24ndCBkbyBhbnl0aGluZyBpZiBzbGlkZXIgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWRcbiAgICAgIGlmICghc2xpZGVyLmluaXRpYWxpemVkKSB7IHJldHVybjsgfVxuICAgICAgc2xpZGVyLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAkKCcuYngtY2xvbmUnLCB0aGlzKS5yZW1vdmUoKTtcbiAgICAgIHNsaWRlci5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHlsZScsICQodGhpcykuZGF0YSgnb3JpZ1N0eWxlJykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQodGhpcykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuYXR0cignc3R5bGUnLCAkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIH1cbiAgICAgICQodGhpcykudW53cmFwKCkudW53cmFwKCk7XG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLmVsKSB7IHNsaWRlci5jb250cm9scy5lbC5yZW1vdmUoKTsgfVxuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5uZXh0KSB7IHNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZSgpOyB9XG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLnByZXYpIHsgc2xpZGVyLmNvbnRyb2xzLnByZXYucmVtb3ZlKCk7IH1cbiAgICAgIGlmIChzbGlkZXIucGFnZXJFbCAmJiBzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgJiYgIXNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkgeyBzbGlkZXIucGFnZXJFbC5yZW1vdmUoKTsgfVxuICAgICAgJCgnLmJ4LWNhcHRpb24nLCB0aGlzKS5yZW1vdmUoKTtcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuYXV0b0VsKSB7IHNsaWRlci5jb250cm9scy5hdXRvRWwucmVtb3ZlKCk7IH1cbiAgICAgIGNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTtcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucmVzcG9uc2l2ZSkgeyAkKHdpbmRvdykub2ZmKCdyZXNpemUnLCByZXNpemVXaW5kb3cpOyB9XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmtleWJvYXJkRW5hYmxlZCkgeyAkKGRvY3VtZW50KS5vZmYoJ2tleWRvd24nLCBrZXlQcmVzcyk7IH1cbiAgICAgIC8vcmVtb3ZlIHNlbGYgcmVmZXJlbmNlIGluIGRhdGFcbiAgICAgICQodGhpcykucmVtb3ZlRGF0YSgnYnhTbGlkZXInKTtcblx0ICAvLyByZW1vdmUgZ2xvYmFsIHdpbmRvdyBoYW5kbGVyc1xuXHQgICQod2luZG93KS5vZmYoJ2JsdXInLCB3aW5kb3dCbHVySGFuZGxlcikub2ZmKCdmb2N1cycsIHdpbmRvd0ZvY3VzSGFuZGxlcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbG9hZCB0aGUgc2xpZGVyIChyZXZlcnQgYWxsIERPTSBjaGFuZ2VzLCBhbmQgcmUtaW5pdGlhbGl6ZSlcbiAgICAgKi9cbiAgICBlbC5yZWxvYWRTbGlkZXIgPSBmdW5jdGlvbihzZXR0aW5ncykge1xuICAgICAgaWYgKHNldHRpbmdzICE9PSB1bmRlZmluZWQpIHsgb3B0aW9ucyA9IHNldHRpbmdzOyB9XG4gICAgICBlbC5kZXN0cm95U2xpZGVyKCk7XG4gICAgICBpbml0KCk7XG4gICAgICAvL3N0b3JlIHJlZmVyZW5jZSB0byBzZWxmIGluIG9yZGVyIHRvIGFjY2VzcyBwdWJsaWMgZnVuY3Rpb25zIGxhdGVyXG4gICAgICAkKGVsKS5kYXRhKCdieFNsaWRlcicsIHRoaXMpO1xuICAgIH07XG5cbiAgICBpbml0KCk7XG5cbiAgICAkKGVsKS5kYXRhKCdieFNsaWRlcicsIHRoaXMpO1xuXG4gICAgLy8gcmV0dXJucyB0aGUgY3VycmVudCBqUXVlcnkgb2JqZWN0XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbn0pKGpRdWVyeSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgKGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IGNsb3NlT3RoZXJzID0gbGlzdCA9PiB7XHJcbiAgY29uc3QgcGFuZWwgPSBsaXN0LmZpbmQoXCIuY29tbWFuZF9fcHJvZmlsZS1wYW5lbFwiKTtcclxuICBjb25zdCBuYW1lID0gbGlzdC5maW5kKFwiLmNvbW1hbmRfX3Byb2ZpbGUtbmFtZVwiKTtcclxuIFxyXG4gIG5hbWUucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgcGFuZWwuaGVpZ2h0KDApO1xyXG59XHJcblxyXG5jb25zdCBvcGVuTmV3ID0gYmxvY2sgPT4ge1xyXG4gY29uc3QgcHJvZmlsZSA9IGJsb2NrLmNsb3Nlc3QoXCIuY29tbWFuZF9fcHJvZmlsZVwiKTtcclxuIGNvbnN0IHBhbmVsID0gcHJvZmlsZS5maW5kKFwiLmNvbW1hbmRfX3Byb2ZpbGUtcGFuZWxcIik7XHJcbiBjb25zdCBwYW5lbEJsb2NrID0gcHJvZmlsZS5maW5kKFwiLmNvbW1hbmRfX3Byb2ZpbGUtYmxvY2tcIik7XHJcbiBjb25zdCBzY3JvbGxIZWlnaHQgPSBwYW5lbEJsb2NrLmhlaWdodCgpO1xyXG5cclxuIGJsb2NrLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gcGFuZWwuaGVpZ2h0KHNjcm9sbEhlaWdodCk7XHJcbn1cclxuXHJcbiQoXCIuY29tbWFuZF9fcHJvZmlsZS1uYW1lXCIpLmNsaWNrKChlKSA9PiB7ICAgXHJcbiAgIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICBjb25zdCBsaXN0ID0gJHRoaXMuY2xvc2VzdChcIi5jb21tYW5kX19saXN0XCIpOyBcclxuXHJcbiAgIGlmICgkdGhpcy5oYXNDbGFzcyhcImFjdGl2ZVwiKSkge1xyXG4gICAgY2xvc2VPdGhlcnMobGlzdCk7XHJcbiAgIH0gZWxzZSB7XHJcbiAgICBjbG9zZU90aGVycyhsaXN0KTtcclxuICAgIG9wZW5OZXcoJHRoaXMpO1xyXG4gICB9XHJcbiAgfSk7XHJcbn0pKCkiLCIoZnVuY3Rpb24oKSB7XHJcbmNvbnN0IG1lc3VyZVdpZHRoID0gaXRlbSA9PiB7XHJcbiAgbGV0IHJlcUl0ZW1XaWR0aCA9IDA7XHJcbiAgY29uc3Qgc2NyZWVuV2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICBjb25zdCBjb250YWluZXIgPSBpdGVtLmNsb3Nlc3QoXCIuYXNzb3J0X19saXN0XCIpO1xyXG4gIGNvbnN0IHRpdGxlc0Jsb2NrcyA9IGNvbnRhaW5lci5maW5kKFwiLmFzc29ydF9fdHJpZ2dlclwiKTtcclxuICBjb25zdCB0aXRsZXNXaWR0aCA9IHRpdGxlc0Jsb2Nrcy53aWR0aCgpICogdGl0bGVzQmxvY2tzLmxlbmd0aDtcclxuXHJcbiAgY29uc3QgdGV4dENvbnRhaW5lciA9IGl0ZW0uZmluZChcIi5hc3NvcnRfX2NvbnRlbnRcIik7XHJcbiAgY29uc3QgcGFkZGluZ0xlZnQgPSBwYXJzZUludCh0ZXh0Q29udGFpbmVyLmNzcyhcInBhZGRpbmctbGVmdFwiKSk7XHJcbiAgY29uc3QgcGFkZGluZ1JpZ2h0ID0gcGFyc2VJbnQodGV4dENvbnRhaW5lci5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpKTtcclxuXHJcbiAgY29uc3QgaXNNb2JpbGUgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDc2OHB4KVwiKS5tYXRjaGVzO1xyXG5cclxuICBpZiAoaXNNb2JpbGUpIHtcclxuICAgIHJlcUl0ZW1XaWR0aCA9IHNjcmVlbldpZHRoIC0gdGl0bGVzV2lkdGg7XHJcbiAgfSBlbHNlIHtcclxuICByZXFJdGVtV2lkdGggPSA1MDA7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY29udGFpbmVyOiByZXFJdGVtV2lkdGgsXHJcbiAgICB0ZXh0Q29udGFpbmVyOiByZXFJdGVtV2lkdGggLSBwYWRkaW5nTGVmdCAtIHBhZGRpbmdSaWdodFxyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGNsb3NlRXZlcnlJdGVtQ29udGFpbmVyID0gY29udGFpbmVyID0+IHtcclxuICBjb25zdCBpdGVtID0gY29udGFpbmVyLmZpbmQoXCIuYXNzb3J0X19pdGVtXCIpO1xyXG4gIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIuZmluZChcIi5hc3NvcnRfX3dyYXBcIik7XHJcblxyXG4gIGl0ZW0ucmVtb3ZlQ2xhc3MoXCJhc3NvcnQtYWN0aXZlXCIpO1xyXG4gIGNvbnRlbnQud2lkdGgoMCk7XHJcbn1cclxuXHJcbmNvbnN0IG9wZW5JdGVtID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBoaWRkZW5Db250ZW50ID0gaXRlbS5maW5kKFwiLmFzc29ydF9fd3JhcFwiKTtcclxuICBjb25zdCByZXFXaWR0aCA9IG1lc3VyZVdpZHRoKGl0ZW0pO1xyXG4gIGNvbnN0IHRleHRCbG9jayA9IGl0ZW0uZmluZChcIi5hc3NvcnRfX2NvbnRlbnRcIik7XHJcblxyXG4gIGl0ZW0uYWRkQ2xhc3MoXCJhc3NvcnQtYWN0aXZlXCIpO1xyXG4gIGhpZGRlbkNvbnRlbnQud2lkdGgocmVxV2lkdGguY29udGFpbmVyKTtcclxuICB0ZXh0QmxvY2sud2lkdGgocmVxV2lkdGgudGV4dENvbnRhaW5lcik7XHJcbn1cclxuXHJcbiQoXCIuYXNzb3J0X190cmlnZ2VyXCIpLm9uIChcImNsaWNrXCIsIGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgaXRlbSA9ICR0aGlzLmNsb3Nlc3QoXCIuYXNzb3J0X19pdGVtXCIpO1xyXG4gIGNvbnN0IGl0ZW1PcGVuZWQgPSBpdGVtLmhhc0NsYXNzKFwiYXNzb3J0LWFjdGl2ZVwiKTtcclxuICBjb25zdCBjb250YWluZXIgPSAkdGhpcy5jbG9zZXN0KFwiLmFzc29ydF9fbGlzdFwiKTtcclxuXHJcbiAgaWYgKGl0ZW1PcGVuZWQpIHtcclxuICAgIGNsb3NlRXZlcnlJdGVtQ29udGFpbmVyKGNvbnRhaW5lcilcclxuICB9IGVsc2Uge1xyXG4gICAgY2xvc2VFdmVyeUl0ZW1Db250YWluZXIoY29udGFpbmVyKVxyXG4gICAgb3Blbkl0ZW0oaXRlbSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbiQoXCIuYXNzb3J0X19jbG9zZVwiKS5vbihcImNsaWNrXCIsIGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY2xvc2VFdmVyeUl0ZW1Db250YWluZXIoJCgnLmFzc29ydF9fbGlzdCcpKTtcclxufSlcclxufSkoKSIsIihmdW5jdGlvbigpIHtcclxubGV0IG15TWFwO1xyXG5cclxuY29uc3QgaW5pdCA9ICgpID0+IHtcclxuXHJcbiAgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcclxuICAgIGNlbnRlcjogWzU1Ljc0OTUzNiwgMzcuNjIwODU3XSxcclxuICAgIHpvb206IDEzLjUsXHJcbiAgICBjb250cm9sczogW11cclxuICB9KTtcclxuXHJcbiAgY29uc3QgY29vcmRzID0gW1xyXG4gIFs1NS43NTY4MzIsIDM3LjU4NjIwM10sXHJcbiAgWzU1Ljc1NzQyNSwgMzcuNjI3MDU5XSxcclxuICBbNTUuNzQ0Nzk5LCAzNy41ODE2MjJdLFxyXG4gIFs1NS43NDk1MzIsIDM3LjYwNzk0Ml0sXHJcbiAgXTtcclxuICBjb25zdCBteUNvbGxlY3Rpb24gPSBuZXcgeW1hcHMuR2VvT2JqZWN0Q29sbGVjdGlvbih7fSwge1xyXG4gICAgZHJhZ2dhYmxlOiBmYWxzZSwgXHJcbiAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXHJcbiAgICBpY29uSW1hZ2VIcmVmOiBcIi4uL2ltZy9pY29ucy9tYXJrZXIuc3ZnXCIsXHJcbiAgICBpY29uSW1hZ2VTaXplOiBbNDYsNTddLFxyXG4gICAgaWNvbkltYWdlT2Zmc2V0OiBbLTM1LCAtNTJdXHJcbiAgfSk7XHJcblxyXG4gIGNvb3Jkcy5mb3JFYWNoKGNvb3JkID0+IHtcclxuICAgIG15Q29sbGVjdGlvbi5hZGQobmV3IHltYXBzLlBsYWNlbWFyayAoY29vcmQpKTtcclxuICB9KTtcclxuXHJcbiAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlDb2xsZWN0aW9uKTtcclxuXHJcbiAgbXlNYXAuYmVoYXZpb3JzLmRpc2FibGUoJ3Njcm9sbFpvb20nKTtcclxufVxyXG5cclxuICAgeW1hcHMucmVhZHkoaW5pdCk7XHJcbn0pKCkiLCIoZnVuY3Rpb24oKSB7XHJcbmNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGFtYnVyZ2VyXCIpO1xyXG5jb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oYW1idXJnZXJfX21lbnVcIik7XHJcbmNvbnN0IGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcclxuXHJcbmJ1cmdlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICBtZW51LmNsYXNzTGlzdC5hZGQoJ21lbnVfd2luZG93Jyk7XHJcbn0pO1xyXG5cclxubWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnVfX2l0ZW0nKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlJykpIHtcclxuICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnbWVudV93aW5kb3cnKTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWVudV9faXRlbScpKSB7XHJcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfd2luZG93Jyk7XHJcbiAgfVxyXG4gIFxyXG59KTtcclxufSkoKSIsIihmdW5jdGlvbigpIHtcclxuY29uc3QgdmFsaWRhdGVGaWVsZHMgPSAoZm9ybSwgZmllbGRzQXJyYXkpID0+IHtcclxuXHJcbiAgZmllbGRzQXJyYXkuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgIGZpZWxkLnJlbW92ZUNsYXNzKFwiaW5wdXRfX2Vycm9yXCIpO1xyXG4gICAgaWYgKGZpZWxkLnZhbCgpLnRyaW0oKSA9PSBcIlwiKSB7XHJcbiAgICAgIGZpZWxkLmFkZENsYXNzKFwiaW5wdXRfX2Vycm9yXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBlcnJvckZpZWxkcyA9IGZvcm0uZmluZChcIi5pbnB1dF9fZXJyb3JcIik7XHJcblxyXG4gIHJldHVybiBlcnJvckZpZWxkcy5sZW5ndGggPT0wO1xyXG59XHJcblxyXG4kKFwiLmZvcm1cIikuc3VibWl0KChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBmb3JtID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gIGNvbnN0IG5hbWUgPSBmb3JtLmZpbmQoXCJbbmFtZT0nbmFtZSddXCIpO1xyXG4gIGNvbnN0IHBob25lID0gZm9ybS5maW5kKFwiW25hbWU9J3Bob25lJ11cIik7XHJcbiAgY29uc3QgY29tbWVudCA9IGZvcm0uZmluZChcIltuYW1lPSdjb21tZW50J11cIik7XHJcbiAgY29uc3QgdG8gPSAgZm9ybS5maW5kKFwiW25hbWU9J3RvJ11cIik7XHJcblxyXG4gIGNvbnN0IG1vZGFsID0gJChcIiNtb2RhbFwiKTtcclxuICBjb25zdCBjb250ZW50ID0gbW9kYWwuZmluZChcIi5tb2RhbF9fY29udGVudFwiKTtcclxuXHJcbiAgbW9kYWwucmVtb3ZlQ2xhc3MoXCJlcnJvci1tb2RhbFwiKTtcclxuXHJcbiAgY29uc3QgaXNWYWxpZCA9IHZhbGlkYXRlRmllbGRzKGZvcm0sIFtuYW1lLCBwaG9uZSwgY29tbWVudCwgdG9dKTtcclxuXHJcbiAgaWYgKGlzVmFsaWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSAkLmFqYXgoe1xyXG4gICAgICB1cmw6IFwiaHR0cHM6Ly93ZWJkZXYtYXBpLmxvZnRzY2hvb2wuY29tL3NlbmRtYWlsXCIsXHJcbiAgICAgIG1ldGhvZDogXCJwb3N0XCIsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxyXG4gICAgICAgIHBob25lOiBwaG9uZS52YWwoKSxcclxuICAgICAgICBjb21tZW50OiBjb21tZW50LnZhbCgpLFxyXG4gICAgICAgIHRvOiB0by52YWwoKSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC5kb25lKGRhdGEgPT4ge1xyXG4gICAgICBjb250ZW50LnRleHQoZGF0YS5tZXNzYWdlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcXVlc3QuZmFpbChkYXRhID0+IHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IGRhdGEucmVzcG9uc2VKU09OLm1lc3NhZ2U7XHJcbiAgICAgIGNvbnRlbnQudGV4dChtZXNzYWdlKTtcclxuICAgICAgbW9kYWwuYWRkQ2xhc3MoXCJlcnJvci1tb2RhbFwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcXVlc3QuYWx3YXlzKCgpID0+IHtcclxuICAgICAgJC5mYW5jeWJveC5vcGVuKHtcclxuICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgdHlwZTogXCJpbmxpbmVcIixcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuJChcIi5hcHAtc3VibWl0LWJ0blwiKS5jbGljayhlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICQuZmFuY3lib3guY2xvc2UoKTtcclxufSk7XHJcbn0pKCkiLCIoZnVuY3Rpb24oKSB7XHJcbmNvbnN0IHNlY3Rpb25zID0gJChcInNlY3Rpb25cIik7XHJcbmNvbnN0IGRpc3BsYXkgPSAkKFwiLm1haW5jb250ZW50XCIpO1xyXG5jb25zdCBzaWRlTWVudSA9JChcIi5maXhlZC1tZW51X19saW5rXCIpO1xyXG5jb25zdCBtZW51SXRlbXMgPSBzaWRlTWVudS5maW5kKFwiLmZpeGVkLW1lbnVfX2xpbmtcIik7XHJcblxyXG5jb25zdCBtb2JpbGVEZXRlY3QgPSBuZXcgTW9iaWxlRGV0ZWN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuY29uc3QgaXNNb2JpbGUgPSBtb2JpbGVEZXRlY3QubW9iaWxlKCk7XHJcblxyXG5sZXQgaW5TY3JvbGwgPSBmYWxzZTtcclxuXHJcbnNlY3Rpb25zLmZpcnN0KCkuYWRkQ2xhc3MoXCJzZWN0aW9uLWFjdGl2ZVwiKTtcclxuXHJcbmNvbnN0IGNvdW50U2VjdGlvblBvc2l0aW9uID0gKHNlY3Rpb25FcSkgPT4ge1xyXG4gIHJldHVybiBzZWN0aW9uRXEgKiAtMTAwO1xyXG59O1xyXG5cclxuY29uc3QgY2hhbmdlTWVudVRoZW1lRm9yU2VjdGlvbiA9IChzZWN0aW9uRXEpID0+IHtcclxuICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHNlY3Rpb25zLmVxKHNlY3Rpb25FcSk7XHJcbiAgY29uc3QgbWVudVRoZW1lID0gY3VycmVudFNlY3Rpb24uYXR0cihcImRhdGEtdGhlbWVcIik7XHJcbiAgY29uc3QgYWN0aXZlQ2xhc3MgPSBcImZpeGVkLWJsYWNrXCI7XHJcbiAgXHJcbiAgICBpZiAobWVudVRoZW1lID09IFwiYmxhY2tcIikge1xyXG4gICAgICBzaWRlTWVudS5hZGRDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHNpZGVNZW51LnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHJlc2V0QWN0aXZlQ2xhc3NGb3JJdGVtID0gKGl0ZW1zLCBpdGVtRXEsIGFjdGl2ZUNsYXNzKSA9PiB7XHJcbiAgaXRlbXMuZXEoaXRlbUVxKS5hZGRDbGFzcyhhY3RpdmVDbGFzcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbn1cclxuXHJcbmNvbnN0IHBlcmZvcm1UcmFuc2l0aW9uID0gc2VjdGlvbkVxID0+IHtcclxuXHJcbiAgaWYgKGluU2Nyb2xsID09IGZhbHNlKSB7XHJcbiAgICBpblNjcm9sbCA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgcG9zaXRpb24gPSBjb3VudFNlY3Rpb25Qb3NpdGlvbihzZWN0aW9uRXEpO1xyXG5cclxuICAgIGNoYW5nZU1lbnVUaGVtZUZvclNlY3Rpb24oc2VjdGlvbkVxKTtcclxuXHJcbiAgICBkaXNwbGF5LmNzcyh7XHJcbiAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtwb3NpdGlvbn0lKWBcclxuICAgIH0pO1xyXG5cclxuICAgIHJlc2V0QWN0aXZlQ2xhc3NGb3JJdGVtKHNlY3Rpb25zLCBzZWN0aW9uRXEsIFwic2VjdGlvbi1hY3RpdmVcIik7XHJcblxyXG4gICAgXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGluU2Nyb2xsID0gZmFsc2U7XHJcblxyXG4gICAgcmVzZXRBY3RpdmVDbGFzc0Zvckl0ZW0obWVudUl0ZW1zLCBzZWN0aW9uRXEsIFwiZml4ZWQtbWVudV9fbGluay0tYWN0aXZlXCIpO1xyXG4gICAgfSwgMTMwMCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2Nyb2xsVmlld3BvcnQgPSBkaXJlY3Rpb24gPT4ge1xyXG4gIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBzZWN0aW9ucy5maWx0ZXIoXCIuc2VjdGlvbi1hY3RpdmVcIik7XHJcbiAgY29uc3QgbmV4dFNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uLm5leHQoKTtcclxuICBjb25zdCBwcmV2U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ucHJldigpO1xyXG5cclxuICBpZiAoZGlyZWN0aW9uID09IFwibmV4dFwiICYmIG5leHRTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgcGVyZm9ybVRyYW5zaXRpb24obmV4dFNlY3Rpb24uaW5kZXgoKSlcclxuICB9XHJcbiAgaWYgKGRpcmVjdGlvbiA9PSBcInByZXZcIiAmJiBuZXh0U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgIHBlcmZvcm1UcmFuc2l0aW9uKHByZXZTZWN0aW9uLmluZGV4KCkpXHJcbiAgfVxyXG59XHJcblxyXG4kKHdpbmRvdykub24oXCJ3aGVlbFwiLCBlID0+IHtcclxuICBjb25zdCBkZWx0YVkgPSBlLm9yaWdpbmFsRXZlbnQuZGVsdGFZO1xyXG5cclxuICBpZiAoZGVsdGFZID4gMCkge1xyXG4gICBzY3JvbGxWaWV3cG9ydChcIm5leHRcIik7XHJcbiAgfVxyXG4gIGlmIChkZWx0YVkgPCAwKSB7XHJcbnNjcm9sbFZpZXdwb3J0KFwicHJldlwiKTtcclxuICB9XHJcbn0pO1xyXG5cclxuJCh3aW5kb3cpLm9uKFwia2V5ZG93blwiLCBlID0+IHtcclxuXHJcbiAgY29uc3QgdGFnTmFtZSA9IGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgaWYgKHRhZ05hbWUgIT0gXCJpbnB1dFwiICYmIHRhZ05hbWUgIT0gXCJ0ZXh0YXJlYVwiKSB7XHJcbiAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICBjYXNlIDM4OlxyXG4gICAgICBzY3JvbGxWaWV3cG9ydChcInByZXZcIik7XHJcbiAgICAgIGJyZWFrO1xyXG4gIFxyXG4gICAgICBjYXNlIDQwOiBcclxuICAgICAgc2Nyb2xsVmlld3BvcnQoXCJuZXh0XCIpO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuJChcIi53cmFwcGVyXCIpLm9uKFwidG91Y2htb3ZlXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuXHJcbiQoXCJbZGF0YS10b11cIikuY2xpY2soZSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKFwiZGF0YS10b1wiKTtcclxuICBjb25zdCByZXFTZWN0aW9uID0gJChgW2RhdGEtaWQ9JHt0YXJnZXR9XWApO1xyXG5cclxuICBwZXJmb3JtVHJhbnNpdGlvbihyZXFTZWN0aW9uLmluZGV4KCkpO1xyXG59KTtcclxuXHJcbiBpZiAoaXNNb2JpbGUpIHtcclxuICAkKFwiYm9keVwiKS5zd2lwZSh7XHJcbiAgICBzd2lwZTogZnVuY3Rpb24oZXZlbnQsIGRpcmVjdGlvbikge1xyXG4gICAgICBjb25zdCBzY3JvbGxlciA9IHZpZXdwb3J0U2Nyb2xsZXIoKTtcclxuICAgICAgbGV0IHNjcm9sbERpcmVjdGlvbiA9IFwiXCI7XHJcbiAgXHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT0gXCJ1cFwiKSBzY3JvbGxEaXJlY3Rpb24gPSBcIm5leHRcIjtcclxuICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcImRvd25cIikgc2Nyb2xsRGlyZWN0aW9uID0gXCJwcmV2XCI7XHJcbiAgXHJcbiAgICAgIHNjcm9sbGVyW3Njcm9sbERpcmVjdGlvbl0oKTtcclxuICAgIH0sXHJcbiAgfSk7XHJcbiB9XHJcbn0pKClcclxuIiwiLy8gKGZ1bmN0aW9uKCkge1xyXG4vLyBsZXQgIHBsYXllcjtcclxuLy8gY29uc3QgcGxheWVyQ29udGFpbmVyID0gJChcIi5wbGF5ZXJcIik7XHJcblxyXG4vLyBsZXQgZXZlbnRzSW5pdCA9ICgpID0+IHtcclxuLy8gICAkKFwiLnBsYXllcl9fc3RhcnRcIikuY2xpY2soZSA9PiB7XHJcbi8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgXHJcbi8vICAgICBpZiAocGxheWVyQ29udGFpbmVyLmhhc0NsYXNzKFwicGF1c2VkXCIpKSB7XHJcbi8vICAgICAgIHBsYXllci5wYXVzZVZpZGVvKCk7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbi8vICAgICB9XHJcbi8vICAgfSk7XHJcbiBcclxuXHJcbi8vICAgJChcIi5wbGF5ZXJfX3BsYXliYWNrXCIpLmNsaWNrKGUgPT4ge1xyXG4vLyAgICAgY29uc3QgYmFyID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4vLyAgICAgY29uc3QgY2xpY2tlZFBvc2l0aW9uID0gZS5vcmlnaW5hbEV2ZW50LmxheWVyWDtcclxuLy8gICAgIGNvbnN0IG5ld0J1dHRvblBvc2l0aW9uUGVyY2VudCA9IChjbGlja2VkUG9zaXRpb24gLyBiYXIud2lkdGgoKSkgKiAxMDA7XHJcbi8vICAgICBjb25zdCBuZXdQbGF5YmFja1Bvc2l0aW9uU2VjID1cclxuLy8gICAgIChwbGF5ZXIuZ2V0RHVyYXRpb24oKSAvIDEwMCkgKiBuZXdCdXR0b25Qb3NpdGlvblBlcmNlbnQ7XHJcbiBcclxuLy8gICAgICQoXCIucGxheWVyX19wbGF5YmFjay1idXR0b25cIikuY3NzKHtcclxuLy8gICAgICAgbGVmdDogYCR7bmV3QnV0dG9uUG9zaXRpb25QZXJjZW50fSVgXHJcbi8vICAgICB9KTtcclxuLy8gICAgICAgcGxheWVyLnNlZWtUbyhuZXdQbGF5YmFja1Bvc2l0aW9uU2VjKTtcclxuLy8gICAgfSk7XHJcbi8vIH07XHJcblxyXG4vLyBjb25zdCBmb3JtYXRUaW1lID0gdGltZVNlYyA9PiB7XHJcbi8vICAgY29uc3Qgcm91bmRUaW1lID0gTWF0aC5yb3VuZCh0aW1lU2VjKTtcclxuICBcclxuLy8gICBjb25zdCBtaW51dGVzID0gYWRkWmVybyhNYXRoLmZsb29yKHJvdW5kVGltZSAvIDYwKSk7XHJcbi8vICAgY29uc3Qgc2Vjb25kcyA9IGFkZFplcm8ocm91bmRUaW1lIC0gbWludXRlcyAqIDYwKTtcclxuICBcclxuLy8gICBmdW5jdGlvbiBhZGRaZXJvKG51bSkge1xyXG4vLyAgICAgcmV0dXJuIG51bSA8IDEwID8gYDAke251bX1gIDogbnVtO1xyXG4vLyAgIH1cclxuICBcclxuLy8gICByZXR1cm4gYCR7bWludXRlc30gOiAke3NlY29uZHN9YDtcclxuLy8gIH07XHJcblxyXG4vLyAgY29uc3Qgb25QbGF5ZXJSZWFkeSA9ICgpID0+IHtcclxuLy8gICBsZXQgaW50ZXJ2YWw7XHJcbi8vICAgY29uc3QgZHVyYXRpb25TZWMgPSBwbGF5ZXIuZ2V0RHVyYXRpb24oKTtcclxuICBcclxuLy8gICAkKFwiLnBsYXllcl9fZHVyYXRpb24tZXN0aW1hdGVcIikudGV4dChmb3JtYXRUaW1lKGR1cmF0aW9uU2VjKSk7XHJcbiAgXHJcbi8vICAgaWYgKHR5cGVvZiBpbnRlcnZhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4vLyAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbi8vICAgfVxyXG4gIFxyXG4vLyAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgY29tcGxldGVkU2VjID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbi8vICAgICBjb25zdCBjb21wbGV0ZWRQZXJjZW50ID0gKGNvbXBsZXRlZFNlYyAvIGR1cmF0aW9uU2VjKSAqIDEwMDtcclxuXHJcbi8vICAgICAkKFwiLnBsYXllcl9fcGxheWJhY2stYnV0dG9uXCIpLmNzcyh7XHJcbi8vICAgICAgIGxlZnQ6IGAke2NvbXBsZXRlZFBlcmNlbnR9JWBcclxuLy8gICAgIH0pO1xyXG4gIFxyXG4vLyAgICAgJChcIi5wbGF5ZXJfX2R1cmF0aW9uLWNvbXBsZXRlZFwiKS50ZXh0KGZvcm1hdFRpbWUoY29tcGxldGVkU2VjKSk7XHJcbi8vICAgfSwgMTAwMCk7XHJcbi8vICB9O1xyXG5cclxuLy8gIGNvbnN0IG9uUGxheWVyU3RhdGVDaGFuZ2UgPSBldmVudCA9PiB7XHJcbiBcclxuLy8gICBzd2l0Y2ggKGV2ZW50LmRhdGEpIHtcclxuLy8gICAgIGNhc2UgMTpcclxuLy8gICAgICAgcGxheWVyQ29udGFpbmVyLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4vLyAgICAgICBwbGF5ZXJDb250YWluZXIuYWRkQ2xhc3MoXCJwYXVzZWRcIik7XHJcbi8vICAgICAgIGJyZWFrO1xyXG4gIFxyXG4vLyAgICAgY2FzZSAyOlxyXG4vLyAgICAgICBwbGF5ZXJDb250YWluZXIucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbi8vICAgICAgIHBsYXllckNvbnRhaW5lci5yZW1vdmVDbGFzcyhcInBhdXNlZFwiKTtcclxuLy8gICAgICAgYnJlYWs7XHJcbi8vICAgfVxyXG4vLyAgfTtcclxuLy8gZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbi8vICAgcGxheWVyID0gbmV3IFlULlBsYXllcignWVQnLCB7XHJcbi8vICAgICBoZWlnaHQ6ICc0MDUnLFxyXG4vLyAgICAgd2lkdGg6ICc5NDAnLFxyXG4vLyAgICAgdmlkZW9JZDogJ0xYYjNFS1dzSW5RJyxcclxuLy8gICAgIGV2ZW50czoge1xyXG4vLyAgICAgICAnb25SZWFkeSc6IG9uUGxheWVyUmVhZHksXHJcbi8vICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG4vLyAgICAgfSxcclxuLy8gICAgICAgcGxheWVyVmFyczoge1xyXG4vLyAgICAgICBjb250cm9sczowLFxyXG4vLyAgICAgICBkaXNhYmxla2I6IDAsXHJcbi8vICAgICAgIHNob3dpbmZvOiAwLFxyXG4vLyAgICAgICByZWw6IDAsXHJcbi8vICAgICAgIGF1dG9wbGF5OiAwLFxyXG4vLyAgICAgICBtb2Rlc3RicmFuZGluZzogMCxcclxuLy8gICAgIH1cclxuLy8gICB9KTtcclxuLy8gfVxyXG5cclxuLy8gZXZlbnRzSW5pdCgpO1xyXG4vLyB9KSgpXHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcbmxldCBwbGF5ZXI7XHJcbmNvbnN0IHBsYXllckNvbnRhaW5lciA9ICQoJy5wbGF5ZXInKTtcclxuY29uc3QgcGxheWVyU3RhcnQgPSAkKCcucGxheWVyX19zdGFydCcpO1xyXG5jb25zdCB2b2x1bWVCdG4gPSAkKFwiLnZvbHVtZV9fcGljXCIpO1xyXG5cclxuXHJcbmxldCBldmVudHNJbml0ID0gKCkgPT4ge1xyXG4gICQoXCIucGxheWVyX19zdGFydFwiKS5jbGljayhlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCBidG4gPSAkKGUuY3VycmVudFRhcmdldCk7XHJcblxyXG4gICAgaWYgKHBsYXllclN0YXJ0Lmhhc0NsYXNzKFwicGxheWVyLS1wYXVzZWRcIikpIHtcclxuXHJcblxyXG4gICAgICBwbGF5ZXIucGF1c2VWaWRlbygpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QbGF5ZXJSZWFkeSgpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiLnBsYXllcl9fcGxheWJhY2tcIikuY2xpY2soZSA9PiB7XHJcbiAgICBjb25zdCBiYXIgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBjbGlja2VkUG9zaXRpb24gPSBlLm9yaWdpbmFsRXZlbnQubGF5ZXJYO1xyXG4gICAgY29uc3QgbmV3QnV0dG9uUG9zaXRpb25QZXJjZW50ID0gKGNsaWNrZWRQb3NpdGlvbiAvIGJhci53aWR0aCgpKSAqIDEwMDtcclxuICAgIGNvbnN0IG5ld1BsYXliYWNrUG9zaXRpb25TZWMgPVxyXG4gICAgICAocGxheWVyLmdldER1cmF0aW9uKCkgLyAxMDApICogbmV3QnV0dG9uUG9zaXRpb25QZXJjZW50O1xyXG5cclxuXHJcbiAgICAkKFwiLnBsYXllcl9fcGxheWJhY2stYnV0dG9uXCIpLmNzcyh7XHJcbiAgICAgIGxlZnQ6IGAke25ld0J1dHRvblBvc2l0aW9uUGVyY2VudH0lYFxyXG4gICAgfSk7XHJcblxyXG4gICAgcGxheWVyLnNlZWtUbyhuZXdQbGF5YmFja1Bvc2l0aW9uU2VjKTtcclxuICB9KTtcclxuXHJcbiAgJChcIi5wbGF5ZXJfX3NwbGFzaFwiKS5jbGljayhlID0+IHtcclxuICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICB9KTtcclxuXHJcblxyXG4gICQoXCIudm9sdW1lX19waWNcIikuY2xpY2soZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHZvbHVtZUJ0bi5oYXNDbGFzcyhcInZvbHVtZV9fcGljLS1ub3NvdW5kXCIpKSB7XHJcblxyXG4gICAgICBwbGF5ZXIudW5NdXRlKCk7XHJcbiAgICAgIHZvbHVtZUJ0bi5yZW1vdmVDbGFzcyhcInZvbHVtZV9fcGljLS1ub3NvdW5kXCIpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICBwbGF5ZXIubXV0ZSgpO1xyXG4gICAgICB2b2x1bWVCdG4uYWRkQ2xhc3MoXCJ2b2x1bWVfX3BpYy0tbm9zb3VuZFwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJChcIi52b2x1bWVfX3BsYXliYWNrXCIpLmNsaWNrKGUgPT4ge1xyXG5cclxuICAgIGNvbnN0IGJhclZvbHVtZSA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IGNsaWNrZWRQb3NpdGlvblZvbHVtZSA9IGUub3JpZ2luYWxFdmVudC5sYXllclg7XHJcbiAgICBjb25zdCBuZXdWb2x1bWVCdXR0b25Qb3NpdGlvblBlcmNlbnQgPSAoY2xpY2tlZFBvc2l0aW9uVm9sdW1lIC8gYmFyVm9sdW1lLndpZHRoKCkpICogMTAwO1xyXG4gICAgbGV0IHZvbHVtZVBvaW50ID0gcGxheWVyLmdldFZvbHVtZSgpO1xyXG5cclxuXHJcbiAgICAkKFwiLnZvbHVtZV9fcGxheWJhY2stYnV0dG9uXCIpLmNzcyh7XHJcbiAgICAgIGxlZnQ6IGAke25ld1ZvbHVtZUJ1dHRvblBvc2l0aW9uUGVyY2VudH0lYFxyXG4gICAgfSk7XHJcblxyXG4gICAgcGxheWVyLnNldFZvbHVtZShuZXdWb2x1bWVCdXR0b25Qb3NpdGlvblBlcmNlbnQpO1xyXG5cclxuICB9KTtcclxuXHJcblxyXG59O1xyXG5cclxuXHJcbmNvbnN0IG9uUGxheWVyUmVhZHkgPSAoKSA9PiB7XHJcbiAgbGV0IGludGVydmFsO1xyXG4gIGNvbnN0IGR1cmF0aW9uU2VjID0gcGxheWVyLmdldER1cmF0aW9uKCk7XHJcblxyXG4gIGlmICh0eXBlb2YgaW50ZXJ2YWwgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gIH1cclxuXHJcbiAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICBjb25zdCBjb21wbGV0ZWRTZWMgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgIGNvbnN0IGNvbXBsZXRlZFBlcmNlbnQgPSAoY29tcGxldGVkU2VjIC8gZHVyYXRpb25TZWMpICogMTAwO1xyXG5cclxuICAgICQoXCIucGxheWVyX19wbGF5YmFjay1idXR0b25cIikuY3NzKHtcclxuICAgICAgbGVmdDogYCR7Y29tcGxldGVkUGVyY2VudH0lYFxyXG4gICAgfSk7XHJcblxyXG4gIH0sIDEwMDApO1xyXG59O1xyXG5cclxuXHJcbmNvbnN0IG9uUGxheWVyU3RhdGVDaGFuZ2UgPSBldmVudCA9PiB7XHJcbiAgc3dpdGNoIChldmVudC5kYXRhKSB7XHJcbiAgICBjYXNlIDE6XHJcbiAgICAgIHBsYXllckNvbnRhaW5lci5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgcGxheWVyU3RhcnQuYWRkQ2xhc3MoXCJwbGF5ZXItLXBhdXNlZFwiKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDI6XHJcbiAgICAgIHBsYXllckNvbnRhaW5lci5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgcGxheWVyU3RhcnQucmVtb3ZlQ2xhc3MoXCJwbGF5ZXItLXBhdXNlZFwiKTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpIHtcclxuICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCd5dC1wbGF5ZXInLCB7XHJcbiAgICBoZWlnaHQ6ICc0MDUnLFxyXG4gICAgd2lkdGg6ICc2NjAnLFxyXG4gICAgdmlkZW9JZDogJ0xYYjNFS1dzSW5RJyxcclxuICAgIGV2ZW50czoge1xyXG4gICAgICAnb25SZWFkeSc6IG9uUGxheWVyUmVhZHksXHJcbiAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG4gICAgfSxcclxuICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgY29udHJvbHM6IDAsXHJcbiAgICAgIGRpc2FibGVrYjogMCxcclxuICAgICAgc2hvd2luZm86IDAsXHJcbiAgICAgIHJlbDogMCxcclxuICAgICAgYXV0b3BsYXk6IDAsXHJcbiAgICAgIG1vZGVzYnJhbmRpbmc6IDBcclxuICAgIH1cclxuICB9KVxyXG59O1xyXG5cclxuXHJcbmV2ZW50c0luaXQoKTtcclxufSkgKCkiLCIoZnVuY3Rpb24oKSB7XHJcbmNvbnN0IHNsaWRlciA9ICQoJy5zbGlkZXInKS5ieFNsaWRlcih7XHJcbiAgcGFnZXI6IGZhbHNlLFxyXG4gIGNvbnRyb2xzOiBmYWxzZVxyXG59KTtcclxuXHJcbiQoXCIuc2VjdGlvbi1iYXJfX2Fycm93LWJhY2tcIikuY2xpY2soZSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHNsaWRlci5nb1RvUHJldlNsaWRlKCk7XHJcblxyXG59KVxyXG4kKFwiLnNlY3Rpb24tYmFyX19hcnJvdy1mb3J3YXJkXCIpLmNsaWNrKGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBzbGlkZXIuZ29Ub05leHRTbGlkZSgpO1xyXG59KVxyXG59KSAoKSIsIihmdW5jdGlvbigpIHtcclxuY29uc3QgZmluZEJsb2NrQnlBbGlhcyA9IGFsaWFzID0+IHtcclxuICByZXR1cm4gJChcIi5yZXZpZXdzX19pdGVtXCIpLmZpbHRlcigobmR4LCBpdGVtKSA9PiB7XHJcbiAgICByZXR1cm4gJChpdGVtKS5hdHRyKFwiZGF0YS1saW5rZWQtd2l0aFwiKSA9PSBhbGlhc1xyXG4gIH0pO1xyXG59XHJcbiQoXCIuaW50ZXJhY3RpdmUtYXZhdGFyX19saW5rXCIpLmNsaWNrKGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cihcImRhdGEtb3BlblwiKTtcclxuICBjb25zdCBpdGVtVG9TaG93ID0gZmluZEJsb2NrQnlBbGlhcyh0YXJnZXQpO1xyXG4gIGNvbnN0IGN1ckl0ZW0gPSAkdGhpcy5jbG9zZXN0KFwiLnJldmlld3NfX3N3aXRjaGVyLWl0ZW1cIik7XHJcblxyXG4gIGl0ZW1Ub1Nob3cuYWRkQ2xhc3MoXCJpdGVtLWFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiaXRlbS1hY3RpdmVcIik7XHJcbiAgY3VySXRlbS5hZGRDbGFzcyhcIml0ZW1fX2FjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiaXRlbV9fYWN0aXZlXCIpO1xyXG59KTtcclxufSkoKSJdfQ==
